"use strict";(self.webpackChunkcodepad=self.webpackChunkcodepad||[]).push([[632],{9453:(e,t,n)=>{function i(e){fetch("/api/projects/reached_pad_limit").then((e=>(e.ok||console.error(`Failed to check pad limit: ${e.status}`),e.json()))).then((t=>{e(t)})).catch((e=>{console.error(e)}))}n.d(t,{l:()=>i})},16397:(e,t,n)=>{n.d(t,{p:()=>p});var i=n(19388),s=n(84712),o=n(47721),r=n(96540),a=n(88387);const l="&#8203;";class c{constructor(e,t,n,i,s,o=null){this.runType=e,this.options=t,this.runFile=n,this.args=i,this.useAiApiKeys=s,this.originalFile=o||n}}const u=Object.freeze({SUCCESS:"SUCCESS",FAILURE:"FAILURE",USER_KILLED:"USER_KILLED"});function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}class h{constructor(e,t,n,o){this.connectionNum=e,this.outputDiv=n,this.onDisconnect=o,this.outputDiv.innerHTML="",this.outputText="",this.outputHtmlSafe="",this.inputText="",this.ansiUp=new s.v,this.exitStatus=u.USER_KILLED,this.keyPress=()=>{this.placeCursorAtBottom()},this.paste=e=>{e.preventDefault(),this.placeCursorAtBottom();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)},this.keyDown=e=>{if(13==e.keyCode)e.stopPropagation(),e.preventDefault(),this.outputText+=this.inputText+"\n",this.outputHtmlSafe+='<span class="text-success">'+d(this.inputText)+"</span>\n",i.sendMessage("TEXT:INPUT",this.connectionNum,this.inputText+"\n"),this.inputText="",this.outputDiv.innerHTML=this.outputHtmlSafe+l,this.outputDiv.scrollTop=this.outputDiv.scrollHeight,this.placeCursorAtBottom();else if("Backspace"===e.key||"Delete"===e.key){if(window.getSelection){const t=window.getSelection();if(t.rangeCount>0){const n=t.getRangeAt(0),i=Array.prototype.indexOf.call(this.outputDiv.childNodes,n.startContainer),s=n.startOffset,o=Array.prototype.indexOf.call(this.outputDiv.childNodes,n.endContainer),r=n.endOffset;if(this.outputDiv.childNodes.length>0){const t=this.outputDiv.childNodes[this.outputDiv.childNodes.length-1].textContent.length-this.inputText.length-1,n=this.outputDiv.childNodes[this.outputDiv.childNodes.length-1].textContent.length-1;if("Backspace"===e.key&&r==t&&o==this.outputDiv.childNodes.length-1||"Delete"===e.key&&s>=n&&i==this.outputDiv.childNodes.length-1)return this.placeCursorAtBottom(),e.stopPropagation(),e.preventDefault(),!1}}}this.placeCursorAtBottom()}},this.input=e=>{this.placeCursorAtBottom(),this.outputDiv.scrollTop=this.outputDiv.scrollHeight,e.target.textContent.length-1>=this.outputText.length&&(this.inputText=e.target.textContent.substring(this.outputText.length,e.target.textContent.length-1)),this.setDivAndKeepSelection(this.outputHtmlSafe+d(this.inputText),0)},this.outputDiv.addEventListener("keypress",this.keyPress),this.outputDiv.addEventListener("paste",this.paste),this.outputDiv.addEventListener("keydown",this.keyDown),this.outputDiv.addEventListener("input",this.input),this.outputDiv.setAttribute("contenteditable",!0),this.outputDiv.focus(),this.outputHandler=e=>{this.connectionNum>=0&&(e=e.replace(/(?:\r\n|\r|\n)/g,"\n"),this.outputText+=e.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""),this.outputHtmlSafe+=this.ansiUp.ansi_to_html(e),this.setDivAndKeepSelection(this.outputHtmlSafe+d(this.inputText),e.length))},this.exitStatusHandler=e=>{this.exitStatus=e,this.disconnect()},this.outputHandler(t),i.registerEventHandler("TEXT:OUTPUT"+e,this.outputHandler),i.registerEventHandler("TEXT:EXIT_STATUS"+e,this.exitStatusHandler)}setDivAndKeepSelection(e,t){this.outputDiv.normalize();let n=-1,i=null,s=-1,o=null,r=!1,a=!1;if(document.activeElement==this.outputDiv&&window.getSelection){const e=window.getSelection();if(e.rangeCount>0){const l=e.getRangeAt(0);if(l.startContainer.parentNode==this.outputDiv?n=Array.prototype.indexOf.call(this.outputDiv.childNodes,l.startContainer):l.startContainer.parentNode&&l.startContainer.parentNode.parentNode==this.outputDiv&&(n=Array.prototype.indexOf.call(this.outputDiv.childNodes,l.startContainer.parentNode)),i=l.startOffset,l.endContainer.parentNode==this.outputDiv?s=Array.prototype.indexOf.call(this.outputDiv.childNodes,l.endContainer):l.endContainer.parentNode&&l.endContainer.parentNode.parentNode==this.outputDiv&&(s=Array.prototype.indexOf.call(this.outputDiv.childNodes,l.endContainer.parentNode)),o=l.endOffset,this.outputDiv.childNodes.length>0){const e=this.outputDiv.childNodes[this.outputDiv.childNodes.length-1].textContent.length-this.inputText.length-1;n==this.outputDiv.childNodes.length-1&&i>=e&&(t<0?i=e:i+=t),s==this.outputDiv.childNodes.length-1&&o>=e&&(t<0?o=e:o+=t)}const c=e.anchorNode.compareDocumentPosition(e.focusNode);(!c&&e.anchorOffset>e.focusOffset||c===Node.DOCUMENT_POSITION_PRECEDING)&&(a=!0),l.startContainer==this.outputDiv&&l.endContainer==this.outputDiv&&(r=!0)}}const c=parseInt(window.getComputedStyle(this.outputDiv).fontSize,10)/3;if(this.outputDiv.scrollHeight-this.outputDiv.scrollTop-this.outputDiv.clientHeight<c?(this.outputDiv.innerHTML=e+l,this.outputDiv.scrollTop=this.outputDiv.scrollHeight):this.outputDiv.innerHTML=e+l,-1!=n&&-1!=s||r){let e=r?this.outputDiv:this.outputDiv.childNodes[n];"SPAN"==e.tagName&&(e=e.childNodes[0]);let t=r?this.outputDiv:this.outputDiv.childNodes[s];"SPAN"==t.tagName&&(t=t.childNodes[0]);const l=window.getSelection();l.removeAllRanges();const c=document.createRange();if(c.setStart(e,i),c.setEnd(t,o),a){const t=c.cloneRange();t.collapse(!1),l.addRange(t),l.extend(e,i)}else l.addRange(c)}}placeCursorAtBottom(){let e=!0;if(window.getSelection){const t=window.getSelection();if(t.rangeCount>0){const n=t.getRangeAt(0),i=Array.prototype.indexOf.call(this.outputDiv.childNodes,n.startContainer),s=n.startOffset,o=Array.prototype.indexOf.call(this.outputDiv.childNodes,n.endContainer),r=n.endOffset;if(this.outputDiv.childNodes.length>0){const t=this.outputDiv.childNodes[this.outputDiv.childNodes.length-1].textContent.length-this.inputText.length-1,a=this.outputDiv.childNodes[this.outputDiv.childNodes.length-1].textContent.length-1;if(s>=t&&i==this.outputDiv.childNodes.length-1&&s<=a){if(e=!1,r>a){const e=window.getSelection();e.removeAllRanges();const t=document.createRange();t.setStart(this.outputDiv.childNodes[o],s),t.setEnd(this.outputDiv.childNodes[o],a),e.addRange(t)}}else if(r>=t&&o==this.outputDiv.childNodes.length-1&&r<=a){e=!1;const n=window.getSelection();n.removeAllRanges();const i=document.createRange();i.setStart(this.outputDiv.childNodes[o],t),i.setEnd(this.outputDiv.childNodes[o],r),n.addRange(i)}else if(n.startContainer==this.outputDiv&&n.endContainer==this.outputDiv&&s!=r||s<t&&r>a){e=!1;const n=window.getSelection();n.removeAllRanges();const i=document.createRange();i.setStart(this.outputDiv.childNodes[this.outputDiv.childNodes.length-1],t),i.setEnd(this.outputDiv.childNodes[this.outputDiv.childNodes.length-1],t+this.inputText.length),n.addRange(i)}}}}if(e){const e=document.createRange();e.selectNodeContents(this.outputDiv.childNodes[this.outputDiv.childNodes.length-1]),e.collapse(!1),e.setStart(e.startContainer,e.startOffset-1),e.setEnd(e.endContainer,e.endOffset-1);const t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}disconnect(){if(this.connectionNum>=0){const e=this.connectionNum;this.connectionNum=-1,this.setDivAndKeepSelection(this.outputHtmlSafe,-1),this.outputDiv.setAttribute("contenteditable",!1),this.outputDiv.removeEventListener("keypress",this.keyPress),this.outputDiv.removeEventListener("paste",this.paste),this.outputDiv.removeEventListener("keydown",this.keyDown),this.outputDiv.removeEventListener("input",this.input),i.removeEventHandler("TEXT:OUTPUT"+e,this.outputHandler),i.removeEventHandler("TEXT:EXIT_STATUS"+e,this.exitStatusHandler),i.sendMessage("TEXT:DISCONNECT",e),this.onDisconnect&&this.onDisconnect(this.exitStatus)}}}const p=(0,r.memo)((function({visibilityEvent:e,onTitleChange:t,onRunStateChange:n,ref:s}){const[l,d]=(0,r.useState)(""),p=(0,r.useContext)(a.jq),m=(0,r.useRef)(null),f=(0,r.useRef)([]),g=(0,r.useRef)(null),v=(0,a.Vo)(n),b=(0,r.useRef)(!1),y=(0,r.useRef)(!1),T=e=>{d("");let s=(0,o.am)(e.originalFile,30);t((0,o.am)(s,30)+" - running"),n(e.originalFile),y.current=!0,i.sendMessage("TEXT:RUN",e.runType,e.options,e.runFile,e.args,e.useAiApiKeys,((e,r)=>{y.current=!1,b.current?e>=0&&i.sendMessage("TEXT:DISCONNECT",e):e>=0?g.current=new h(e,r,m.current,(e=>{g.current=null,t((0,o.am)(s,30)+" - stopped"),n(null),e===u.SUCCESS&&f.current.length>0?T(f.current.shift()):f.current=[]})):r&&(n(null),d(r))}))};return(0,r.useImperativeHandle)(s,(()=>({runFile:async(e,t)=>{if(!y.current){g.current&&g.current.disconnect();const n=await e.shouldUseAiApiKeys(),i=(0,o.uQ)(t);if("java"===i){f.current.push(new c("default",e.config.compileOptions,t,"",n));const i=t;t=t.substring(0,t.length-5)+".class",f.current.push(new c("autocompile",e.config.runOptions,t,e.config.programArgs,n,i))}else if("cpp"===i){f.current.push(new c("default",e.config.compileOptions,t,"",n));const i=t;t=t.substring(0,t.length-4),f.current.push(new c("autocompile",e.config.runOptions,t,e.config.programArgs,n,i))}else{let i="default";e.config.interactiveMode&&(i="interactive"),f.current.push(new c(i,e.config.runOptions,t,e.config.programArgs,n))}T(f.current.shift())}},stop:()=>{g.current&&g.current.disconnect()}}))),(0,r.useEffect)((()=>{const e=()=>{g.current&&g.current.disconnect()};i.registerDisconnectHandler(e);const t=v.current;return()=>{b.current=!0,y.current&&t(null),g.current&&g.current.disconnect(),i.removeDisconnectHandler(e)}}),[v]),(0,r.useEffect)((()=>{let t=!1;const n=e=>{if(e.visible)t&&setTimeout((()=>{m.current.scrollTop=m.current.scrollHeight}),0);else{const e=parseInt(window.getComputedStyle(m.current).fontSize,10)/3;t=m.current.scrollHeight-m.current.scrollTop-m.current.clientHeight<e}};return e.addHandler(n),()=>{e.removeHandler(n)}}),[e]),r.createElement(r.Fragment,null,l?r.createElement("span",{className:"text-danger",style:{whiteSpace:"pre-wrap"}},l):null,r.createElement("div",{className:"w-100 h-100 console-output",style:{outline:"none",paddingLeft:"5px",whiteSpace:"pre-wrap",wordBreak:"break-all",overflowY:"auto",display:l?"none":"",fontFamily:p.family,fontSize:p.size+"pt"},spellCheck:!1,"data-gramm":!1,ref:m}))}))},17134:(e,t,n)=>{n.d(t,{q:()=>u});var i=n(19388),s=n(96540),o=n(88387);class r{constructor(e,t){this.xterm=null,this.fitAddon=null,this.connectionNum=e,this.onDisconnect=t,this.resizeHandler=null,this.dataHandler=null,this.bellHandler=null,this.initialOutput="",this.outputHandler=e=>{this.xterm?this.xterm.write(e):this.initialOutput+=e},i.registerEventHandler("TEXT:OUTPUT"+e,this.outputHandler),this.disconnectHandler=()=>{this.disconnect()},i.registerEventHandler("TEXT:EXIT_STATUS"+e,this.disconnectHandler),this.audioClip=new Audio("/static/audio/bell.oga"),this.audioQueue=[],this.audioClip.addEventListener("ended",(()=>{this.audioQueue.shift(),this.audioQueue.length>=1&&this.audioQueue[0].play()}))}connectXterm(e,t){this.xterm=e,this.fitAddon=t,this.xterm.clear(),this.xterm.focus(),this.xterm.options.disableStdin=!1,this.resize(this.xterm.rows,this.xterm.cols),this.resizeHandler=this.xterm.onResize((e=>{this.resize(e.rows,e.cols)})),this.dataHandler=this.xterm.onData((e=>{i.sendMessage("TEXT:INPUT",this.connectionNum,e)})),this.bellHandler=this.xterm.onBell((()=>{this.audioQueue.length<3&&(this.audioQueue.push(this.audioClip),1==this.audioQueue.length&&this.audioQueue[0].play())})),this.initialOutput&&(this.xterm.write(this.initialOutput),this.initialOutput="")}runFileInShell(e,t){if(this.connectionNum>=0){let n="default";e.config.interactiveMode&&(n="interactive"),i.sendMessage("TEXT:RUN_IN_SHELL",this.connectionNum,n,e.config.runOptions,e.config.compileOptions,t,e.config.programArgs)}}resize(e,t){this.connectionNum>=0&&i.sendMessage("TEXT:RESIZE_SHELL",this.connectionNum,e,t)}disconnect(){if(this.connectionNum>=0){const e=this.connectionNum;this.connectionNum=-1,this.xterm&&(this.xterm.options.disableStdin=!0),i.removeEventHandler("TEXT:OUTPUT"+e,this.outputHandler),i.removeEventHandler("TEXT:EXIT_STATUS"+e,this.disconnectHandler),i.sendMessage("TEXT:DISCONNECT",e),this.resizeHandler&&this.resizeHandler.dispose(),this.dataHandler&&this.dataHandler.dispose(),this.bellHandler&&this.bellHandler.dispose(),this.audioQueue=[],this.audioClip.removeEventListener("ended",this.audioEndedHandler),this.onDisconnect&&this.onDisconnect()}}}function a(e,t){if(e){const n=t.proposeDimensions();if(n&&n.rows>0&&n.cols>0){const t=Math.max(3,n.rows),i=Math.max(10,n.cols);t===e.rows&&i===e.cols||e.resize(i,t)}}}function l(e){const t=getComputedStyle(document.body),n={foreground:t.getPropertyValue("--bs-body-color"),cursor:t.getPropertyValue("--bs-body-color"),selectionBackground:t.getPropertyValue("--bs-primary")+"66",background:t.getPropertyValue("--bs-body-bg"),cursorAccent:t.getPropertyValue("--bs-body-bg")};e.options.theme=n}const c=(0,s.memo)((function({restartButtonEnabled:e,onRestartClick:t}){const n=(0,s.useRef)(null);(0,s.useEffect)((()=>{$(n.current).fadeIn()}),[]);const i=(0,s.useRef)(null);return(0,s.useEffect)((()=>{i.current&&(e?(i.current.hide(),i.current.disable()):i.current.enable())}),[e]),s.createElement("div",{className:"alert alert-primary m-1 py-2",role:"alert",style:{display:"none"},ref:n},s.createElement("div",{className:"d-flex align-items-center justify-content-between"},"Shell is not running.",s.createElement(o.O2,{tag:"div","data-bs-toggle":"tooltip","data-bs-placement":"bottom","data-bs-fallback-placements":'["bottom"]',title:"Not connected to server",ref:i},s.createElement("button",{className:"btn btn-primary output-run-btn",type:"button",onClick:t,disabled:!1===e},"Restart"))))})),u=(0,s.memo)((function({resizeEvent:e,visibilityEvent:t,onTitleChange:u,runConfig:d,ref:h}){const[p,m]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),y=(0,s.useRef)(null),T=(0,s.useRef)(null),E=(0,s.useRef)(null),S=(0,s.useRef)(null),C=(0,s.useContext)(o.Dx);(0,s.useEffect)((()=>{E.current&&l(E.current)}),[C]);const w=(0,s.useContext)(o.jq),D=(0,s.useCallback)((()=>{var e,t,n;E.current&&(E.current.options.fontSize=4*w.size/3,e=E.current,t=w.family,n=()=>{a(E.current,S.current)},e.options.fontFamily=t,document.fonts.ready.then((()=>{e._core._charSizeService.measure(),n()})))}),[w]),N=(0,o.Vo)(D);(0,s.useEffect)((()=>{D()}),[D]);const I=(0,s.useRef)(!1),A=(0,s.useRef)(!1),k=(0,s.useRef)(!1),O=(0,s.useRef)(null),x=(0,o.Vo)(u),H=(0,s.useCallback)((async e=>{if(O.current=e,!k.current){A.current=!0,k.current=!0,m(""),g(!1),y.current&&y.current.disconnect();const e=await d.shouldUseAiApiKeys();i.sendMessage("TEXT:RUN","shell","","","",e,((e,t)=>{k.current=!1,I.current?e>=0&&i.sendMessage("TEXT:DISCONNECT",e):e>=0?(x.current("Shell - running"),y.current=new r(e,(()=>{y.current=null,x.current("Shell - stopped"),g(!0)})),E.current&&y.current.connectXterm(E.current,S.current),O.current&&(O.current(),O.current=null)):t&&(g(!0),m(t),O.current=null)}))}}),[x,d]);return(0,s.useImperativeHandle)(h,(()=>({runFileInShell:e=>{y.current?y.current.runFileInShell(d,e):H((()=>{y.current.runFileInShell(d,e)}))}})),[H,d]),(0,s.useEffect)((()=>{Promise.all([Promise.all([n.e(1012),n.e(6935)]).then(n.t.bind(n,97856,23)),Promise.all([n.e(1012),n.e(6935)]).then(n.t.bind(n,33616,23)),Promise.all([n.e(1012),n.e(6935)]).then(n.t.bind(n,56180,23)),Promise.all([n.e(1012),n.e(6935)]).then(n.bind(n,82671))]).then((e=>{if(I.current)return;const t=e[0].Terminal,n=e[1].FitAddon,i=e[2].WebglAddon;E.current=new t({cursorBlink:!0,macOptionIsMeta:!0,scrollback:5e3}),S.current=new n,E.current.loadAddon(S.current);try{E.current.loadAddon(new i)}catch{}E.current.open(T.current),l(E.current),N.current(),y.current&&y.current.connectXterm(E.current,S.current)}));const e=()=>{b(!1),y.current&&y.current.disconnect()},t=()=>{b(!0),A.current||H()};return i.registerReadyHandler(t),i.registerDisconnectHandler(e),()=>{I.current=!0,y.current&&y.current.disconnect(),i.removeReadyHandler(t),i.removeDisconnectHandler(e)}}),[H,N]),(0,s.useEffect)((()=>{const t=()=>{setTimeout((()=>{a(E.current,S.current)}),0)};return e.addHandler(t),()=>{e.removeHandler(t)}}),[e]),(0,s.useEffect)((()=>{const e=e=>{e.visible&&setTimeout((()=>{setTimeout((()=>{a(E.current,S.current)}),0)}),0)};return t.addHandler(e),()=>{t.removeHandler(e)}}),[t]),(0,s.useEffect)((()=>{a(E.current,S.current)}),[f]),s.createElement("div",{className:"d-flex flex-column h-100"},f?s.createElement(c,{restartButtonEnabled:v,onRestartClick:()=>{H(null)}}):null,p?s.createElement("span",{className:"text-danger"},p):null,s.createElement("div",{className:"flex-grow-1",ref:T,style:{display:p?"none":"",minHeight:0,overflowY:"hidden",paddingLeft:"5px"}}))}))},19388:(e,t,n)=>{n.r(t),n.d(t,{containerName:()=>c,disable:()=>p,enable:()=>h,registerConnectHandler:()=>f,registerDisconnectHandler:()=>y,registerEventHandler:()=>E,registerReadyHandler:()=>v,removeConnectHandler:()=>g,removeDisconnectHandler:()=>T,removeEventHandler:()=>S,removeReadyHandler:()=>b,sendMessage:()=>m}),n(44114);var i=n(23508);const s={CONNECTING:1,INITIALIZING_CONTAINER:2,READY:3},o=[],r=[],a=[];let l=!1,c=null,u=s.CONNECTING,d=(0,i.Ay)("/users",{transports:["websocket"],autoConnect:!1,reconnection:!0,reconnectDelay:1e3,reconnectDelayMax:4e3,randomizationFactor:.25,timeout:3e3,closeOnBeforeunload:!1});function h(e){if(!l&&e){l=!0;let t="";window.CodePadGlobals&&(t=window.CodePadGlobals.mode),d.auth={projectId:e,mode:t},d.connect()}}function p(){l&&(l=!1,d&&d.disconnect())}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d&&(n?d.emit(e,...n):d.emit(e))}function f(e){o.push(e),u!=s.READY&&u!=s.INITIALIZING_CONTAINER||e()}function g(e){const t=o.indexOf(e);t>=0&&o.splice(t,1)}function v(e){r.push(e),u==s.READY&&e()}function b(e){const t=r.indexOf(e);t>=0&&r.splice(t,1)}function y(e){a.push(e),u!=s.READY&&u!=s.INITIALIZING_CONTAINER&&e()}function T(e){const t=a.indexOf(e);t>=0&&a.splice(t,1)}function E(e,t){d.on(e,t)}function S(e,t){d.off(e,t)}d.on("SESSION_INITIALIZING",(e=>{e&&(c=e),u=s.INITIALIZING_CONTAINER;for(const e of o.slice())e()})),d.on("READY",(e=>{if(e&&(c=e),u==s.CONNECTING)for(const e of o.slice())e();u=s.READY;for(const e of r.slice())e()})),d.on("disconnect",(e=>{for(const e of a.slice())e();u=s.CONNECTING,c=null,!l||"io server disconnect"!==e&&"io client disconnect"!==e||d.connect()}))},22955:(e,t,n)=>{n.d(t,{M:()=>o}),n(44114),n(18111),n(7588);var i=n(58987);class s{programArgs="";runOptions="";compileOptions="";customWebServer=!1;customWebServerPort=80;runInShell=!1;interactiveMode=!1;useAiApiKeys=!1;constructor(e){e instanceof s&&(this.programArgs=e.programArgs,this.runOptions=e.runOptions,this.compileOptions=e.compileOptions,this.customWebServer=e.customWebServer,this.customWebServerPort=e.customWebServerPort,this.runInShell=e.runInShell,this.interactiveMode=e.interactiveMode,this.useAiApiKeys=e.useAiApiKeys)}}class o{#e;constructor(e,t,n,i,o,r){this.projectData=e,this.saveSettings=n,this.loggedIn=o,this.askAiApiKeyPermission=r,this.changeHandlers=[];const a=new s;if(i){"true"==localStorage.getItem(this.projectData.lang+"RunInteractive")&&(a.interactiveMode=!0);const e=$("#interactive-mode");if(e.length>0){e.show();const t=$("#interactive-mode-switch");t.prop("checked",a.interactiveMode),t.change((e=>{this.#t("interactiveMode",e.currentTarget.checked),e.currentTarget.checked?localStorage.setItem(this.projectData.lang+"RunInteractive",!0):localStorage.removeItem(this.projectData.lang+"RunInteractive")}))}}if("programArgs"in t){a.programArgs=t.programArgs;const e=$("#program-args-input");this.#n(e,e.val.bind(e),t.programArgs,"/api/projects/save_program_args","programArgs","programargs")}if("compileOptions"in t){a.compileOptions=t.compileOptions;const e=$("#compile-options-input");this.#n(e,e.val.bind(e),t.compileOptions,"/api/projects/save_compile_options","compileOptions","compileoptions")}if("runOptions"in t){a.runOptions=t.runOptions;const e=$("#run-options-input");this.#n(e,e.val.bind(e),t.runOptions,"/api/projects/save_run_options","runOptions","runoptions")}if("customWebServer"in t){a.customWebServer=t.customWebServer;const e=$("#web-server-mode-switch");this.#n(e,e.prop.bind(e,"checked"),t.customWebServer,"/api/projects/save_web_server_mode","customWebServer","serverMode")}if("customWebServerPort"in t){a.customWebServerPort=t.customWebServerPort;const e=$("#custom-web-server-port-input");this.#n(e,e.val.bind(e),t.customWebServerPort,"/api/projects/save_web_server_port","customWebServerPort","port")}if("runInShell"in t){a.runInShell=t.runInShell;const e=$("#run-shell-mode-switch");this.#n(e,e.prop.bind(e,"checked"),t.runInShell,"/api/projects/save_run_shell_mode","runInShell","shellMode")}if("requiresAiApiKeys"in t){a.useAiApiKeys=t.requiresAiApiKeys;const e=$("#requires-ai-api-key");this.#n(e,e.prop.bind(e,"checked"),t.requiresAiApiKeys,"/api/projects/save_requires_ai_api_key","useAiApiKeys","enabled")}const l=new s;this.#e=a,$("#custom-web-server-port-input").prop("disabled",!this.#e.customWebServer),this.registerChangeHandler(((e,t)=>{e.customWebServer!==t.customWebServer&&$("#custom-web-server-port-input").prop("disabled",!e.customWebServer)}));for(const e of this.changeHandlers)e(this.#e,l)}get config(){return this.#e}async shouldUseAiApiKeys(){return new Promise((e=>{this.askAiApiKeyPermission&&this.#e.useAiApiKeys?function(e,t,n){0===$("#ai-key-risk-modal").length&&$("body").append('\n<div class="modal fade" id="ai-key-risk-modal" tabindex="-1" aria-labelledby="aiKeyRiskModalLabel" aria-hidden="true" data-bs-backdrop="static">\n    <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title" id="aiKeyRiskModalLabel">Pad may need AI API Keys</h5>\n            </div>\n            <div class="modal-body">\n                <div class="ai-key-risk-logged-in">\n                    <div class="alert alert-danger" role="alert">\n                        <strong>Security Risk:</strong><br />\n                        <div>This pad may need access to your AI API keys (which you can set in <a href="/settings">Account Settings</a>). You will incur all charges for any AI API calls. Only provide keys to pads you fully trust.</div>\n                    </div>\n                    <p>If confirmed, it will save your preference until you log back in.</p>\n                </div>\n                <div class="ai-key-risk-logged-out">\n                    <div class="alert alert-danger" role="alert">\n                        <strong>Security Risk:</strong><br />\n                        <div>This pad may need access to your AI API keys. To provide keys, you\'ll need to <a id="ai-key-risk-create-account" href="javascript:">create an account.</a></div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="ai-key-risk-logged-in btn btn-danger" id="ai-key-risk-confirm">Provide keys</button>\n                <button type="button" class="btn btn-secondary" id="ai-key-risk-cancel" data-bs-dismiss="modal">Run without keys</button>\n            </div>\n        </div>\n    </div>\n</div>\n');let s=!1;if(e){const e=`aiKeyRiskConfirmed_${t}`;if("true"===sessionStorage.getItem(e))return void n(!0);$("#ai-key-risk-confirm").off("click").on("click",(()=>{sessionStorage.setItem(e,"true"),s=!0,r.hide()})),$(".ai-key-risk-logged-in").show(),$(".ai-key-risk-logged-out").hide()}else $("#ai-key-risk-create-account").off("click").on("click",(()=>{(0,i.f)("Create an account to use AI API keys")})),$(".ai-key-risk-logged-in").hide(),$(".ai-key-risk-logged-out").show();document.querySelectorAll(".modal").forEach((e=>{bootstrap.Modal.getOrCreateInstance(e).hide()}));const o=$("#ai-key-risk-modal"),r=bootstrap.Modal.getOrCreateInstance(o[0]);r.show(),o.off("hidden.bs.modal").on("hidden.bs.modal",(()=>{n(s)}))}(this.loggedIn,this.projectData.id,(t=>{e(!!t&&this.#e.useAiApiKeys)})):e(this.#e.useAiApiKeys)}))}registerChangeHandler(e){this.changeHandlers.push(e)}removeChangeHandler(e){const t=this.changeHandlers.indexOf(e);t>=0&&this.changeHandlers.splice(t,1)}#n(e,t,n,i,s,o){e.length>0&&(e.parent().parent().show(),t()!==n&&(t(n),e.trigger("change",!0)),e.on("change",(()=>{const n=t();if(e[0]&&e[0].checkValidity&&!e[0].checkValidity())e[0].reportValidity();else if(this.#t(s,n),this.saveSettings){const e={projectId:this.projectData.id};e[o]=n,$.ajax({method:"POST",url:i,contentType:"application/json",data:JSON.stringify(e),error:function(e,t){alert(t+" "+e.responseText)}})}})))}#t(e,t){const n=new s(this.#e);n[e]=t;const i=this.#e;this.#e=n;for(const e of this.changeHandlers)e(this.#e,i)}}},23224:(e,t,n)=>{n.d(t,{z:()=>s}),n(18111),n(7588);var i=n(9453);function s(e){0==$("#duplicate-pad-dialog").length&&$("body").append('\n<div class="modal fade" id="duplicate-pad-dialog" tabindex="-1" role="dialog" aria-labelledby="duplicate-pad-dialog-title" aria-hidden="true">\n    <div class="modal-dialog modal-dialog-centered" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 id="duplicate-pad-dialog-title" class="modal-title">Duplicate Pad</h4>\n                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n                <div class="alert alert-danger" role="alert" id="duplicate-unverified-project-limit-msg" style="display: none">\n                    Verify your email address to create more than 5 pads.\n                </div>\n\n                Are you sure you want to duplicate this pad?\n            </div>\n            <div class="modal-footer">\n                <button id="confirm-duplicate-pad" type="button" class="btn btn-primary">Duplicate</button>\n                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>\n            </div>\n        </div>\n    </div>\n</div>'),document.querySelectorAll(".modal").forEach((e=>{bootstrap.Modal.getOrCreateInstance(e).hide()})),bootstrap.Modal.getOrCreateInstance("#duplicate-pad-dialog").show(),$("#confirm-duplicate-pad").off("click"),$("#confirm-duplicate-pad").click((()=>{location.href="/api/projects/duplicate_pad/"+e.id})),(0,i.l)((e=>{e&&($("#confirm-duplicate-pad").prop("disabled",!0),$("#duplicate-unverified-project-limit-msg").show())}))}},25221:(e,t,n)=>{n(18111),n(20116),n(14603),n(47566),n(98721),n(40656),n(7588);var i=n(23224),s=n(9453);class o{static get FIT(){return 0}static get STRETCH(){return 1}static get FILL(){return 2}}class r extends HTMLElement{connectedCallback(){const e=$("#details-form-template")[0].content;this.appendChild(e.cloneNode(!0)),this.find=e=>$(this).find(e);const t=this.find(".change-details-footer");$(this).children(":not(.change-details-form)").prependTo(t),this.currentProjectData=null,this.selectedThumbnail=null,this.newCustomThumbnail=null,this.find(".duplicate-pad-btn").click((()=>{(0,i.z)(this.currentProjectData)})),this.find(".download-pad-btn").click((()=>{location.href="/api/vfs/download?projectId="+this.currentProjectData.id})),this.find(".delete-project-link").click((()=>{var e;e=this.currentProjectData,0==$("#delete-project").length&&$("body").append('\n<div class="modal fade" id="delete-project" tabindex="-1" role="dialog">\n    <div class="modal-dialog modal-dialog-centered" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h4 class="modal-title">Delete Pad</h4>\n                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n                <p>Are you sure you want to delete <b id="project-name-bold"></b>? This is permanent and everything inside it will be completely gone.</p>\n            </div>\n            <div class="modal-footer">\n                <button class="btn btn-danger" id="project-delete-button" data-bs-dismiss="modal">Delete</button>\n                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>\n            </div>\n        </div>\n    </div>\n</div>'),document.querySelectorAll(".modal").forEach((e=>{bootstrap.Modal.getOrCreateInstance(e).hide()})),bootstrap.Modal.getOrCreateInstance("#delete-project").show(),$("#project-name-bold").text(e.name),$("#project-delete-button").off("click"),$("#project-delete-button").click((function(){$.ajax({method:"POST",url:"/api/projects/delete_project",data:{projectId:e.id},dataType:"text",success:function(){e.triggerDeleteEvent()},error:function(e,t){0!==e.readyState&&alert(t)}})}))}));const n=()=>{!function(e){const t=$("#upload-thumbnail-dialog");bootstrap.Modal.getOrCreateInstance(t[0]).show();let n=o.FIT,i=null;const s=()=>{const e=$("#thumbnail-modal-preview");i?(e.show(),e[0].src=URL.createObjectURL(i),$("#thumbnail-modal-image-options").show(),a(e,n)):(e.hide(),$("#thumbnail-modal-image-options").hide())};s(),$("#thumbnail-fit-select").off("input"),$("#thumbnail-fit-select").on("input",(e=>{"fit"==e.currentTarget.value?n=o.FIT:"stretch"==e.currentTarget.value?n=o.STRETCH:"fill"==e.currentTarget.value&&(n=o.FILL),a($("#thumbnail-modal-preview"),n)}));const r=$("#thumbnail-modal-input");r.val(""),r.off("change"),r.on("change",(()=>{i=r[0].files[0],s()})),$("#thumbnail-modal-upload-btn").off("click"),$("#thumbnail-modal-upload-btn").click((()=>{r.click()})),$("#confirm-upload-thumbnail").off("click"),$("#confirm-upload-thumbnail").click((()=>{i&&e({image:i,fit:n})})),t.off("hidden.bs.modal"),t.on("hidden.bs.modal",(()=>{e(null)}))}((e=>{if(null!=e){this.newCustomThumbnail=e;const t=this.find(".custom-thumbnail-preview");this.find(".custom-thumbnail-placeholder").hide(),t.show();const n=t.find("img");n[0].src=URL.createObjectURL(e.image),a(n,e.fit),this.selectThumbnail(t[0])}}))};this.find(".swap-thumbnail-btn").click(n),this.find(".custom-thumbnail-placeholder").click(n),this.find(".custom-thumbnail-preview").on("mouseover",(()=>{this.find(".swap-thumbnail-btn").css("display","inline-block")})).on("mouseleave",(()=>{this.find(".swap-thumbnail-btn").hide()})),this.find(".custom-thumbnail-preview").click((e=>{this.selectThumbnail(e.currentTarget)})),this.find(".default-thumbnail").click((e=>{this.selectThumbnail(e.currentTarget)})),this.find(".change-details-form").on("input",(()=>{this.setFooterBtnsDisabled(!1)})),this.find(".change-details-form").submit((e=>{e.stopPropagation(),e.preventDefault(),this.saveSettings()}))}initializeForm(e){if(this.find(".change-details-share-settings")[0].initializeSettings(e),this.find(".unverified-project-limit-msg").hide(),(0,s.l)((e=>{e&&(this.find(".duplicate-pad-btn").toggleClass("disabled",e),this.find(".unverified-project-limit-msg").show(),this.find(".limit-number").text("5 pads"))})),void 0===e&&(e=this.currentProjectData),e.ownerName){const t=e=>{let t='<a class="norefreshlink" href="/mypads"><b>My Pads</b></a>';for(const n of e)t+=` > <a class="norefreshlink" href="/mypads/group/${n.id}"><b>${n.name}</b></a>`;this.find(".group-path-display").html(t)};e.parentPath?t(e.parentPath):e.parentId?fetch("/api/groups/get_path/"+e.parentId).then((n=>{n.ok&&n.json().then((n=>{e.parentPath=n,t(n)}))})):(e.parentPath=[],t([]))}else this.find(".group-path-display").html('<span class="text-secondary">Anonymous Pads</span>');if(e){this.currentProjectData=e,this.setFooterBtnsDisabled(!0),"Untitled"!=e.name?this.find(".change-details-proj-name").val(e.name):this.find(".change-details-proj-name").val(""),this.find(".change-details-description").val(e.description),this.newCustomThumbnail=null;const t=this.find(".custom-thumbnail-preview");if("custom"==e.thumbnail)this.find(".custom-thumbnail-placeholder").hide(),t.show(),t.find("img").attr("src",`/thumbnail/${e.id}?t=${(new Date).getTime()}`),this.selectThumbnail(t[0]);else{this.find(".custom-thumbnail-placeholder").show(),t.hide();let n=this.find(".thumbnail-list").find(`[data-thumbnail="${e.thumbnail}"]`);0==n.length&&(n=this.find(".default-thumbnail").first()),this.selectThumbnail(n[0])}}}haveSettingsChanged(){let e=!1;const t=this.find(".change-details-proj-name").val();return"Untitled"==this.currentProjectData.name?e||=""!=t&&"Untitled"!=t:e||=t!=this.currentProjectData.name,e||=this.find(".change-details-description").val()!=this.currentProjectData.description,e||=this.selectedThumbnail!=this.currentProjectData.thumbnail,"custom"==this.selectedThumbnail&&(e||=null!=this.newCustomThumbnail),e}async saveSettings(){if(this.setFooterBtnsDisabled(!0),this.find(".details-saved-msg").stop(!0,!0),this.find(".details-saving-msg").show(),await this.find(".change-details-share-settings")[0].saveSettings(),this.haveSettingsChanged()){const e=new FormData(this.find(".change-details-form")[0]);e.append("projectId",this.currentProjectData.id),"custom"==this.selectedThumbnail?this.newCustomThumbnail&&(e.append("thumbnail",this.newCustomThumbnail.image),e.append("thumbnailFitMode",this.newCustomThumbnail.fit)):e.append("defaultthumbnail",this.selectedThumbnail);const t=await fetch("/api/projects/change_details",{method:"POST",body:e});if(t.ok){let e=this.find(".change-details-proj-name").val();""==e&&(e="Untitled"),this.currentProjectData.name=e,this.currentProjectData.description=this.find(".change-details-description").val(),"custom"==this.selectedThumbnail&&"custom"==this.currentProjectData.thumbnail&&this.newCustomThumbnail?this.currentProjectData.forceThumbnailChange():this.currentProjectData.thumbnail=this.selectedThumbnail}else{const e=await t.text();alert(`Can't save project details: ${t.status}\n${e}`)}}this.find(".details-saving-msg").hide(),this.find(".details-saved-msg").show().fadeOut(2e3)}selectThumbnail(e){this.find(".selected-thumbnail").removeClass("selected-thumbnail"),e.classList.add("selected-thumbnail"),this.selectedThumbnail=e.dataset.thumbnail,(this.selectedThumbnail!=this.currentProjectData.thumbnail||this.newCustomThumbnail)&&this.setFooterBtnsDisabled(!1)}setFooterBtnsDisabled(e){e?this.find(".change-details-footer").children("[data-dynamically-disable]").attr("disabled",""):this.find(".change-details-footer").children("[data-dynamically-disable]").removeAttr("disabled")}}function a(e,t){t==o.FIT?e.css("object-fit","contain"):t==o.STRETCH?e.css("object-fit","fill"):t==o.FILL&&e.css("object-fit","cover")}customElements.define("project-details-form",r)},47721:(e,t,n)=>{function i(e){const t=e.match(/\.([0-9a-z]+)$/);return null==t?"":t[1]}function s(e){const t=e.lastIndexOf("/");return t>=0?e.substring(t+1):e}function o(e){return["html","css","js","php","py","java","txt","yaml","sh","json"].includes(e)?e:["png","jpg","jpeg","jfif","pjpeg","pjp","svg","tif","tiff","webp","apng","bmp","ico","cur","gif"].includes(e)?"img":["mp3","ogg","wav","wma"].includes(e)?"audio":["mp4","mov","m4v","avi","wmv"].includes(e)?"video":"lol"==e?"lol":["zip","rar","7z","tar"].includes(e)?"zip":"file"}function r(e,t){const n=e.lastIndexOf("/");return n>=0&&t>3&&n+1>t&&(e="..."+e.substring(n-t+4)),e}function a(e,t){for(const n of e)if(!n.isDir&&n.path===t||n.isDir&&t.startsWith(n.path+"/"))return!0;return!1}function l(e){const t=document.createElement("a");t.href=e,t.className="norefreshlink",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}n.d(t,{JJ:()=>a,a:()=>o,am:()=>r,hA:()=>s,oo:()=>l,uQ:()=>i})},78108:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(96540),s=n(19388),o=n(88387);class r{constructor(e,t,i,o){this.connectionNum=e,this.outputDiv=t,this.onDisconnect=i,this.onerror=o,this.mouse=null,this.keyboard=null,this.oldClipboard=null;let r="";this.initialDataHandler=e=>{r+=e},s.registerEventHandler("GUI:GUAC_INSTRUCTION"+this.connectionNum,this.initialDataHandler),async function(){const e=await n.e(1026).then(n.bind(n,21026));return e.WSPipelineTunnel=function(t,n,i){var s=this,o=null,r=null,a=null;function l(){window.clearTimeout(o),window.clearTimeout(r),s.state===e.Tunnel.State.UNSTABLE&&s.setState(e.Tunnel.State.OPEN),o=window.setTimeout((function(){c(new e.Status(e.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))}),s.receiveTimeout),r=window.setTimeout((function(){s.setState(e.Tunnel.State.UNSTABLE)}),s.unstableThreshold)}function c(i){window.clearTimeout(o),window.clearTimeout(r),window.clearInterval(a),s.state!==e.Tunnel.State.CLOSED&&(i.code!==e.Status.Code.SUCCESS&&s.onerror&&s.onerror(i),s.setState(e.Tunnel.State.CLOSED),t.sendMessage("GUI:DISCONNECT",n),t.removeEventHandler("GUI:GUAC_INSTRUCTION"+n,u))}function u(t){l();var n,i=t,o=0,r=[];do{var a=i.indexOf(".",o);-1!==a?n=(o=a+1)+parseInt(i.substring(n+1,a)):c(new e.Status(e.Status.Code.SERVER_ERROR,"Incomplete instruction."));var u=i.substring(o,n),d=i.substring(n,n+1);if(r.push(u),";"===d){var h=r.shift();null===s.uuid&&(h===e.Tunnel.INTERNAL_DATA_OPCODE&&s.setUUID(r[0]),s.setState(e.Tunnel.State.OPEN)),h!==e.Tunnel.INTERNAL_DATA_OPCODE&&s.oninstruction&&s.oninstruction(h,r),r.length=0}o=n+1}while(o<i.length)}this.sendMessage=function(){if(s.isConnected()&&0!==arguments.length){for(var e=o(arguments[0]),i=1;i<arguments.length;i++)e+=","+o(arguments[i]);e+=";",t.sendMessage("GUI:GUAC_INSTRUCTION",n,e)}function o(e){var t=new String(e);return t.length+"."+t}},this.connect=function(){l(),s.setState(e.Tunnel.State.CONNECTING),l(),a=setInterval((function(){s.sendMessage(e.Tunnel.INTERNAL_DATA_OPCODE,"ping",(new Date).getTime())}),500),t.registerEventHandler("GUI:GUAC_INSTRUCTION"+n,u),i&&u(i)},this.disconnect=function(){c(new e.Status(e.Status.Code.SUCCESS,"Manually closed."))}},e.WSPipelineTunnel.prototype=new e.Tunnel,e}().then((e=>{this.guacamole=e,this.connectionNum>=0&&(s.removeEventHandler("GUI:GUAC_INSTRUCTION"+this.connectionNum,this.initialDataHandler),this.connect(r))})),this.mouseDown=()=>{this.guac.getDisplay().getDefaultLayer().getCanvas().blur()}}connect(e){const t=new this.guacamole.WSPipelineTunnel(s,this.connectionNum,e);t.onstatechange=e=>{e==this.guacamole.Tunnel.State.CLOSED?this.disconnect():this.guacamole.Tunnel.State.OPEN},this.guac=new this.guacamole.Client(t),this.outputDiv.innerHTML="",this.outputDiv.appendChild(this.guac.getDisplay().getElement()),this.guac.onerror=e=>{this.onerror(e.code,e.message)},this.guac.connect();const n=this.guac.getDisplay().getDefaultLayer().getCanvas();n.tabIndex=-1,this.mouse=new this.guacamole.Mouse(this.guac.getDisplay().getElement(),n),this.mouse.onmousemove=e=>{document.activeElement==n&&this.guac.sendMouseState(e)};let i=[];this.guac.getDisplay().getElement().addEventListener("mousedown",(e=>{i=[e.clientX,e.clientY]})),this.mouse.onmousedown=e=>{$(n).is(":focus")?this.guac.sendMouseState(e):setTimeout((()=>{e.fromClientPosition(this.guac.getDisplay().getElement(),i[0],i[1]),this.guac.sendMouseState(e)}),0),n.focus()},this.mouse.onmouseup=e=>{this.guac.sendMouseState(e)},n.focus(),document.addEventListener("mousedown",this.mouseDown),this.keyboard=new this.guacamole.Keyboard(n),this.keyboard.onkeydown=e=>{this.guac.sendKeyEvent(1,e)},this.keyboard.onkeyup=e=>{this.guac.sendKeyEvent(0,e)}}updateClipboardContent(){null!=navigator.clipboard&&"function"==typeof navigator.clipboard.readText&&navigator.clipboard.readText().then((e=>{null==e||this.oldClipboard&&e==this.oldClipboard||(this.oldClipboard=e,this.sendNewClipboard(e))}))}sendNewClipboard(e){const t=this.guac.createClipboardStream("text/plain");t.sendBlob(btoa(e)),t.sendEnd()}disconnect(){if(this.connectionNum>=0){const e=this.connectionNum;this.connectionNum=-1,this.guac?(this.guac.disconnect(),this.guac=null,this.mouse.onmousedown=this.mouse.onmouseup=this.mouse.onmousemove=null,this.keyboard.reset(),this.keyboard.onkeydown=this.keyboard.onkeyup=null,document.removeEventListener("mousedown",this.mouseDown),this.oldClipboard=null):(s.removeEventHandler("GUI:GUAC_INSTRUCTION"+this.connectionNum,this.initialDataHandler),s.sendMessage("GUI:DISCONNECT",e)),this.onDisconnect&&this.onDisconnect()}}}const a=(0,i.memo)((function({onTitleChange:e,onRunStateChange:t,ref:n}){const[a,l]=(0,i.useState)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null),d=(0,i.useRef)(!1),h=(0,i.useRef)(!1),p=(0,o.Vo)(e),m=(0,o.Vo)(t),f=(0,i.useCallback)((()=>{h.current||(h.current=!0,l(null),s.sendMessage("GUI:CONNECT",(e=>{if(d.current)return h.current=!1,void s.sendMessage("GUI:DISCONNECT",e);p.current("GUI - running"),m.current(!0),u.current=new r(e,c.current,(()=>{u.current=null,h.current=!1,p.current("GUI - stopped"),m.current(!1)}),((e,t)=>{l({code:e,message:t})}))})))}),[p,m]);return(0,i.useImperativeHandle)(n,(()=>({restartGUI:f,stopGUI:()=>{u.current&&u.current.disconnect()}})),[f]),(0,i.useEffect)((()=>{let e=()=>{s.removeReadyHandler(e),e=null,f()};s.registerReadyHandler(e);const t=()=>{u.current&&u.current.disconnect()};return s.registerDisconnectHandler(t),()=>{d.current=!0,u.current&&u.current.disconnect(),e&&s.removeReadyHandler(e),s.removeDisconnectHandler(t)}}),[f]),i.createElement(i.Fragment,null,a?i.createElement("div",{className:"text-danger m-2"},i.createElement("h4",null,"Uh oh, can't connect to GUI"),i.createElement("div",null,"Code: ",a.code),i.createElement("div",null,"Reason: ",a.message)):null,i.createElement("div",{style:{position:"relative",zIndex:0,width:"100%",height:"100%",overflow:"auto"},ref:c}))}))},79445:(e,t,n)=>{n.d(t,{t:()=>s,z:()=>r});var i=n(96540);const s=Object.freeze({CHOOSING:0,CONSOLE:1,SHELL:2,WEB_PAGE:3,GUI:4,TESTS:5}),o=(0,i.memo)((function({hide:e,onClick:t,children:n}){const s=(0,i.useRef)(null),o=(0,i.useRef)(!0);return(0,i.useLayoutEffect)((()=>{!e||$(s.current).is(":visible")&&!o.current?e||(s.current.style.display=""):s.current.style.display="none",o.current=!1,e?s.current.classList.add("visibility-hidden"):setTimeout((()=>{s.current&&s.current.classList.remove("visibility-hidden")}),100)}),[e]),i.createElement("button",{className:"choose-output-btn btn btn-outline-secondary transition-visibility",role:"button",onClick:()=>{e||t()},onTransitionEnd:t=>{"visibility"===t.propertyName&&e&&(s.current.style.display="none")},ref:s},n)})),r=(0,i.memo)((function({onChoseType:e,hideTabData:t}){return i.createElement("div",{className:"d-flex h-100 w-100 overflow-auto"},i.createElement("div",{className:"choose-output-container my-auto w-100"},i.createElement(o,{hide:t[s.CONSOLE],onClick:()=>{e(s.CONSOLE)}},i.createElement("i",{className:"p-1 fa-solid fa-align-left",style:{fontSize:"35px",border:"5px solid",borderRadius:"8px"}}),i.createElement("br",null),i.createElement("span",{style:{position:"relative",top:"10px"}},"Console")),i.createElement(o,{hide:t[s.SHELL],onClick:()=>{e(s.SHELL)}},i.createElement("img",{src:"/static/images/icons/output_shell.png",width:64}),i.createElement("br",null),i.createElement("span",{style:{position:"relative",top:"3px"}},"Shell")),i.createElement(o,{hide:t[s.WEB_PAGE],onClick:()=>{e(s.WEB_PAGE)}},i.createElement("img",{src:"/static/images/icons/webpage.png",width:64}),i.createElement("br",null),i.createElement("span",{style:{position:"relative",top:"5px"}},"Web Page")),i.createElement(o,{hide:t[s.GUI],onClick:()=>{e(s.GUI)}},i.createElement("i",{className:"fa-solid fa-display",style:{fontSize:"50px"}}),i.createElement("br",null),i.createElement("span",{style:{position:"relative",top:"12px"}},"GUI")),i.createElement(o,{hide:t[s.TESTS],onClick:()=>{e(s.TESTS)}},i.createElement("i",{className:"fa-solid fa-clipboard-check",style:{fontSize:"50px"}}),i.createElement("br",null),i.createElement("span",{style:{position:"relative",top:"12px"}},"Test Cases"))))}))},87514:(e,t,n)=>{n.d(t,{M:()=>p,V:()=>m}),n(44114),n(16573),n(78100),n(77936),n(18111),n(7588),n(37467),n(44732),n(79577);var i=n(19388);function s(e,t,n){var i=t,s=n,o=s.currentTime,r=e,a=1===i.bytesPerSample?window.Int8Array:window.Int16Array,l=1===i.bytesPerSample?128:32768,c=[];r.ondata=function(e){!function(e){c.push(new a(e))}(new a(e));var t=s.currentTime;let n=0;for(const e of c)n+=Math.floor(e.length/i.channels)/i.rate;if(!(o<t&&n<.2||o>=t&&n<.03)){var r=function(){var e=function(e){if(e.length<=1)return e[0];var t=0;e.forEach((function(e){t+=e.length}));var n=0,i=new a(t);return e.forEach((function(e){i.set(e,n),n+=e.length})),i}(c);return e?(c=function(e){for(var t=Number.MAX_VALUE,n=e.length,s=Math.floor(e.length/i.channels),o=Math.floor(.02*i.rate),r=Math.max(i.channels*o,i.channels*(s-o));r<e.length;r+=i.channels){for(var l=0,c=0;c<i.channels;c++)l+=Math.abs(e[r+c]);l<=t&&(n=r+i.channels,t=l)}return n===e.length?[e]:[new a(e.buffer.slice(0,n*i.bytesPerSample)),new a(e.buffer.slice(n*i.bytesPerSample))]}(e),e=c.shift()):null}();if(r){o<t&&(o=t);var u=s.createBufferSource();u.connect(s.destination),u.start||(u.start=u.noteOn),u.buffer=function(e){var t=e.length/i.channels,n=s.currentTime;o<n&&(o=n);for(var r=s.createBuffer(i.channels,t,i.rate),a=0;a<i.channels;a++)for(var c=r.getChannelData(a),u=a,d=0;d<t;d++)c[d]=e[u]/l,u+=i.channels;return r}(r),u.start(o),o+=r.length/i.channels/i.rate}}},this.sync=function(){var e=s.currentTime;o=Math.min(o,e+1)},this.emptyBuffer=function(){c=[]}}let o=!1,r=!1,a={ondata:null},l=null,c=null;function u(){r=!0,o&&f()}function d(){r=!1}function h(e){c&&a.ondata&&(c.sync(),a.ondata(e))}function p(){i.registerReadyHandler(u),i.registerDisconnectHandler(d),i.registerEventHandler("AUDIO",h)}function m(){i.removeReadyHandler(u),i.removeDisconnectHandler(d),i.removeEventHandler("AUDIO",h),r=!1,c&&i.sendMessage("AUDIO:END_STREAM"),a={ondata:null},c=null}function f(){if(c)c.emptyBuffer();else{if(!l){let e=window.AudioContext||window.webkitAudioContext;e&&(l=new e)}c=new s(a,{bytesPerSample:2,channels:2,rate:22050},l)}i.sendMessage("AUDIO:START_STREAM")}document.addEventListener("click",(function e(){o=!0,document.removeEventListener("click",e),r&&f()}))},88387:(e,t,n)=>{n.d(t,{Dx:()=>c,O2:()=>a,Vo:()=>o,jq:()=>u,uc:()=>l});var i=n(96540);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(null,arguments)}function o(e){const t=(0,i.useRef)(e);return(0,i.useEffect)((()=>{t.current=e}),[e]),t}const r=bootstrap.Tooltip.prototype._queueCallback;bootstrap.Tooltip.prototype._queueCallback=function(e,t,n=!0){r(((...t)=>{this._element&&e(...t)}),t,n)};const a=(0,i.memo)((function({tag:e,children:t,ref:n,...o}){const r=(0,i.useRef)(null),[a,l]=(0,i.useState)(null),c=(0,i.useRef)([]);(0,i.useEffect)((()=>{const e=new bootstrap.Tooltip(r.current);return l(e),()=>{e.dispose()}}),[]),(0,i.useEffect)((()=>{if(a){for(const[e,t]of c.current)a[e](...t);c.current=[]}}),[a]),(0,i.useImperativeHandle)(n,(()=>a||new Proxy({},{get:(e,t)=>(...e)=>{c.current.push([t,e])}})),[a]);const u=e;return i.createElement(u,s({},o,{ref:r}),t)})),l=(0,i.memo)((function({disabled:e,onSubmit:t,extraBtn:n=null,ref:s}){const[o,r]=(0,i.useState)(""),a=(0,i.useRef)(null),l=()=>{a.current&&(a.current.style.height="inherit",a.current.style.height=`${a.current.scrollHeight+2}px`)};(0,i.useImperativeHandle)(s,(()=>({setValue:e=>{r(e)}}))),(0,i.useEffect)((()=>{let e=-1;const t=new ResizeObserver((t=>{const n=t[0].contentRect.width;e!==n&&(l(),e=n)}));return t.observe(a.current),()=>{t.disconnect()}}),[]),(0,i.useEffect)((()=>{l()}),[o]);const c=()=>{o.trim()&&t(o.trim()),r("")};return i.createElement("div",{className:"input-group textarea-container px-2"},i.createElement("textarea",{className:"form-control",rows:"1",maxLength:"2048",onKeyDown:e=>{e.shiftKey||"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),c())},disabled:e,ref:a,value:o,onChange:e=>{r(e.target.value)}}),n,i.createElement("button",{type:"submit",className:"btn btn-success",onClick:()=>{c()},disabled:e},i.createElement("i",{className:"fa-solid fa-paper-plane"})))})),c=(0,i.createContext)("light"),u=(0,i.createContext)({family:"monospace",size:12})}}]);