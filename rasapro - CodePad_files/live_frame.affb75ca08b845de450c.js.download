"use strict";(self.webpackChunkcodepad=self.webpackChunkcodepad||[]).push([[6519],{86089:(e,t,o)=>{o.r(t),o.d(t,{pageStartup:()=>w}),o(44114),o(18111),o(7588),o(14603),o(47566),o(98721);var n=o(37291);let l=null,c="Load index page";function a(e){e.data.theme&&m("dark"===e.data.theme),e.data.newUrl?p(location.protocol+"//"+location.host+e.data.newUrl):e.data.refresh&&g(),e.data.runBtnTooltip&&(c=e.data.runBtnTooltip)}const s=[];let i=0;const r=$("#livecode")[0];let d="about:blank",u=!1;function p(e){if(""===e&&(e="about:blank"),d=e,l&&l.postMessage({newUrl:d}),r){const t=e.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i),o=t&&t[1];let n=o===location.host;if(!n&&o&&location.host){const e=location.host.split(".");if(e.length>=2){const t=e[0],l=e.slice(1).join(".");n=new RegExp(`^${t}(?:-\\d+)?\\.${l.replace(/\./g,"\\.")}$`).test(o)}}o&&!n&&(u=!0,$("#url-input").val(e),$("#open-tab-alert").text("open"),$("#iframe-error").css("display","")),r.src=e}}function m(e){const t=document.querySelector("html");e?t.setAttribute("data-bs-theme","dark"):t.removeAttribute("data-bs-theme")}function g(){r.contentDocument&&r.contentWindow.location.reload()}function h(){"about:blank"===d?window.open(location.protocol+"//"+location.host):window.open(d)}function f(){$("#iframe-error").css("display","none")}function w(){window.addEventListener("message",(e=>{"CODEPAD:PORT"===e.data&&e.ports&&(l=e.ports[0],l.onmessage=a)}));const e=new URLSearchParams(window.location.search);e.get("hide-dev-tools")?($("#url-bar").hide(),$("#console-split").hide(),$("#iframe-split").css("height","100%")):(0,n.A)(["#iframe-split","#console-split"],{direction:"vertical",sizes:[70,30],minSize:0,cursor:"ns-resize"}),"dark"===e.get("theme")&&m(!0),$(document.body).show(),$("#console-input").on("keydown",(e=>{!function(e){const t=$("#console-input")[0];if("Enter"==e.key){if(!t.value)return;i=0,t.value!=s[s.length-1]&&s.push(t.value);try{const e=document.createElement("pre");e.innerText="> "+t.value,e.classList.add("console-text"),document.getElementById("logs").appendChild(e),document.getElementById("logs").scrollTop=document.getElementById("logs").scrollHeight,$("#livecode")[0].contentWindow.console.log($("#livecode")[0].contentWindow.eval(t.value))}catch(e){const t=document.createElement("pre");t.innerText=e,t.classList.add("console-text","text-danger");const o=document.createElement("i");o.classList.add("fa-solid","fa-times","me-2"),t.prepend(o),document.getElementById("logs").appendChild(t),document.getElementById("logs").scrollTop=document.getElementById("logs").scrollHeight}t.value=""}else if("ArrowUp"==e.key){if(i==-s.length)return;i-=1,t.value=s[s.length+i],t.selectionStart=t.selectionEnd=t.value.length,e.stopPropagation(),e.preventDefault()}else if("ArrowDown"==e.key){if(0===i)return;-1==i?(i++,t.value=""):(i++,t.value=s[s.length+i],t.selectionStart=t.selectionEnd=t.value.length,e.stopPropagation(),e.preventDefault())}}(e)})),document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((e=>{new bootstrap.Tooltip(e,{fallbackPlacements:["bottom"]})})),$("#hide-iframe-warning").click(f),$("#open-tab-alert").click(h),$("#open-new-tab").click(h);const t=$("#run-livecode"),o=bootstrap.Tooltip.getInstance(t[0]);t[0].addEventListener("show.bs.tooltip",(()=>{o.setContent({".tooltip-inner":c})})),t.on("click",(()=>{o.hide(),l&&l.postMessage({runBtnClicked:!0})})),$("#refresh-livecode").on("click",g);const w=$("#url-input");w.val(location.protocol+"//"+location.host+"/"),w.focus((e=>{"about:blank"===r.src&&e.currentTarget.select()})),w.on("keyup",(e=>{"Enter"===e.key&&(p(w.val()),e.currentTarget.blur())}));const v=e=>{const t=document.getElementById("logs");let o=!1;t.scrollHeight-t.scrollTop-t.clientHeight<8&&(o=!0);const n=document.createElement("pre");n.innerText=e,n.classList.add("console-text"),t.appendChild(n),o&&(t.scrollTop=t.scrollHeight),console.log(e)},b=(e,t,o)=>{const n=document.createElement("pre");n.innerText=e,n.classList.add("console-text","text-danger");const l=document.createElement("i");l.classList.add("fa-solid","fa-times","me-2"),n.prepend(l);const c=document.createElement("div");return c.innerText="at "+t+":"+o,c.classList.add("ms-3","ps-1"),n.appendChild(c),document.getElementById("logs").appendChild(n),document.getElementById("logs").scrollTop=document.getElementById("logs").scrollHeight,!1},E=()=>{setTimeout((()=>{$("#logs").html(""),r.contentDocument?"about:blank"!==r.contentWindow.location.href&&(r.contentWindow.console.log=v,r.contentWindow.onerror=b):u||(u=!0,$("#url-input").val(""),$("#open-tab-alert").text("open the previous page"),$("#iframe-error").css("display",""))}),0)};r.addEventListener("load",(()=>{if(r.contentDocument){"about:blank"===r.contentWindow.location.href?$("#url-input").val(location.protocol+"//"+location.host+"/"):$("#url-input").val(r.contentWindow.location.href),r.contentWindow.addEventListener("unload",E),u&&(f(),u=!1,r.src=r.contentWindow.location.href),d=r.contentWindow.location.href;const e=r.contentDocument.title;l&&l.postMessage({title:e,newUrl:d})}})),p(d)}}},e=>{e.O(0,[5888,5933,5712],(()=>e(e.s=86089)));var t=e.O();window.LiveFrame=t}]);