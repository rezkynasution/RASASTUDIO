/*! For license information please see 710.aae7b4ac3d622c40ce6f.js.LICENSE.txt */
"use strict";(self.webpackChunkcodepad=self.webpackChunkcodepad||[]).push([[710],{9762:(e,t,n)=>{n.d(t,{h:()=>g});var i=n(96540),r=n(15036),o=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},s=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},a=function(){function e(e){this.provider=e}return e.prototype.getTreeItem=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.provider.getTreeItem(e)]}))}))},e.prototype.getTreeItems=function(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){return[2,this.provider.getTreeItems?this.provider.getTreeItems(e):Promise.all(e.map((function(e){return t.provider.getTreeItem(e)})))]}))}))},e.prototype.onChangeItemChildren=function(e,t){var n,i;return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,null===(i=(n=this.provider).onChangeItemChildren)||void 0===i?void 0:i.call(n,e,t)]}))}))},e.prototype.onDidChangeTreeData=function(e){return this.provider.onDidChangeTreeData?this.provider.onDidChangeTreeData(e):{dispose:function(){}}},e.prototype.onRenameItem=function(e,t){var n,i;return o(this,void 0,void 0,(function(){return s(this,(function(r){return[2,null===(i=(n=this.provider).onRenameItem)||void 0===i?void 0:i.call(n,e,t)]}))}))},e}(),l=n(75203),d=function(){return d=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)},c=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},u=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},h=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},g=i.forwardRef((function(e,t){var n,o=(0,i.useState)({}),s=o[0],g=o[1],m=(0,i.useState)(e.viewState),f=m[0],p=m[1],v=(0,l.K)(f),T=(0,i.useRef)([]),b=(0,i.useMemo)((function(){return new a(e.dataProvider)}),[e.dataProvider]),_=(n=(0,i.useRef)(!1),(0,i.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),n),E=(0,i.useCallback)((function(e){_.current&&g((function(t){return d(d({},t),e)}))}),[_]),I=(0,i.useCallback)((function(e,t){p((function(n){var i,r;return d(d({},n),((i={})[e]=d(d({},n[e]),t(null!==(r=n[e])&&void 0!==r?r:{})),i))}))}),[]);return(0,i.useEffect)((function(){var e=b.onDidChangeTreeData((function(e){b.getTreeItems(e).then((function(e){E(e.map((function(e){var t;return(t={})[e.index]=e,t})).reduce((function(e,t){return d(d({},e),t)}),{}))}))})).dispose;return e}),[b,E]),i.createElement(r._,d({},e,{ref:t,viewState:f,items:s,onExpandItem:function(t,n){var i;I(n,(function(e){var n;return d(d({},e),{expandedItems:h(h([],null!==(n=e.expandedItems)&&void 0!==n?n:[],!0),[t.index],!1)})})),null===(i=e.onExpandItem)||void 0===i||i.call(e,t,n)},onCollapseItem:function(t,n){var i;I(n,(function(e){var n;return d(d({},e),{expandedItems:null===(n=e.expandedItems)||void 0===n?void 0:n.filter((function(e){return e!==t.index}))})})),null===(i=e.onCollapseItem)||void 0===i||i.call(e,t,n)},onSelectItems:function(t,n){var i,r,o,s=null===(i=v.current[n])||void 0===i?void 0:i.focusedItem;if(e.disableMultiselect){var a=s?[s]:[];null===(r=e.onSelectItems)||void 0===r||r.call(e,a,n),I(n,(function(e){return d(d({},e),{selectedItems:a})}))}else null===(o=e.onSelectItems)||void 0===o||o.call(e,t,n),I(n,(function(e){return d(d({},e),{selectedItems:t})}))},onFocusItem:function(t,n){var i;I(n,(function(e){return d(d({},e),{focusedItem:t.index})})),null===(i=e.onFocusItem)||void 0===i||i.call(e,t,n)},onRenameItem:function(t,n,i){return c(void 0,void 0,void 0,(function(){var r,o,s;return u(this,(function(a){switch(a.label){case 0:return[4,b.onRenameItem(t,n)];case 1:return a.sent(),I(i,(function(e){return d(d({},e),{renamingItem:void 0})})),[4,b.getTreeItem(t.index)];case 2:return r=a.sent(),E(((o={})[t.index]=r,o)),null===(s=e.onRenameItem)||void 0===s||s.call(e,t,n,i),[2]}}))}))},onDrop:function(t,n){return c(void 0,void 0,void 0,(function(){var i,r,o,a,l,d,c,g,m,f,p,v,T,_,E;return u(this,(function(u){switch(u.label){case 0:for(i=[],r=t.map((function(e){return e.index})),o=0,a=function(e){var t=Object.values(s).find((function(t){var n,i;return null===(i=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n.includes)||void 0===i?void 0:i.call(n,e.index)}));if(!t)throw Error('Could not find parent of item "'.concat(e.index,'"'));if(!t.children)throw Error('Parent "'.concat(t.index,'" of item "').concat(e.index,'" did not have any children'));if("between-items"===n.targetType&&n.parentItem===e.index)return{value:void 0};if("item"!==n.targetType&&"root"!==n.targetType||n.targetItem===t.index||i.push(b.onChangeItemChildren(t.index,t.children.filter((function(t){return t!==e.index})))),"between-items"===n.targetType)if(n.parentItem===t.index){var r=s[n.parentItem],a=(null!==(v=(null!==(p=r.children)&&void 0!==p?p:[]).findIndex((function(t){return t===e.index})))&&void 0!==v?v:1/0)<n.childIndex;o+=a?1:0}else i.push(b.onChangeItemChildren(t.index,t.children.filter((function(t){return t!==e.index}))))},l=0,d=t;l<d.length;l++)if(c=d[l],"object"==typeof(g=a(c)))return[2,g.value];return"item"===n.targetType||"root"===n.targetType?i.push(b.onChangeItemChildren(n.targetItem,h(h([],(null!==(T=s[n.targetItem].children)&&void 0!==T?T:[]).filter((function(e){return!r.includes(e)})),!0),r,!0))):(m=s[n.parentItem],(f=h([],null!==(_=m.children)&&void 0!==_?_:[],!0).filter((function(e){return!r.includes(e)}))).splice.apply(f,h([n.childIndex-o,0],r,!1)),i.push(b.onChangeItemChildren(n.parentItem,f))),[4,Promise.all(i)];case 1:return u.sent(),null===(E=e.onDrop)||void 0===E||E.call(e,t,n),[2]}}))}))},onMissingItems:function(t){var n,i;0===T.current.length&&setTimeout((function(){b.getTreeItems(T.current).then((function(e){E(e.map((function(e){var t;return(t={})[null==e?void 0:e.index]=e,t})).reduce((function(e,t){return d(d({},e),t)}),{}))})),T.current=[]})),(n=T.current).push.apply(n,t),null===(i=e.onMissingItems)||void 0===i||i.call(e,t)}}),e.children)}))},13579:(e,t,n)=>{var i=n(46518),r=n(69565),o=n(72652),s=n(79306),a=n(28551),l=n(1767),d=n(9539),c=n(84549)("some",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:c},{some:function(e){a(this);try{s(e)}catch(e){d(this,"throw",e)}if(c)return r(c,this,e);var t=l(this),n=0;return o(t,(function(t,i){if(e(t,n++))return i()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},15036:(e,t,n)=>{n.d(t,{_:()=>p,f:()=>f});var i=n(96540),r=n(31930),o=n(91808),s=n(87138),a=n(60397),l=function(){return l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return!!e})).join(" ")},c=n(74675),u=n(75203),h=function(){return h=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},h.apply(this,arguments)},g=function(e){var t=e.onExpandItem,n=e.onCollapseItem,r=e.onDrop,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["onExpandItem","onCollapseItem","onDrop"]),s=(0,i.useState)({}),g=s[0],m=s[1],f=(0,i.useState)(),p=f[0],v=f[1],T=(0,i.useMemo)((function(){return Object.keys(g)}),[g]),b=o.onFocusItem,_=o.autoFocus,E=o.onRegisterTree,I=o.onUnregisterTree,w=o.items,y=o.viewState,O=(0,u.K)(b),x=(0,u.K)(y),R=(0,i.useMemo)((function(){return(0,a.D)(T,(function(e){var t;return(0,c.z)(g[e].rootItem,null!==(t=y[e])&&void 0!==t?t:{},w)}))}),[g,w,T,y]),A=(0,i.useCallback)((function(e,t,n){var i,r,o,s,l,d,c,u,h;if(void 0===n&&(n=!0),(null==_||_)&&n){var g=null!==(r=null===(i=(0,a.Y)())||void 0===i?void 0:i.querySelector('[data-rct-tree="'.concat(t,'"] [data-rct-item-id="').concat(e.index,'"]')))&&void 0!==r?r:null===(o=(0,a.Y)())||void 0===o?void 0:o.querySelector('[data-rct-tree="'.concat(t,'"] [data-rct-item-id]'));"true"!==(null===(d=null===(l=null===(s=(0,a.Y)())||void 0===s?void 0:s.activeElement)||void 0===l?void 0:l.attributes.getNamedItem("data-rct-search-input"))||void 0===d?void 0:d.value)?null===(c=null==g?void 0:g.focus)||void 0===c||c.call(g):function(e){var t,n,i,r;if(e)if(e.scrollIntoViewIfNeeded)e.scrollIntoViewIfNeeded();else{var o=e.getBoundingClientRect();o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||!!(null===(n=null===(t=(0,a.Y)())||void 0===t?void 0:t.documentElement)||void 0===n?void 0:n.clientHeight))&&o.right<=(window.innerWidth||!!(null===(r=null===(i=(0,a.Y)())||void 0===i?void 0:i.documentElement)||void 0===r?void 0:r.clientWidth))||e.scrollIntoView()}}(g)}(null===(u=x.current[t])||void 0===u?void 0:u.focusedItem)!==e.index&&(null===(h=O.current)||void 0===h||h.call(O,e,t))}),[_,O,x]),L=(0,i.useCallback)((function(e){m((function(t){var n;return h(h({},t),((n={})[e.treeId]=e,n))})),null==E||E(e)}),[E]),D=(0,i.useCallback)((function(e){null==I||I(g[e]),delete g[e],m(g)}),[I,g]),N=(0,i.useCallback)((function(e,t){null==n||n(e,t),m((function(e){return e}))}),[n]),S=(0,i.useCallback)((function(e,n){null==t||t(e,n),m((function(e){return e}))}),[t]),C=(0,i.useCallback)((function(e,t){null==r||r(e,t),m((function(e){return e}))}),[r]),M=(0,i.useCallback)((function(e){var t,n,i=null===(t=(0,a.Y)())||void 0===t?void 0:t.querySelector('[data-rct-tree="'.concat(e,'"] [data-rct-item-focus="true"]'));null===(n=null==i?void 0:i.focus)||void 0===n||n.call(i)}),[]),B=(0,i.useCallback)((function(e,t){void 0===t&&(t=!0);var n=function(e){var n,i;t&&(null==_||_)&&e&&!(null===(i=null===(n=(0,a.Y)())||void 0===n?void 0:n.querySelector('[data-rct-tree="'.concat(e,'"]')))||void 0===i?void 0:i.contains(document.activeElement))&&M(e)};if("function"==typeof e)v((function(t){var i=e(t);return i!==t&&n(i),i}));else{var i=e;v(i),n(i)}}),[_,M]),U=function(e){var t=e.renderItem,n=e.renderItemTitle,r=e.renderItemArrow,o=e.renderRenameInput,s=e.renderItemsContainer,a=e.renderTreeContainer,c=e.renderDragBetweenLine,u=e.renderSearchInput,h=e.renderLiveDescriptorContainer,g=e.renderDepthOffset,m=(0,i.useMemo)((function(){return function(e){return{renderItemTitle:function(e){var t=e.title,n=e.context,r=e.info;if(!r.isSearching||!n.isSearchMatching)return t;var o=t.toLowerCase().indexOf(r.search.toLowerCase());return i.createElement(i.Fragment,null,o>0&&i.createElement("span",null,t.slice(0,o)),i.createElement("span",{className:"rct-tree-item-search-highlight"},t.slice(o,o+r.search.length)),o+r.search.length<t.length&&i.createElement("span",null,t.slice(o+r.search.length,t.length)))},renderItemArrow:function(e){var t=e.item,n=e.context;return i.createElement("div",l({className:d(t.isFolder&&"rct-tree-item-arrow-isFolder",n.isExpanded&&"rct-tree-item-arrow-expanded","rct-tree-item-arrow")},n.arrowProps),t.isFolder&&(n.isExpanded?i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 16 16",enableBackground:"new 0 0 16 16",xmlSpace:"preserve"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z",className:"rct-tree-item-arrow-path"})))):i.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 16 16",enableBackground:"new 0 0 16 16",xmlSpace:"preserve"},i.createElement("g",null,i.createElement("g",null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z",className:"rct-tree-item-arrow-path"}))))))},renderItem:function(t){var n=t.item,r=t.depth,o=t.children,s=t.title,a=t.context,c=t.arrow,u=a.isRenaming?"div":"button",h=a.isRenaming?void 0:"button";return i.createElement("li",l({},a.itemContainerWithChildrenProps,{className:d("rct-tree-item-li",n.isFolder&&"rct-tree-item-li-isFolder",a.isSelected&&"rct-tree-item-li-selected",a.isExpanded&&"rct-tree-item-li-expanded",a.isFocused&&"rct-tree-item-li-focused",a.isDraggingOver&&"rct-tree-item-li-dragging-over",a.isSearchMatching&&"rct-tree-item-li-search-match")}),i.createElement("div",l({},a.itemContainerWithoutChildrenProps,{style:{"--depthOffset":"".concat((r+1)*e,"px")},className:d("rct-tree-item-title-container",n.isFolder&&"rct-tree-item-title-container-isFolder",a.isSelected&&"rct-tree-item-title-container-selected",a.isExpanded&&"rct-tree-item-title-container-expanded",a.isFocused&&"rct-tree-item-title-container-focused",a.isDraggingOver&&"rct-tree-item-title-container-dragging-over",a.isSearchMatching&&"rct-tree-item-title-container-search-match")}),c,i.createElement(u,l({type:h},a.interactiveElementProps,{className:d("rct-tree-item-button",n.isFolder&&"rct-tree-item-button-isFolder",a.isSelected&&"rct-tree-item-button-selected",a.isExpanded&&"rct-tree-item-button-expanded",a.isFocused&&"rct-tree-item-button-focused",a.isDraggingOver&&"rct-tree-item-button-dragging-over",a.isSearchMatching&&"rct-tree-item-button-search-match")}),s)),o)},renderRenameInput:function(e){var t=e.inputProps,n=e.inputRef,r=e.submitButtonProps,o=e.submitButtonRef,s=e.formProps;return i.createElement("form",l({},s,{className:"rct-tree-item-renaming-form"}),i.createElement("input",l({},t,{ref:n,className:"rct-tree-item-renaming-input"})),i.createElement("input",l({},r,{ref:o,type:"submit",className:"rct-tree-item-renaming-submit-button",value:"ðŸ—¸"})))},renderTreeContainer:function(e){var t=e.children,n=e.containerProps,r=e.info;return i.createElement("div",{className:d("rct-tree-root",r.isFocused&&"rct-tree-root-focus",r.isRenaming&&"rct-tree-root-renaming",r.areItemsSelected&&"rct-tree-root-itemsselected",void 0)},i.createElement("div",l({},n,{style:l({minHeight:"30px"},n.style)}),t))},renderItemsContainer:function(e){var t=e.children,n=e.containerProps;return i.createElement("ul",l({},n,{className:"rct-tree-items-container"}),t)},renderDragBetweenLine:function(t){var n=t.draggingPosition,r=t.lineProps;return i.createElement("div",l({},r,{style:{left:"".concat(n.depth*e,"px")},className:d("rct-tree-drag-between-line","between-items"===n.targetType&&"top"===n.linePosition&&"rct-tree-drag-between-line-top","between-items"===n.targetType&&"bottom"===n.linePosition&&"rct-tree-drag-between-line-bottom")}))},renderSearchInput:function(e){var t=e.inputProps;return i.createElement("div",{className:d("rct-tree-search-input-container")},i.createElement("span",{className:"rct-tree-input-icon"}),i.createElement("input",l({},t,{className:d("rct-tree-search-input")})))},renderLiveDescriptorContainer:function(e){var t=e.tree,n=e.children;return i.createElement("div",{id:"rct-livedescription-".concat(t.treeId),style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}},n)},renderDepthOffset:e}}(null!=g?g:10)}),[g]),f={renderItem:t,renderItemTitle:n,renderItemArrow:r,renderRenameInput:o,renderItemsContainer:s,renderTreeContainer:a,renderDragBetweenLine:c,renderSearchInput:u,renderLiveDescriptorContainer:h,renderDepthOffset:g},p=Object.entries(m).reduce((function(e,t){var n=t[0],i=t[1],r=n;return e[r]=f[r]?f[r]:i,e}),{});return p.renderItem.displayName="RenderItem",p.renderItemTitle.displayName="RenderItemTitle",p.renderItemArrow.displayName="RenderItemArrow",p.renderRenameInput.displayName="RenderRenameInput",p.renderItemsContainer.displayName="RenderItemsContainer",p.renderTreeContainer.displayName="RenderTreeContainer",p.renderDragBetweenLine.displayName="RenderDragBetweenLine",p.renderSearchInput.displayName="RenderSearchInput",p}(o);return h(h(h({},U),o),{onFocusItem:A,registerTree:L,unregisterTree:D,onExpandItem:S,onCollapseItem:N,onDrop:C,setActiveTree:B,treeIds:T,trees:g,activeTreeId:p,linearItems:R})},m=i.createContext(null),f=function(){return(0,i.useContext)(m)},p=i.forwardRef((function(e,t){var n=g(e),a=e.viewState,l=e.onFocusItem;return(0,i.useEffect)((function(){for(var t,i,r,o=0,s=Object.keys(n.trees);o<s.length;o++){var d=s[o],c=null===(i=null===(t=e.items[n.trees[d].rootItem])||void 0===t?void 0:t.children)||void 0===i?void 0:i[0],u=c&&e.items[c];!(null===(r=a[d])||void 0===r?void 0:r.focusedItem)&&n.trees[d]&&u&&(null==l||l(u,d,!1))}}),[n.trees,l,e.items,a]),i.createElement(m.Provider,{value:n},i.createElement(r.N,null,i.createElement(o.G,null,i.createElement(s.i,{ref:t},e.children))))}))},22489:(e,t,n)=>{var i=n(46518),r=n(69565),o=n(79306),s=n(28551),a=n(1767),l=n(19462),d=n(96319),c=n(96395),u=n(9539),h=n(84549),g=!c&&h("filter",TypeError),m=l((function(){for(var e,t,n=this.iterator,i=this.predicate,o=this.next;;){if(e=s(r(o,n)),this.done=!!e.done)return;if(t=e.value,d(n,i,[t,this.counter++],!0))return t}}));i({target:"Iterator",proto:!0,real:!0,forced:c||g},{filter:function(e){s(this);try{o(e)}catch(e){u(this,"throw",e)}return g?r(g,this,e):new m(a(this),{predicate:e})}})},29377:(e,t,n)=>{n.d(t,{A:()=>i});const i={hljs:{display:"block",overflowX:"auto",padding:"0.5em",background:"white",color:"black"},"hljs-comment":{color:"#008000"},"hljs-quote":{color:"#008000"},"hljs-variable":{color:"#008000"},"hljs-keyword":{color:"#00f"},"hljs-selector-tag":{color:"#00f"},"hljs-built_in":{color:"#00f"},"hljs-name":{color:"#00f"},"hljs-tag":{color:"#00f"},"hljs-string":{color:"#a31515"},"hljs-title":{color:"#a31515"},"hljs-section":{color:"#a31515"},"hljs-attribute":{color:"#a31515"},"hljs-literal":{color:"#a31515"},"hljs-template-tag":{color:"#a31515"},"hljs-template-variable":{color:"#a31515"},"hljs-type":{color:"#a31515"},"hljs-addition":{color:"#a31515"},"hljs-deletion":{color:"#2b91af"},"hljs-selector-attr":{color:"#2b91af"},"hljs-selector-pseudo":{color:"#2b91af"},"hljs-meta":{color:"#2b91af"},"hljs-doctag":{color:"#808080"},"hljs-attr":{color:"#f00"},"hljs-symbol":{color:"#00b0e8"},"hljs-bullet":{color:"#00b0e8"},"hljs-link":{color:"#00b0e8"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}}},29432:(e,t,n)=>{n.d(t,{l:()=>r});var i=n(96540);function r(e){void 0===e&&(e=!1);var t=(0,i.useRef)(new Array);return(0,i.useEffect)((function(){if(e)return function(){};var n=t.current;return function(){return n.forEach((function(e){return cancelAnimationFrame(e)}))}}),[e,t]),(0,i.useCallback)((function(e){var n=requestAnimationFrame((function(){t.current.splice(t.current.indexOf(n),1),e()}));t.current.push(n)}),[t])}},29698:(e,t)=>{var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var o in i={},t)"key"!==o&&(i[o]=t[o]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},30372:(e,t,n)=>{n.d(t,{A:()=>i});const i={hljs:{display:"block",overflowX:"auto",padding:"0.5em",background:"#2b2b2b",color:"#bababa"},"hljs-strong":{color:"#a8a8a2"},"hljs-emphasis":{color:"#a8a8a2",fontStyle:"italic"},"hljs-bullet":{color:"#6896ba"},"hljs-quote":{color:"#6896ba"},"hljs-link":{color:"#6896ba"},"hljs-number":{color:"#6896ba"},"hljs-regexp":{color:"#6896ba"},"hljs-literal":{color:"#6896ba"},"hljs-code":{color:"#a6e22e"},"hljs-selector-class":{color:"#a6e22e"},"hljs-keyword":{color:"#cb7832"},"hljs-selector-tag":{color:"#cb7832"},"hljs-section":{color:"#cb7832"},"hljs-attribute":{color:"#cb7832"},"hljs-name":{color:"#cb7832"},"hljs-variable":{color:"#cb7832"},"hljs-params":{color:"#b9b9b9"},"hljs-string":{color:"#6a8759"},"hljs-subst":{color:"#e0c46c"},"hljs-type":{color:"#e0c46c"},"hljs-built_in":{color:"#e0c46c"},"hljs-builtin-name":{color:"#e0c46c"},"hljs-symbol":{color:"#e0c46c"},"hljs-selector-id":{color:"#e0c46c"},"hljs-selector-attr":{color:"#e0c46c"},"hljs-selector-pseudo":{color:"#e0c46c"},"hljs-template-tag":{color:"#e0c46c"},"hljs-template-variable":{color:"#e0c46c"},"hljs-addition":{color:"#e0c46c"},"hljs-comment":{color:"#7f7f7f"},"hljs-deletion":{color:"#7f7f7f"},"hljs-meta":{color:"#7f7f7f"}}},31930:(e,t,n)=>{n.d(t,{N:()=>m,X:()=>g});var i=n(96540),r=n(65153),o=n(15036),s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},a=n(70218),l=function(){function e(e){this.mode=r.O.DoubleClickItemToExpand,this.environment=e}return e.prototype.createInteractiveElementProps=function(e,t,n,i){var r=this;return{onClick:function(e){var t=0===e.detail;n.focusItem(),e.shiftKey&&!t?n.selectUpTo(!(0,a.d)(e)):(0,a.d)(e)&&!t?i.isSelected?n.unselectItem():n.addToSelectedItems():n.selectItem()},onDoubleClick:function(){n.focusItem(),n.selectItem(),e.isFolder&&n.toggleExpandedState(),e.isFolder&&!r.environment.canInvokePrimaryActionOnItemContainer||n.primaryAction()},onFocus:function(){n.focusItem()},onDragStart:function(e){e.dataTransfer.dropEffect="move",n.startDragging()},onDragOver:function(e){e.preventDefault()},draggable:i.canDrag&&!i.isRenaming,tabIndex:i.isRenaming?void 0:i.isFocused?0:-1}},e}(),d=function(){function e(e){this.mode=r.O.ClickItemToExpand,this.environment=e}return e.prototype.createInteractiveElementProps=function(e,t,n,i){var r=this;return{onClick:function(t){var o=0===t.detail;n.focusItem(),t.shiftKey&&!o?n.selectUpTo(!(0,a.d)(t)):(0,a.d)(t)&&!o?i.isSelected?n.unselectItem():n.addToSelectedItems():(e.isFolder&&n.toggleExpandedState(),n.selectItem(),e.isFolder&&!r.environment.canInvokePrimaryActionOnItemContainer||n.primaryAction())},onFocus:function(){n.focusItem()},onDragStart:function(e){e.dataTransfer.dropEffect="move",n.startDragging()},onDragOver:function(e){e.preventDefault()},draggable:i.canDrag&&!i.isRenaming,tabIndex:i.isRenaming?void 0:i.isFocused?0:-1}},e}(),c=n(67241),u=function(e,t){switch(e){case r.O.DoubleClickItemToExpand:return new l(t);case r.O.ClickItemToExpand:return new d(t);case r.O.ClickArrowToExpand:return new c.y(t);default:throw Error("Unknown interaction mode ".concat(e))}},h=i.createContext(null),g=function(){return i.useContext(h)},m=function(e){var t=e.children,n=(0,o.f)(),a=n.defaultInteractionMode,l=(0,i.useMemo)((function(){var e,t,i;return a&&"string"!=typeof a?a.extends?(t=a,i=u(a.extends,n),{mode:t.mode,createInteractiveElementProps:function(e,n,r,o){return s(s({},i.createInteractiveElementProps(e,n,r,o)),t.createInteractiveElementProps(e,n,r,o))}}):a:u(null!==(e=a)&&void 0!==e?e:r.O.ClickItemToExpand,n)}),[]);return i.createElement(h.Provider,{value:l},t)}},55544:(e,t,n)=>{n.d(t,{$z:()=>g,CU:()=>P,En:()=>T,Kx:()=>k,MZ:()=>O,PE:()=>Ee,bP:()=>w,ro:()=>G});var i=n(74848),r=n(96540),o=n(40961),s=n(5338),a=Object.defineProperty,l=(e,t,n)=>((e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const d=class e{constructor(e){l(this,"_name"),this._name=e}static flip(t){return t===e.HORZ?e.VERT:e.HORZ}getName(){return this._name}toString(){return this._name}};l(d,"HORZ",new d("horz")),l(d,"VERT",new d("vert"));let c=d;class u{constructor(e,t,n,i){l(this,"x"),l(this,"y"),l(this,"width"),l(this,"height"),this.x=e,this.y=t,this.width=n,this.height=i}static empty(){return new u(0,0,0,0)}static fromJson(e){return new u(e.x,e.y,e.width,e.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(e){this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this.width=Math.round(this.width/e)*e,this.height=Math.round(this.height/e)*e}static getBoundingClientRect(e){const{x:t,y:n,width:i,height:r}=e.getBoundingClientRect();return new u(t,n,i,r)}static getContentRect(e){const t=e.getBoundingClientRect(),n=window.getComputedStyle(e),i=parseFloat(n.paddingLeft),r=parseFloat(n.paddingRight),o=parseFloat(n.paddingTop),s=parseFloat(n.paddingBottom),a=parseFloat(n.borderLeftWidth),l=parseFloat(n.borderRightWidth),d=parseFloat(n.borderTopWidth),c=parseFloat(n.borderBottomWidth),h=t.width-a-i-r-l,g=t.height-d-o-s-c;return new u(t.left+a+i,t.top+d+o,h,g)}static fromDomRect(e){return new u(e.x,e.y,e.width,e.height)}relativeTo(e){return new u(this.x-e.x,this.y-e.y,this.width,this.height)}clone(){return new u(this.x,this.y,this.width,this.height)}equals(e){return this.x===(null==e?void 0:e.x)&&this.y===(null==e?void 0:e.y)&&this.width===(null==e?void 0:e.width)&&this.height===(null==e?void 0:e.height)}equalSize(e){return this.width===(null==e?void 0:e.width)&&this.height===(null==e?void 0:e.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,t){this.styleWithPosition(e.style,t)}styleWithPosition(e,t="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=t,e}contains(e,t){return this.x<=e&&e<=this.getRight()&&this.y<=t&&t<=this.getBottom()}removeInsets(e){return new u(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let t=this.width;return e===c.VERT&&(t=this.height),t}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}const h=class e{constructor(t,n,i){l(this,"name"),l(this,"orientation"),l(this,"indexPlus"),this.name=t,this.orientation=n,this.indexPlus=i,e.values.set(this.name,this)}static getByName(t){return e.values.get(t)}static getLocation(t,n,i){if(n=(n-t.x)/t.width,i=(i-t.y)/t.height,n>=.25&&n<.75&&i>=.25&&i<.75)return e.CENTER;const r=i>=1-n;return i>=n?r?e.BOTTOM:e.LEFT:r?e.RIGHT:e.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(t){return this===e.TOP?new u(t.x,t.y,t.width,t.height/2):this===e.BOTTOM?new u(t.x,t.getBottom()-t.height/2,t.width,t.height/2):this===e.LEFT?new u(t.x,t.y,t.width/2,t.height):this===e.RIGHT?new u(t.getRight()-t.width/2,t.y,t.width/2,t.height):t.clone()}split(t,n){return this===e.TOP?{start:new u(t.x,t.y,t.width,n),end:new u(t.x,t.y+n,t.width,t.height-n)}:this===e.LEFT?{start:new u(t.x,t.y,n,t.height),end:new u(t.x+n,t.y,t.width-n,t.height)}:this===e.RIGHT?{start:new u(t.getRight()-n,t.y,n,t.height),end:new u(t.x,t.y,t.width-n,t.height)}:{start:new u(t.x,t.getBottom()-n,t.width,n),end:new u(t.x,t.y,t.width,t.height-n)}}reflect(){return this===e.TOP?e.BOTTOM:this===e.LEFT?e.RIGHT:this===e.RIGHT?e.LEFT:e.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};l(h,"values",new Map),l(h,"TOP",new h("top",c.VERT,0)),l(h,"BOTTOM",new h("bottom",c.VERT,1)),l(h,"LEFT",new h("left",c.HORZ,0)),l(h,"RIGHT",new h("right",c.HORZ,1)),l(h,"CENTER",new h("center",c.VERT,0));let g=h;var m=(e=>(e.Close_Tab="Close",e.Close_Tabset="Close tab set",e.Active_Tabset="Active tab set",e.Move_Tabset="Move tab set",e.Move_Tabs="Move tabs(?)",e.Maximize="Maximize tab set",e.Restore="Restore tab set",e.Popout_Tab="Popout selected tab",e.Overflow_Menu_Tooltip="Hidden tabs",e.Error_rendering_component="Error rendering component",e.Error_rendering_component_retry="Retry",e))(m||{}),f=(e=>(e.FLEXLAYOUT__BORDER="flexlayout__border",e.FLEXLAYOUT__BORDER_="flexlayout__border_",e.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",e.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",e.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",e.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",e.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",e.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",e.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",e.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",e.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",e.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",e.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",e.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",e.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",e.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",e.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",e.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",e.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",e.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",e.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",e.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",e.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",e.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",e.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",e.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",e.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",e.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",e.FLEXLAYOUT__LAYOUT="flexlayout__layout",e.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",e.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",e.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",e.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",e.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",e.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",e.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",e.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",e.FLEXLAYOUT__SPLITTER="flexlayout__splitter",e.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",e.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",e.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",e.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",e.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",e.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",e.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",e.FLEXLAYOUT__ROW="flexlayout__row",e.FLEXLAYOUT__TAB="flexlayout__tab",e.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",e.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",e.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",e.FLEXLAYOUT__TABSET="flexlayout__tabset",e.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",e.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",e.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",e.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",e.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",e.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",e.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",e.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",e.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",e.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",e.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",e.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",e.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",e.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",e.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",e.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",e.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",e.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",e.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",e.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",e.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",e.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",e.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",e.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",e.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",e.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",e.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",e.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",e.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",e.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",e.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",e.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",e.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",e.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",e))(f||{});class p{constructor(e,t){l(this,"type"),l(this,"data"),this.type=e,this.data=t}}const v=class e{static addNode(t,n,i,r,o){return new p(e.ADD_NODE,{json:t,toNode:n,location:i.getName(),index:r,select:o})}static moveNode(t,n,i,r,o){return new p(e.MOVE_NODE,{fromNode:t,toNode:n,location:i.getName(),index:r,select:o})}static deleteTab(t){return new p(e.DELETE_TAB,{node:t})}static deleteTabset(t){return new p(e.DELETE_TABSET,{node:t})}static renameTab(t,n){return new p(e.RENAME_TAB,{node:t,text:n})}static selectTab(t){return new p(e.SELECT_TAB,{tabNode:t})}static setActiveTabset(t,n){return new p(e.SET_ACTIVE_TABSET,{tabsetNode:t,windowId:n})}static adjustWeights(t,n){return new p(e.ADJUST_WEIGHTS,{nodeId:t,weights:n})}static adjustBorderSplit(t,n){return new p(e.ADJUST_BORDER_SPLIT,{node:t,pos:n})}static maximizeToggle(t,n){return new p(e.MAXIMIZE_TOGGLE,{node:t,windowId:n})}static updateModelAttributes(t){return new p(e.UPDATE_MODEL_ATTRIBUTES,{json:t})}static updateNodeAttributes(t,n){return new p(e.UPDATE_NODE_ATTRIBUTES,{node:t,json:n})}static popoutTab(t){return new p(e.POPOUT_TAB,{node:t})}static popoutTabset(t){return new p(e.POPOUT_TABSET,{node:t})}static closeWindow(t){return new p(e.CLOSE_WINDOW,{windowId:t})}static createWindow(t,n){return new p(e.CREATE_WINDOW,{layout:t,rect:n})}};l(v,"ADD_NODE","FlexLayout_AddNode"),l(v,"MOVE_NODE","FlexLayout_MoveNode"),l(v,"DELETE_TAB","FlexLayout_DeleteTab"),l(v,"DELETE_TABSET","FlexLayout_DeleteTabset"),l(v,"RENAME_TAB","FlexLayout_RenameTab"),l(v,"SELECT_TAB","FlexLayout_SelectTab"),l(v,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset"),l(v,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights"),l(v,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit"),l(v,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle"),l(v,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes"),l(v,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes"),l(v,"POPOUT_TAB","FlexLayout_PopoutTab"),l(v,"POPOUT_TABSET","FlexLayout_PopoutTabset"),l(v,"CLOSE_WINDOW","FlexLayout_CloseWindow"),l(v,"CREATE_WINDOW","FlexLayout_CreateWindow");let T=v;class b{constructor(e,t,n,i){l(this,"name"),l(this,"alias"),l(this,"modelName"),l(this,"pairedAttr"),l(this,"pairedType"),l(this,"defaultValue"),l(this,"alwaysWriteJson"),l(this,"type"),l(this,"required"),l(this,"fixed"),l(this,"description"),this.name=e,this.alias=void 0,this.modelName=t,this.defaultValue=n,this.alwaysWriteJson=i,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setAlias(e){return this.alias=e,this}setDescription(e){this.description=e}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(e){this.pairedAttr=e}setPairedType(e){this.pairedType=e}}l(b,"NUMBER","number"),l(b,"STRING","string"),l(b,"BOOLEAN","boolean");class _{constructor(){l(this,"attributes"),l(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(e,t,n,i){const r=new b(e,t,n,i);return this.attributes.push(r),this.nameToAttribute.set(e,r),r}addInherited(e,t){return this.addWithAll(e,t,void 0,!1)}add(e,t,n){return this.addWithAll(e,void 0,t,n)}getAttributes(){return this.attributes}getModelName(e){const t=this.nameToAttribute.get(e);if(void 0!==t)return t.modelName}toJson(e,t){for(const n of this.attributes){const i=t[n.name];(n.alwaysWriteJson||i!==n.defaultValue)&&(e[n.name]=i)}}fromJson(e,t){for(const n of this.attributes){let i=e[n.name];void 0===i&&n.alias&&(i=e[n.alias]),t[n.name]=void 0===i?n.defaultValue:i}}update(e,t){for(const n of this.attributes)if(Object.prototype.hasOwnProperty.call(e,n.name)){const i=e[n.name];void 0===i?delete t[n.name]:t[n.name]=i}}setDefaults(e){for(const t of this.attributes)e[t.name]=t.defaultValue}pairAttributes(e,t){for(const n of t.attributes)if(n.modelName&&this.nameToAttribute.has(n.modelName)){const t=this.nameToAttribute.get(n.modelName);t.setpairedAttr(n),n.setpairedAttr(t),t.setPairedType(e)}}toTypescriptInterface(e,t){var n,i;const r=[],o=this.attributes.sort(((e,t)=>e.name.localeCompare(t.name)));r.push("export interface I"+e+"Attributes {");for(let e=0;e<o.length;e++){const s=o[e];let a,l,d=s.type,c=s;void 0!==c.defaultValue?a=c.defaultValue:void 0!==c.modelName&&void 0!==t&&void 0!==t.nameToAttribute.get(c.modelName)&&(l=c.modelName,c=t.nameToAttribute.get(l),a=c.defaultValue,d=c.type);const u=JSON.stringify(a),h=c.required?"":"?";let g="\t/**\n\t  ";s.description?g+=s.description:s.pairedType&&(null==(n=s.pairedAttr)?void 0:n.description)&&(g+=`Value for ${s.pairedType} attribute ${s.pairedAttr.name} if not overridden`,g+="\n\n\t  ",g+=null==(i=s.pairedAttr)?void 0:i.description),g+="\n\n\t  ",s.fixed?g+=`Fixed value: ${u}`:g+=l?`Default: inherited from Global attribute ${s.modelName} (default ${u})`:`Default: ${u}`,g+="\n\t */",r.push(g),r.push("\t"+s.name+h+": "+d+";\n")}return r.push("}"),r.join("\n")}}class E{constructor(e,t,n,i,r){l(this,"node"),l(this,"rect"),l(this,"location"),l(this,"index"),l(this,"className"),this.node=e,this.rect=t,this.location=n,this.index=i,this.className=r}}class I{constructor(e){l(this,"borders"),l(this,"borderMap"),l(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(e,t){const n=new I(t);n.borders=e.map((e=>G.fromJson(e,t)));for(const e of n.borders)n.borderMap.set(e.getLocation(),e);return n}toJson(){return this.borders.map((e=>e.toJson()))}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(e){for(const t of this.borders){e(t,0);for(const n of t.getChildren())n.forEachNode(e,1)}}setPaths(){for(const e of this.borders){const t="/border/"+e.getLocation().getName();e.setPath(t);let n=0;for(const i of e.getChildren())i.setPath(t+"/t"+n),n++}}findDropTargetNode(e,t,n){for(const i of this.borders)if(i.isShowing()){const r=i.canDrop(e,t,n);if(void 0!==r)return r}}}class w{constructor(e){l(this,"model"),l(this,"attributes"),l(this,"parent"),l(this,"children"),l(this,"rect"),l(this,"path"),l(this,"listeners"),this.model=e,this.attributes={},this.children=[],this.rect=u.empty(),this.listeners=new Map,this.path=""}getId(){let e=this.attributes.id;return void 0!==e||(e=this.model.nextUniqueId(),this.setId(e)),e}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return void 0===this.parent?this.model.isRootOrientationVertical()?c.VERT:c.HORZ:c.flip(this.parent.getOrientation())}setEventListener(e,t){this.listeners.set(e,t)}removeEventListener(e){this.listeners.delete(e)}setId(e){this.attributes.id=e}fireEvent(e,t){this.listeners.has(e)&&this.listeners.get(e)(t)}getAttr(e){let t=this.attributes[e];if(void 0===t){const n=this.getAttributeDefinitions().getModelName(e);void 0!==n&&(t=this.model.getAttribute(n))}return t}forEachNode(e,t){e(this,t),t++;for(const n of this.children)n.forEachNode(e,t)}setPaths(e){let t=0;for(const n of this.children){let i=e;"row"===n.getType()?i+="/r"+t:"tabset"===n.getType()?i+="/ts"+t:"tab"===n.getType()&&(i+="/t"+t),n.path=i,n.setPaths(i),t++}}setParent(e){this.parent=e}setRect(e){this.rect=e}setPath(e){this.path=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}findDropTargetNode(e,t,n,i){let r;if(this.rect.contains(n,i))if(void 0!==this.model.getMaximizedTabset(e))r=this.model.getMaximizedTabset(e).canDrop(t,n,i);else if(r=this.canDrop(t,n,i),void 0===r&&0!==this.children.length)for(const o of this.children)if(r=o.findDropTargetNode(e,t,n,i),void 0!==r)break;return r}canDrop(e,t,n){}canDockInto(e,t){if(null!=t){if(t.location===g.CENTER&&!1===t.node.isEnableDrop())return!1;if(t.location===g.CENTER&&"tabset"===e.getType()&&void 0!==e.getName())return!1;if(t.location!==g.CENTER&&!1===t.node.isEnableDivide())return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(e,t)}return!0}removeChild(e){const t=this.children.indexOf(e);return-1!==t&&this.children.splice(t,1),t}addChild(e,t){return null!=t?this.children.splice(t,0,e):(this.children.push(e),t=this.children.length-1),e.parent=this,t}removeAll(){this.children=[]}styleWithPosition(e){return null==e&&(e={}),this.rect.styleWithPosition(e)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"\t")}}const y=class e extends w{constructor(t,n,i=!0){super(t),l(this,"tabRect",u.empty()),l(this,"moveableElement"),l(this,"tabStamp"),l(this,"renderedName"),l(this,"extra"),l(this,"visible"),l(this,"rendered"),l(this,"scrollTop"),l(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,e.attributeDefinitions.fromJson(n,this.attributes),!0===i&&t.addNode(this)}static fromJson(t,n,i=!0){return new e(n,t,i)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof P?this.parent.getWindowId():k.MAIN_WINDOW_ID}getWindow(){const e=this.model.getwindowsMap().get(this.getWindowId());if(e)return e.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==k.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){const t={};return e.attributeDefinitions.toJson(t,this.attributes),t}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame((()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)}))}setRect(e){e.equals(this.rect)||(this.fireEvent("resize",{rect:e}),this.rect=e)}setVisible(e){e!==this.visible&&(this.visible=e,this.fireEvent("visibility",{visible:e}))}getScrollTop(){return this.scrollTop}setScrollTop(e){this.scrollTop=e}getScrollLeft(){return this.scrollLeft}setScrollLeft(e){this.scrollLeft=e}isRendered(){return this.rendered}setRendered(e){this.rendered=e}getTabRect(){return this.tabRect}setTabRect(e){this.tabRect=e}getTabStamp(){return this.tabStamp}setTabStamp(e){this.tabStamp=e}getMoveableElement(){return this.moveableElement}setMoveableElement(e){this.moveableElement=e}setRenderedName(e){this.renderedName=e}getNameForOverflowMenu(){const e=this.getAttr("altName");return void 0!==e?e:this.renderedName}setName(e){this.attributes.name=e}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}getAttributeDefinitions(){return e.attributeDefinitions}setBorderWidth(e){this.attributes.borderWidth=e}setBorderHeight(e){this.attributes.borderHeight=e}static getAttributeDefinitions(){return e.attributeDefinitions}static createAttributeDefinitions(){const t=new _;return t.add("type",e.TYPE,!0).setType(b.STRING).setFixed(),t.add("id",void 0).setType(b.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),t.add("name","[Unnamed Tab]").setType(b.STRING).setDescription("name of tab to be displayed in the tab button"),t.add("altName",void 0).setType(b.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),t.add("helpText",void 0).setType(b.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),t.add("component",void 0).setType(b.STRING).setDescription("string identifying which component to run (for factory)"),t.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),t.add("tabsetClassName",void 0).setType(b.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),t.add("enableWindowReMount",!1).setType(b.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),t.addInherited("enableClose","tabEnableClose").setType(b.BOOLEAN).setDescription("allow user to close tab via close button"),t.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),t.addInherited("enableDrag","tabEnableDrag").setType(b.BOOLEAN).setDescription("allow user to drag tab to new location"),t.addInherited("enableRename","tabEnableRename").setType(b.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),t.addInherited("className","tabClassName").setType(b.STRING).setDescription("class applied to tab button"),t.addInherited("contentClassName","tabContentClassName").setType(b.STRING).setDescription("class applied to tab content"),t.addInherited("icon","tabIcon").setType(b.STRING).setDescription("the tab icon"),t.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(b.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),t.addInherited("enablePopout","tabEnablePopout").setType(b.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),t.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(b.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),t.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(b.BOOLEAN).setDescription("if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)\n            then enabling this option will gray out this tab"),t.addInherited("borderWidth","tabBorderWidth").setType(b.NUMBER).setDescription("width when added to border, -1 will use border size"),t.addInherited("borderHeight","tabBorderHeight").setType(b.NUMBER).setDescription("height when added to border, -1 will use border size"),t.addInherited("minWidth","tabMinWidth").setType(b.NUMBER).setDescription("the min width of this tab"),t.addInherited("minHeight","tabMinHeight").setType(b.NUMBER).setDescription("the min height of this tab"),t.addInherited("maxWidth","tabMaxWidth").setType(b.NUMBER).setDescription("the max width of this tab"),t.addInherited("maxHeight","tabMaxHeight").setType(b.NUMBER).setDescription("the max height of this tab"),t}};l(y,"TYPE","tab"),l(y,"attributeDefinitions",y.createAttributeDefinitions());let O=y;function x(){return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function R(e,t,n){let r;const o=t.getName(),s=t.getName();void 0===n&&(n=0),void 0===r&&void 0!==t.getIcon()&&(r=0!==n?(0,i.jsx)("img",{style:{width:"1em",height:"1em",transform:"rotate("+n+"deg)"},src:t.getIcon(),alt:"leadingContent"}):(0,i.jsx)("img",{style:{width:"1em",height:"1em"},src:t.getIcon(),alt:"leadingContent"}));const a={leading:r,content:o,name:s,buttons:[]};return e.customizeTab(t,a),t.setRenderedName(a.name),a}function A(e){let t=!1;return e.nativeEvent instanceof MouseEvent&&(0!==e.nativeEvent.button||e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)&&(t=!0),t}function L(e,t){const n=[...D("iframe",t),...D("webview",t)];for(const t of n)t.style.pointerEvents=e?"auto":"none"}function D(e,t){return[...t.getElementsByTagName(e)]}function N(e,t,n,i,r){t.preventDefault();const o=e=>{e.preventDefault(),n(e.clientX,e.clientY)},s=e=>{e.preventDefault(),r()},a=()=>{e.removeEventListener("pointermove",o),e.removeEventListener("pointerup",a),e.removeEventListener("pointercancel",s),i()};e.addEventListener("pointermove",o),e.addEventListener("pointerup",a),e.addEventListener("pointercancel",s)}function S(e){if(e instanceof O)return e.isEnablePopout();if(e instanceof P){for(const t of e.getChildren())if(!1===t.isEnablePopout())return!1;return!0}return!1}function C(e,t){const n=e.getAttribute("style");return n!==t.getAttribute("style")&&(n?t.setAttribute("style",n):t.removeAttribute("style"),!0)}function M(e,t){if(void 0!==e&&(e instanceof P||e instanceof G)){const n=e.getSelected();-1!==n&&(t===n&&e.getChildren().length>0?t>=e.getChildren().length&&e.setSelected(e.getChildren().length-1):t<n?e.setSelected(n-1):t>n||e.setSelected(-1))}}function B(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}const U=class e extends w{constructor(t,n){super(t),l(this,"tabStripRect",u.empty()),l(this,"contentRect",u.empty()),l(this,"calculatedMinHeight"),l(this,"calculatedMinWidth"),l(this,"calculatedMaxHeight"),l(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,e.attributeDefinitions.fromJson(n,this.attributes),t.addNode(this)}static fromJson(t,n,i){const r=new e(n,t);if(null!=t.children)for(const e of t.children){const t=O.fromJson(e,n);r.addChild(t)}return 0===r.children.length&&r.setSelected(-1),t.maximized&&!0===t.maximized&&(i.maximizedTabSet=r),t.active&&!0===t.active&&(i.activeTabSet=r),r}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){const e=this.attributes.selected;return void 0!==e?e:-1}getSelectedNode(){const e=this.getSelected();if(-1!==e)return this.children[e]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(e){return e===c.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(e){return e===c.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){const t={};return e.attributeDefinitions.toJson(t,this.attributes),t.children=this.children.map((e=>e.toJson())),this.isActive()&&(t.active=!0),this.isMaximized()&&(t.maximized=!0),t}calcMinMaxSize(){this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth();for(const e of this.children){const t=e;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,t.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,t.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,t.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,t.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return!!this.isEnableMaximize()&&(this.getModel().getMaximizedTabset(this.getWindowId())===this||this.getParent()!==this.getModel().getRoot(this.getWindowId())||1!==this.getModel().getRoot(this.getWindowId()).getChildren().length)}setContentRect(e){this.contentRect=e}getContentRect(){return this.contentRect}setTabStripRect(e){this.tabStripRect=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}getWindowId(){return this.parent.getWindowId()}canDrop(e,t,n){let i;if(e===this){const e=g.CENTER,t=this.tabStripRect;i=new E(this,t,e,-1,f.FLEXLAYOUT__OUTLINE_RECT)}else{if(this.getWindowId()!==k.MAIN_WINDOW_ID&&!S(e))return;if(this.contentRect.contains(t,n)){let e=g.CENTER;void 0===this.model.getMaximizedTabset(this.parent.getWindowId())&&(e=g.getLocation(this.contentRect,t,n));const r=e.getDockRect(this.rect);i=new E(this,r,e,-1,f.FLEXLAYOUT__OUTLINE_RECT)}else if(null!=this.tabStripRect&&this.tabStripRect.contains(t,n)){let e,r,o;if(0===this.children.length)e=this.tabStripRect.clone(),r=e.y+3,o=e.height-4,e.width=2;else{let s=this.children[0];e=s.getTabRect(),r=e.y,o=e.height;let a=this.tabStripRect.x,l=0;for(let o=0;o<this.children.length;o++){if(s=this.children[o],e=s.getTabRect(),e.y!==r&&(r=e.y,a=this.tabStripRect.x),l=e.x+e.width/2,a<=t&&t<l&&e.y<n&&n<e.getBottom()){const t=g.CENTER,n=new u(e.x-2,e.y,3,e.height);if(this.rect.x<e.x&&e.x<this.rect.getRight()){i=new E(this,n,t,o,f.FLEXLAYOUT__OUTLINE_RECT);break}return}a=l}}if(null==i&&e.getRight()<this.rect.getRight()){const t=g.CENTER,n=new u(e.getRight()-2,r,3,o);i=new E(this,n,t,this.children.length,f.FLEXLAYOUT__OUTLINE_RECT)}}}if(e.canDockInto(e,i))return i}delete(){this.parent.removeChild(this)}remove(e){const t=this.removeChild(e);this.model.tidy(),M(this,t)}drop(t,n,i,r){const o=n;if(this===t)return;let s=t.getParent(),a=0;if(void 0!==s&&(a=s.removeChild(t),s instanceof G&&s.getSelected()===a?s.setSelected(-1):M(s,a)),t instanceof O&&s===this&&a<i&&i>0&&i--,o===g.CENTER){let e=i;if(-1===e&&(e=this.children.length),t instanceof O)this.addChild(t,e),(r||!1!==r&&this.isAutoSelectTab())&&this.setSelected(e);else if(t instanceof W)t.forEachNode(((t,n)=>{t instanceof O&&(this.addChild(t,e),e++)}),0);else{for(let n=0;n<t.getChildren().length;n++){const i=t.getChildren()[n];this.addChild(i,e),e++}-1===this.getSelected()&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let i=t;if(t instanceof O){const n=this.model.getOnCreateTabSet();i=new e(this.model,n?n(t):{}),i.addChild(t),s=i}else if(t instanceof W){const e=this.getParent();if(t.getOrientation()===e.getOrientation()&&(n.getOrientation()===e.getOrientation()||n===g.CENTER)){const e=new W(this.model,this.getWindowId(),{});e.addChild(t),i=e}}else i=t;const r=this.parent,a=r.getChildren().indexOf(this);if(r.getOrientation()===o.orientation)i.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),r.addChild(i,a+o.indexPlus);else{const e=new W(this.model,this.getWindowId(),{});e.setWeight(this.getWeight()),e.addChild(this),this.setWeight(50),i.setWeight(50),e.addChild(i,o.indexPlus),r.removeChild(this),r.addChild(e,a)}i instanceof e&&this.model.setActiveTabset(i,this.getWindowId())}this.model.tidy()}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}getAttributeDefinitions(){return e.attributeDefinitions}static getAttributeDefinitions(){return e.attributeDefinitions}static createAttributeDefinitions(){const t=new _;return t.add("type",e.TYPE,!0).setType(b.STRING).setFixed(),t.add("id",void 0).setType(b.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),t.add("weight",100).setType(b.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),t.add("selected",0).setType(b.NUMBER).setDescription("index of selected/visible tab in tabset"),t.add("name",void 0).setType(b.STRING),t.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),t.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),t.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),t.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),t.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),t.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),t.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),t.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),t.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),t.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),t.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),t.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),t.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),t.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),t.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),t.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),t.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(b.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),t.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(b.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),t.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(b.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),t}};l(U,"TYPE","tabset"),l(U,"attributeDefinitions",U.createAttributeDefinitions());let P=U;const F=class e extends w{constructor(t,n,i){super(t),l(this,"windowId"),l(this,"minHeight"),l(this,"minWidth"),l(this,"maxHeight"),l(this,"maxWidth"),this.windowId=n,this.minHeight=j,this.minWidth=j,this.maxHeight=H,this.maxWidth=H,e.attributeDefinitions.fromJson(i,this.attributes),this.normalizeWeights(),t.addNode(this)}static fromJson(t,n,i){const r=new e(n,i.windowId,t);if(null!=t.children)for(const o of t.children)if(o.type===P.TYPE){const e=P.fromJson(o,n,i);r.addChild(e)}else{const t=e.fromJson(o,n,i);r.addChild(t)}return r}getWeight(){return this.attributes.weight}toJson(){const t={};e.attributeDefinitions.toJson(t,this.attributes),t.children=[];for(const e of this.children)t.children.push(e.toJson());return t}getWindowId(){return this.windowId}setWindowId(e){this.windowId=e}setWeight(e){this.attributes.weight=e}getSplitterBounds(e){const t=this.getOrientation()===c.HORZ,n=this.getChildren(),i=this.model.getSplitterSize(),r=n[0].getRect(),o=n[n.length-1].getRect();let s=t?[r.x,o.getRight()]:[r.y,o.getBottom()];const a=t?[r.x,o.getRight()]:[r.y,o.getBottom()];for(let r=0;r<e;r++){const e=n[r];s[0]+=t?e.getMinWidth():e.getMinHeight(),a[0]+=t?e.getMaxWidth():e.getMaxHeight(),r>0&&(s[0]+=i,a[0]+=i)}for(let r=n.length-1;r>=e;r--){const e=n[r];s[1]-=(t?e.getMinWidth():e.getMinHeight())+i,a[1]-=(t?e.getMaxWidth():e.getMaxHeight())+i}return s=[Math.max(a[1],s[0]),Math.min(a[0],s[1])],s}getSplitterInitials(e){const t=this.getOrientation()===c.HORZ,n=this.getChildren(),i=this.model.getSplitterSize(),r=[];let o=0;for(let e=0;e<n.length;e++){const i=n[e].getRect(),s=t?i.width:i.height;r.push(s),o+=s}const s=n[e].getRect();return{initialSizes:r,sum:o,startPosition:(t?s.x:s.y)-i}}calculateSplit(e,t,n,i,r){const o=this.getOrientation()===c.HORZ,s=this.getChildren(),a=s[e],l=o?a.getMaxWidth():a.getMaxHeight(),d=[...n];if(t<r){let n=r-t,i=0;d[e]+n>l?(i=d[e]+n-l,d[e]=l):d[e]+=n;for(let t=e-1;t>=0;t--){const e=s[t],i=o?e.getMinWidth():e.getMinHeight();if(d[t]-n>i){d[t]-=n;break}n-=d[t]-i,d[t]=i}for(let t=e+1;t<s.length;t++){const e=s[t],n=o?e.getMaxWidth():e.getMaxHeight();if(d[t]+i<n){d[t]+=i;break}i-=n-d[t],d[t]=n}}else{let n=t-r,i=0;d[e-1]+n>l?(i=d[e-1]+n-l,d[e-1]=l):d[e-1]+=n;for(let t=e;t<s.length;t++){const e=s[t],i=o?e.getMinWidth():e.getMinHeight();if(d[t]-n>i){d[t]-=n;break}n-=d[t]-i,d[t]=i}for(let t=e-1;t>=0;t--){const e=s[t],n=o?e.getMaxWidth():e.getMaxHeight();if(d[t]+i<n){d[t]+=i;break}i-=n-d[t],d[t]=n}}return d.map((e=>100*Math.max(.1,e)/i))}getMinSize(e){return e===c.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(e){return e===c.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=j,this.minWidth=j,this.maxHeight=H,this.maxWidth=H;let e=!0;for(const t of this.children){const n=t;n.calcMinMaxSize(),this.getOrientation()===c.VERT?(this.minHeight+=n.getMinHeight(),this.maxHeight+=n.getMaxHeight(),e||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,n.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,n.getMaxWidth())):(this.minWidth+=n.getMinWidth(),this.maxWidth+=n.getMaxWidth(),e||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,n.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,n.getMaxHeight())),e=!1}}tidy(){let t=0;for(;t<this.children.length;){const n=this.children[t];if(n instanceof e){n.tidy();const i=n.getChildren();if(0===i.length)this.removeChild(n);else if(1===i.length){const r=i[0];if(this.removeChild(n),r instanceof e){let e=0;const i=r.getChildren();for(const t of i)e+=t.getWeight();for(let r=0;r<i.length;r++){const o=i[r];o.setWeight(n.getWeight()*o.getWeight()/e),this.addChild(o,t+r)}}else r.setWeight(n.getWeight()),this.addChild(r,t)}else t++}else n instanceof P&&0===n.getChildren().length&&n.isEnableDeleteWhenEmpty()?(this.removeChild(n),n===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):t++}if(this===this.model.getRoot(this.windowId)&&0===this.children.length){const e=this.model.getOnCreateTabSet();let t=e?e():{};t={...t,selected:-1};const n=new P(this.model,t);this.model.setActiveTabset(n,this.windowId),this.addChild(n)}}canDrop(e,t,n){const i=n-this.rect.y,r=t-this.rect.x,o=this.rect.width,s=this.rect.height,a=50;let l;if(this.getWindowId()===k.MAIN_WINDOW_ID||S(e)){if(this.model.isEnableEdgeDock()&&void 0===this.parent){if(t<this.rect.x+10&&i>s/2-a&&i<s/2+a){const e=g.LEFT,t=e.getDockRect(this.rect);t.width=t.width/2,l=new E(this,t,e,-1,f.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t>this.rect.getRight()-10&&i>s/2-a&&i<s/2+a){const e=g.RIGHT,t=e.getDockRect(this.rect);t.width=t.width/2,t.x+=t.width,l=new E(this,t,e,-1,f.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n<this.rect.y+10&&r>o/2-a&&r<o/2+a){const e=g.TOP,t=e.getDockRect(this.rect);t.height=t.height/2,l=new E(this,t,e,-1,f.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this.rect.getBottom()-10&&r>o/2-a&&r<o/2+a){const e=g.BOTTOM,t=e.getDockRect(this.rect);t.height=t.height/2,t.y+=t.height,l=new E(this,t,e,-1,f.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(void 0!==l&&!e.canDockInto(e,l))return}return l}}drop(t,n,i){const r=n,o=t.getParent();let s;if(o&&o.removeChild(t),void 0!==o&&o instanceof P&&o.setSelected(0),void 0!==o&&o instanceof G&&o.setSelected(-1),t instanceof P||t instanceof e)s=t,s instanceof e&&s.getOrientation()===this.getOrientation()&&(n.getOrientation()===this.getOrientation()||n===g.CENTER)&&(s=new e(this.model,this.windowId,{}),s.addChild(t));else{const e=this.model.getOnCreateTabSet();s=new P(this.model,e?e(t):{}),s.addChild(t)}let a=this.children.reduce(((e,t)=>e+t.getWeight()),0);0===a&&(a=100),s.setWeight(a/3);const l=!this.model.isRootOrientationVertical();if(r===g.CENTER)-1===i?this.addChild(s,this.children.length):this.addChild(s,i);else if(l&&r===g.LEFT||!l&&r===g.TOP)this.addChild(s,0);else if(l&&r===g.RIGHT||!l&&r===g.BOTTOM)this.addChild(s);else if(l&&r===g.TOP||!l&&r===g.LEFT){const t=new e(this.model,this.windowId,{}),n=new e(this.model,this.windowId,{});n.setWeight(75),s.setWeight(25);for(const e of this.children)n.addChild(e);this.removeAll(),t.addChild(s),t.addChild(n),this.addChild(t)}else if(l&&r===g.BOTTOM||!l&&r===g.RIGHT){const t=new e(this.model,this.windowId,{}),n=new e(this.model,this.windowId,{});n.setWeight(75),s.setWeight(25);for(const e of this.children)n.addChild(e);this.removeAll(),t.addChild(n),t.addChild(s),this.addChild(t)}s instanceof P&&this.model.setActiveTabset(s,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return e.attributeDefinitions}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}static getAttributeDefinitions(){return e.attributeDefinitions}normalizeWeights(){let e=0;for(const t of this.children)e+=t.getWeight();0===e&&(e=1);for(const t of this.children){const n=t;n.setWeight(Math.max(.001,100*n.getWeight()/e))}}static createAttributeDefinitions(){const t=new _;return t.add("type",e.TYPE,!0).setType(b.STRING).setFixed(),t.add("id",void 0).setType(b.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),t.add("weight",100).setType(b.NUMBER).setDescription("relative weight for sizing of this row in parent row"),t}};l(F,"TYPE","row"),l(F,"attributeDefinitions",F.createAttributeDefinitions());let W=F;class Y{constructor(e,t){l(this,"_windowId"),l(this,"_layout"),l(this,"_rect"),l(this,"_window"),l(this,"_root"),l(this,"_maximizedTabSet"),l(this,"_activeTabSet"),l(this,"_toScreenRectFunction"),this._windowId=e,this._rect=t,this._toScreenRectFunction=e=>e}visitNodes(e){this.root.forEachNode(e,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(e){this._rect=e}set layout(e){this._layout=e}set window(e){this._window=e}set root(e){this._root=e}set maximizedTabSet(e){this._maximizedTabSet=e}set activeTabSet(e){this._activeTabSet=e}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(e){this._toScreenRectFunction=e}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new u(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(e,t,n){const i=t.getwindowsMap().size,r=e.rect?u.fromJson(e.rect):new u(50+50*i,50+50*i,600,400);r.snap(10);const o=new Y(n,r);return o.root=W.fromJson(e.layout,t,o),o}}const j=0,H=99999,X=class e{constructor(){l(this,"attributes"),l(this,"idMap"),l(this,"changeListeners"),l(this,"borders"),l(this,"onAllowDrop"),l(this,"onCreateTabSet"),l(this,"windows"),l(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new I(this),this.windows=new Map,this.rootWindow=new Y(e.MAIN_WINDOW_ID,u.empty()),this.windows.set(e.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(t){var n;let i;switch(t.type){case T.ADD_NODE:{const e=new O(this,t.data.json,!0),n=this.idMap.get(t.data.toNode);(n instanceof P||n instanceof G||n instanceof W)&&(n.drop(e,g.getByName(t.data.location),t.data.index,t.data.select),i=e);break}case T.MOVE_NODE:{const e=this.idMap.get(t.data.fromNode);if(e instanceof O||e instanceof P||e instanceof W){e===this.getMaximizedTabset(e.getWindowId())&&(this.windows.get(e.getWindowId()).maximizedTabSet=void 0);const n=this.idMap.get(t.data.toNode);(n instanceof P||n instanceof G||n instanceof W)&&n.drop(e,g.getByName(t.data.location),t.data.index,t.data.select)}this.removeEmptyWindows();break}case T.DELETE_TAB:{const e=this.idMap.get(t.data.node);e instanceof O&&e.delete(),this.removeEmptyWindows();break}case T.DELETE_TABSET:{const e=this.idMap.get(t.data.node);if(e instanceof P){const t=[...e.getChildren()];for(let e=0;e<t.length;e++){const n=t[e];n.isEnableClose()&&n.delete()}0===e.getChildren().length&&e.delete(),this.tidy()}this.removeEmptyWindows();break}case T.POPOUT_TABSET:{const e=this.idMap.get(t.data.node);if(e instanceof P){const t=e.isMaximized(),n=this.windows.get(e.getWindowId()),i=B(),r=new Y(i,n.toScreenRectFunction(e.getRect())),o={type:"row",children:[]},s=W.fromJson(o,this,r);r.root=s,this.windows.set(i,r),s.drop(e,g.CENTER,0),t&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case T.POPOUT_TAB:{const e=this.idMap.get(t.data.node);if(e instanceof O){const t=B();let n=u.empty();n=e.getParent()instanceof P?e.getParent().getRect():e.getParent().getContentRect();const i=this.windows.get(e.getWindowId()),r=new Y(t,i.toScreenRectFunction(n)),o=B(),s={type:"row",children:[{type:"tabset",id:o}]},a=W.fromJson(s,this,r);r.root=a,this.windows.set(t,r),this.idMap.get(o).drop(e,g.CENTER,0,!0)}this.removeEmptyWindows();break}case T.CLOSE_WINDOW:{const i=this.windows.get(t.data.windowId);i&&(null==(n=this.rootWindow.root)||n.drop(i.root,g.CENTER,-1),this.rootWindow.visitNodes(((t,n)=>{t instanceof W&&t.setWindowId(e.MAIN_WINDOW_ID)})),this.windows.delete(t.data.windowId));break}case T.CREATE_WINDOW:{const e=B(),n=new Y(e,u.fromJson(t.data.rect)),r=W.fromJson(t.data.layout,this,n);n.root=r,this.windows.set(e,n),i=e;break}case T.RENAME_TAB:{const e=this.idMap.get(t.data.node);e instanceof O&&e.setName(t.data.text);break}case T.SELECT_TAB:{const n=this.idMap.get(t.data.tabNode),i=t.data.windowId?t.data.windowId:e.MAIN_WINDOW_ID,r=this.windows.get(i);if(n instanceof O){const e=n.getParent(),t=e.getChildren().indexOf(n);e instanceof G?e.getSelected()===t?e.setSelected(-1):e.setSelected(t):e instanceof P&&(e.getSelected()!==t&&e.setSelected(t),r.activeTabSet=e)}break}case T.SET_ACTIVE_TABSET:{const n=t.data.windowId?t.data.windowId:e.MAIN_WINDOW_ID,i=this.windows.get(n);if(void 0===t.data.tabsetNode)i.activeTabSet=void 0;else{const e=this.idMap.get(t.data.tabsetNode);e instanceof P&&(i.activeTabSet=e)}break}case T.ADJUST_WEIGHTS:{const e=this.idMap.get(t.data.nodeId).getChildren();for(let n=0;n<e.length;n++)e[n].setWeight(t.data.weights[n]);break}case T.ADJUST_BORDER_SPLIT:{const e=this.idMap.get(t.data.node);e instanceof G&&e.setSize(t.data.pos);break}case T.MAXIMIZE_TOGGLE:{const n=t.data.windowId?t.data.windowId:e.MAIN_WINDOW_ID,i=this.windows.get(n),r=this.idMap.get(t.data.node);r instanceof P&&(r===i.maximizedTabSet?i.maximizedTabSet=void 0:(i.maximizedTabSet=r,i.activeTabSet=r));break}case T.UPDATE_MODEL_ATTRIBUTES:this.updateAttrs(t.data.json);break;case T.UPDATE_NODE_ATTRIBUTES:this.idMap.get(t.data.node).updateAttrs(t.data.json)}this.updateIdMap();for(const e of this.changeListeners)e(t);return i}getActiveTabset(t=e.MAIN_WINDOW_ID){const n=this.windows.get(t);return n&&n.activeTabSet&&this.getNodeById(n.activeTabSet.getId())?n.activeTabSet:void 0}getMaximizedTabset(t=e.MAIN_WINDOW_ID){return this.windows.get(t).maximizedTabSet}getRoot(t=e.MAIN_WINDOW_ID){return this.windows.get(t).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(e){this.borders.forEachNode(e);for(const[t,n]of this.windows)n.root.forEachNode(e,0)}visitWindowNodes(t,n){this.windows.has(t)&&(t===e.MAIN_WINDOW_ID&&this.borders.forEachNode(n),this.windows.get(t).visitNodes(n))}getNodeById(e){return this.idMap.get(e)}getFirstTabSet(t=this.windows.get(e.MAIN_WINDOW_ID).root){const n=t.getChildren()[0];return n instanceof P?n:this.getFirstTabSet(n)}static fromJson(t){const n=new e;if(e.attributeDefinitions.fromJson(t.global,n.attributes),t.borders&&(n.borders=I.fromJson(t.borders,n)),t.popouts)for(const e in t.popouts){const i=t.popouts[e],r=Y.fromJson(i,n,e);n.windows.set(e,r)}return n.rootWindow.root=W.fromJson(t.layout,n,n.getwindowsMap().get(e.MAIN_WINDOW_ID)),n.tidy(),n}toJson(){const t={};e.attributeDefinitions.toJson(t,this.attributes),this.visitNodes((e=>{e.fireEvent("save",{})}));const n={};for(const[t,i]of this.windows)t!==e.MAIN_WINDOW_ID&&(n[t]=i.toJson());return{global:t,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:n}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(e){this.onAllowDrop=e}setOnCreateTabSet(e){this.onCreateTabSet=e}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){const t=this.changeListeners.findIndex((t=>t===e));-1!==t&&this.changeListeners.splice(t,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){const t=new Set;for(const[n]of this.windows)if(n!==e.MAIN_WINDOW_ID){let e=0;this.visitWindowNodes(n,(t=>{t instanceof O&&e++})),0===e&&t.add(n)}for(const e of t)this.windows.delete(e)}setActiveTabset(e,t){const n=this.windows.get(t);n&&(n.activeTabSet=e||void 0)}setMaximizedTabset(e,t){const n=this.windows.get(t);n&&(n.maximizedTabSet=e||void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes((e=>{this.idMap.set(e.getId(),e)}))}addNode(e){const t=e.getId();if(this.idMap.has(t))throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);this.idMap.set(t,e)}findDropTargetNode(t,n,i,r){let o=this.windows.get(t).root.findDropTargetNode(t,n,i,r);return void 0===o&&t===e.MAIN_WINDOW_ID&&(o=this.borders.findDropTargetNode(n,i,r)),o}tidy(){for(const[e,t]of this.windows)t.root.tidy()}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}nextUniqueId(){return"#"+B()}getAttribute(e){return this.attributes[e]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){e.attributeDefinitions.pairAttributes("RowNode",W.getAttributeDefinitions()),e.attributeDefinitions.pairAttributes("TabSetNode",P.getAttributeDefinitions()),e.attributeDefinitions.pairAttributes("TabNode",O.getAttributeDefinitions()),e.attributeDefinitions.pairAttributes("BorderNode",G.getAttributeDefinitions());const t=[];t.push(e.attributeDefinitions.toTypescriptInterface("Global",void 0)),t.push(W.getAttributeDefinitions().toTypescriptInterface("Row",e.attributeDefinitions)),t.push(P.getAttributeDefinitions().toTypescriptInterface("TabSet",e.attributeDefinitions)),t.push(O.getAttributeDefinitions().toTypescriptInterface("Tab",e.attributeDefinitions)),t.push(G.getAttributeDefinitions().toTypescriptInterface("Border",e.attributeDefinitions)),console.log(t.join("\n"))}static createAttributeDefinitions(){const e=new _;return e.add("enableEdgeDock",!0).setType(b.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),e.add("rootOrientationVertical",!1).setType(b.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),e.add("enableRotateBorderIcons",!0).setType(b.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),e.add("splitterSize",8).setType(b.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),e.add("splitterExtra",0).setType(b.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),e.add("splitterEnableHandle",!1).setType(b.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),e.add("tabEnableClose",!0).setType(b.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnablePopout",!1).setType(b.BOOLEAN).setAlias("tabEnableFloat"),e.add("tabEnablePopoutIcon",!0).setType(b.BOOLEAN),e.add("tabEnablePopoutOverlay",!1).setType(b.BOOLEAN),e.add("tabEnableDrag",!0).setType(b.BOOLEAN),e.add("tabEnableRename",!0).setType(b.BOOLEAN),e.add("tabContentClassName",void 0).setType(b.STRING),e.add("tabClassName",void 0).setType(b.STRING),e.add("tabIcon",void 0).setType(b.STRING),e.add("tabEnableRenderOnDemand",!0).setType(b.BOOLEAN),e.add("tabDragSpeed",.3).setType(b.NUMBER),e.add("tabBorderWidth",-1).setType(b.NUMBER),e.add("tabBorderHeight",-1).setType(b.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(b.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(b.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(b.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(b.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(b.BOOLEAN),e.add("tabSetEnableClose",!1).setType(b.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(b.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(b.BOOLEAN),e.add("tabSetEnableActiveIcon",!1).setType(b.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(b.STRING),e.add("tabSetEnableTabStrip",!0).setType(b.BOOLEAN),e.add("tabSetEnableTabWrap",!1).setType(b.BOOLEAN),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabMinWidth",j).setType(b.NUMBER),e.add("tabMinHeight",j).setType(b.NUMBER),e.add("tabSetMinWidth",j).setType(b.NUMBER),e.add("tabSetMinHeight",j).setType(b.NUMBER),e.add("tabMaxWidth",H).setType(b.NUMBER),e.add("tabMaxHeight",H).setType(b.NUMBER),e.add("tabSetMaxWidth",H).setType(b.NUMBER),e.add("tabSetMaxHeight",H).setType(b.NUMBER),e.add("tabSetEnableTabScrollbar",!1).setType(b.BOOLEAN),e.add("borderSize",200).setType(b.NUMBER),e.add("borderMinSize",j).setType(b.NUMBER),e.add("borderMaxSize",H).setType(b.NUMBER),e.add("borderEnableDrop",!0).setType(b.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(b.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(b.BOOLEAN),e.add("borderClassName",void 0).setType(b.STRING),e.add("borderEnableAutoHide",!1).setType(b.BOOLEAN),e.add("borderEnableTabScrollbar",!1).setType(b.BOOLEAN),e}};l(X,"MAIN_WINDOW_ID","__main_window_id__"),l(X,"attributeDefinitions",X.createAttributeDefinitions());let k=X;const z=class e extends w{constructor(t,n,i){super(i),l(this,"contentRect",u.empty()),l(this,"tabHeaderRect",u.empty()),l(this,"location"),this.location=t,this.attributes.id=`border_${t.getName()}`,e.attributeDefinitions.fromJson(n,this.attributes),i.addNode(this)}static fromJson(t,n){const i=g.getByName(t.location),r=new e(i,t,n);return t.children&&(r.children=t.children.map((e=>{const t=O.fromJson(e,n);return t.setParent(r),t}))),r}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===c.HORZ}getSize(){const e=this.getAttr("size"),t=this.getSelected();if(-1===t)return e;{const n=this.children[t],i=this.isHorizontal()?n.getAttr("borderWidth"):n.getAttr("borderHeight");return-1===i?e:i}}getMinSize(){const e=this.getSelectedNode();let t=this.getAttr("minSize");if(e){const n=this.isHorizontal()?e.getMinWidth():e.getMinHeight();t=Math.max(t,n)}return t}getMaxSize(){const e=this.getSelectedNode();let t=this.getAttr("maxSize");if(e){const n=this.isHorizontal()?e.getMaxWidth():e.getMaxHeight();t=Math.min(t,n)}return t}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(-1!==this.getSelected())return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){const t={};return e.attributeDefinitions.toJson(t,this.attributes),t.location=this.location.getName(),t.children=this.children.map((e=>e.toJson())),t}isAutoSelectTab(e){return null==e&&(e=-1!==this.getSelected()),e?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(e){this.attributes.selected=e}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(e){this.tabHeaderRect=e}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(e){this.contentRect=e}isEnableDrop(){return this.getAttr("enableDrop")}setSize(e){const t=this.getSelected();if(-1===t)this.attributes.size=e;else{const n=this.children[t];-1===(this.isHorizontal()?n.getAttr("borderWidth"):n.getAttr("borderHeight"))?this.attributes.size=e:this.isHorizontal()?n.setBorderWidth(e):n.setBorderHeight(e)}}updateAttrs(t){e.attributeDefinitions.update(t,this.attributes)}remove(e){const t=this.removeChild(e);-1!==this.getSelected()&&M(this,t)}canDrop(e,t,n){if(!(e instanceof O))return;let i;const r=g.CENTER;if(this.tabHeaderRect.contains(t,n)){if(this.location.orientation===c.VERT)if(this.children.length>0){let e=this.children[0],n=e.getTabRect();const o=n.y,s=n.height;let a=this.tabHeaderRect.x,l=0;for(let d=0;d<this.children.length;d++){if(e=this.children[d],n=e.getTabRect(),l=n.x+n.width/2,t>=a&&t<l){const e=new u(n.x-2,o,3,s);i=new E(this,e,r,d,f.FLEXLAYOUT__OUTLINE_RECT);break}a=l}if(null==i){const e=new u(n.getRight()-2,o,3,s);i=new E(this,e,r,this.children.length,f.FLEXLAYOUT__OUTLINE_RECT)}}else{const e=new u(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);i=new E(this,e,r,0,f.FLEXLAYOUT__OUTLINE_RECT)}else if(this.children.length>0){let e=this.children[0],t=e.getTabRect();const o=t.x,s=t.width;let a=this.tabHeaderRect.y,l=0;for(let d=0;d<this.children.length;d++){if(e=this.children[d],t=e.getTabRect(),l=t.y+t.height/2,n>=a&&n<l){const e=new u(o,t.y-2,s,3);i=new E(this,e,r,d,f.FLEXLAYOUT__OUTLINE_RECT);break}a=l}if(null==i){const e=new u(o,t.getBottom()-2,s,3);i=new E(this,e,r,this.children.length,f.FLEXLAYOUT__OUTLINE_RECT)}}else{const e=new u(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);i=new E(this,e,r,0,f.FLEXLAYOUT__OUTLINE_RECT)}if(!e.canDockInto(e,i))return}else if(-1!==this.getSelected()&&this.contentRect.contains(t,n)){const t=this.contentRect;if(i=new E(this,t,r,-1,f.FLEXLAYOUT__OUTLINE_RECT),!e.canDockInto(e,i))return}return i}drop(t,n,i,r){let o=0;const s=t.getParent();void 0!==s&&(o=s.removeChild(t),s!==this&&s instanceof e&&s.getSelected()===o?s.setSelected(-1):M(s,o)),t instanceof O&&s===this&&o<i&&i>0&&i--;let a=i;-1===a&&(a=this.children.length),t instanceof O&&this.addChild(t,a),(r||!1!==r&&this.isAutoSelectTab())&&this.setSelected(a),this.model.tidy()}getSplitterBounds(e,t=!1){const n=[0,0],i=t?this.getMinSize():0,r=t?this.getMaxSize():99999,o=this.model.getRoot(k.MAIN_WINDOW_ID),s=o.getRect(),a=this.model.getSplitterSize();if(this.location===g.TOP){n[0]=this.tabHeaderRect.getBottom()+i;const e=this.tabHeaderRect.getBottom()+r;n[1]=Math.max(n[0],s.getBottom()-o.getMinHeight()-a),n[1]=Math.min(n[1],e)}else if(this.location===g.LEFT){n[0]=this.tabHeaderRect.getRight()+i;const e=this.tabHeaderRect.getRight()+r;n[1]=Math.max(n[0],s.getRight()-o.getMinWidth()-a),n[1]=Math.min(n[1],e)}else if(this.location===g.BOTTOM){n[1]=this.tabHeaderRect.y-i-a;const e=this.tabHeaderRect.y-r-a;n[0]=Math.min(n[1],s.y+o.getMinHeight()),n[0]=Math.max(n[0],e)}else if(this.location===g.RIGHT){n[1]=this.tabHeaderRect.x-i-a;const e=this.tabHeaderRect.x-r-a;n[0]=Math.min(n[1],s.x+o.getMinWidth()),n[0]=Math.max(n[0],e)}return n}calculateSplit(e,t){const n=this.getSplitterBounds(t);return this.location===g.BOTTOM||this.location===g.RIGHT?Math.max(0,n[1]-t):Math.max(0,t-n[0])}getAttributeDefinitions(){return e.attributeDefinitions}static getAttributeDefinitions(){return e.attributeDefinitions}static createAttributeDefinitions(){const t=new _;return t.add("type",e.TYPE,!0).setType(b.STRING).setFixed(),t.add("selected",-1).setType(b.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),t.add("show",!0).setType(b.BOOLEAN).setDescription("show/hide this border"),t.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),t.addInherited("enableDrop","borderEnableDrop").setType(b.BOOLEAN).setDescription("whether tabs can be dropped into this border"),t.addInherited("className","borderClassName").setType(b.STRING).setDescription("class applied to tab button"),t.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(b.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),t.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(b.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),t.addInherited("size","borderSize").setType(b.NUMBER).setDescription("size of the tab area when selected"),t.addInherited("minSize","borderMinSize").setType(b.NUMBER).setDescription("the minimum size of the tab area"),t.addInherited("maxSize","borderMaxSize").setType(b.NUMBER).setDescription("the maximum size of the tab area"),t.addInherited("enableAutoHide","borderEnableAutoHide").setType(b.BOOLEAN).setDescription("hide border if it has zero tabs"),t.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(b.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),t}};l(z,"TYPE","border"),l(z,"attributeDefinitions",z.createAttributeDefinitions());let G=z,V=!1;const J=e=>{const{layout:t,node:n,index:o,horizontal:s}=e,[a,l]=r.useState(!1),d=r.useRef(null),h=r.useRef(null),g=r.useRef([]),m=r.useRef(void 0),p=r.useRef(void 0),v=r.useRef(0),b=r.useRef(0),_=r.useRef({initialSizes:[],sum:0,startPosition:0}),E=n.getModel().getSplitterSize();let I=n.getModel().getSplitterExtra();x()||(I=Math.max(20,I+E)-E),r.useEffect((()=>{var e,t;return null==(e=d.current)||e.addEventListener("touchstart",w,{passive:!1}),null==(t=h.current)||t.addEventListener("touchstart",w,{passive:!1}),()=>{var e,t;null==(e=d.current)||e.removeEventListener("touchstart",w),null==(t=h.current)||t.removeEventListener("touchstart",w)}}),[]);const w=e=>{e.preventDefault(),e.stopImmediatePropagation()},y=e=>{var i;e.stopPropagation(),n instanceof W&&(_.current=n.getSplitterInitials(o)),L(!1,t.getCurrentDocument()),N(e.currentTarget.ownerDocument,e,R,A,O),g.current=n.getSplitterBounds(o,!0);const r=t.getRootDiv();m.current=t.getCurrentDocument().createElement("div"),m.current.style.flexDirection=s?"row":"column",m.current.className=t.getClassName(f.FLEXLAYOUT__SPLITTER_DRAG),m.current.style.cursor=n.getOrientation()===c.VERT?"ns-resize":"ew-resize",n.getModel().isSplitterEnableHandle()&&(p.current=t.getCurrentDocument().createElement("div"),p.current.className=C(f.FLEXLAYOUT__SPLITTER_HANDLE)+" "+C(s?f.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:f.FLEXLAYOUT__SPLITTER_HANDLE_VERT),m.current.appendChild(p.current));const a=null==(i=d.current)?void 0:i.getBoundingClientRect(),h=new u(a.x-t.getDomRect().x,a.y-t.getDomRect().y,a.width,a.height);v.current=e.clientX-a.x,b.current=e.clientY-a.y,h.positionElement(m.current),r&&r.appendChild(m.current),l(!0),V=!0},O=()=>{const e=t.getRootDiv();e&&m.current&&e.removeChild(m.current),m.current=void 0,l(!1),V=!1},R=(e,i)=>{if(m.current){const r=t.getDomRect();if(!r)return;n.getOrientation()===c.VERT?m.current.style.top=S(i-r.y-b.current)+"px":m.current.style.left=S(e-r.x-v.current)+"px",t.isRealtimeResize()&&D()}},A=()=>{if(m.current){D();const e=t.getRootDiv();e&&m.current&&e.removeChild(m.current),m.current=void 0}L(!0,t.getCurrentDocument()),l(!1),V=!1},D=e=>{(()=>{if(m.current){let e=0;if(e=n.getOrientation()===c.VERT?m.current.offsetTop:m.current.offsetLeft,n instanceof G){const i=n.calculateSplit(n,e);t.doAction(T.adjustBorderSplit(n.getId(),i))}else{const i=_.current,r=n.calculateSplit(o,e,i.initialSizes,i.sum,i.startPosition);t.doAction(T.adjustWeights(n.getId(),r))}}})()},S=e=>{const t=g.current;let n=e;return e<t[0]&&(n=t[0]),e>t[1]&&(n=t[1]),n},C=t.getClassName,M={cursor:s?"ew-resize":"ns-resize",flexDirection:s?"column":"row"};let B,U=C(f.FLEXLAYOUT__SPLITTER)+" "+C(f.FLEXLAYOUT__SPLITTER_+n.getOrientation().getName());if(n instanceof G?U+=" "+C(f.FLEXLAYOUT__SPLITTER_BORDER):void 0!==n.getModel().getMaximizedTabset(t.getWindowId())&&(M.display="none"),s?(M.width=E+"px",M.minWidth=E+"px"):(M.height=E+"px",M.minHeight=E+"px"),!a&&n.getModel().isSplitterEnableHandle()&&(B=(0,i.jsx)("div",{className:C(f.FLEXLAYOUT__SPLITTER_HANDLE)+" "+C(s?f.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:f.FLEXLAYOUT__SPLITTER_HANDLE_VERT)})),0===I)return(0,i.jsx)("div",{className:U,style:M,ref:d,"data-layout-path":n.getPath()+"/s"+(o-1),onPointerDown:y,children:B});{const e={};n.getOrientation()===c.HORZ?(e.height="100%",e.width=E+I+"px",e.cursor="ew-resize"):(e.height=E+I+"px",e.width="100%",e.cursor="ns-resize");const t=C(f.FLEXLAYOUT__SPLITTER_EXTRA);return(0,i.jsx)("div",{className:U,style:M,ref:d,"data-layout-path":n.getPath()+"/s"+(o-1),onPointerDown:y,children:(0,i.jsx)("div",{style:e,ref:h,className:t,onPointerDown:y})})}};function Z(e){const{layout:t,border:n,show:o}=e,s=r.useRef(null),a=r.useRef(void 0);r.useLayoutEffect((()=>{const e=t.getBoundingClientRect(s.current);!isNaN(e.x)&&e.width>0&&(n.getContentRect().equals(e)||(n.setContentRect(e),V?(a.current&&clearTimeout(a.current),a.current=setTimeout((()=>{t.redrawInternal("border content rect "+e),a.current=void 0}),50)):t.redrawInternal("border content rect "+e)))}));let l=!0;const d={};n.getOrientation()===c.HORZ?(d.width=n.getSize(),d.minWidth=n.getMinSize(),d.maxWidth=n.getMaxSize()):(d.height=n.getSize(),d.minHeight=n.getMinSize(),d.maxHeight=n.getMaxSize(),l=!1),d.display=o?"flex":"none";const u=t.getClassName(f.FLEXLAYOUT__BORDER_TAB_CONTENTS);return n.getLocation()===g.LEFT||n.getLocation()===g.TOP?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:s,style:d,className:u}),o&&(0,i.jsx)(J,{layout:t,node:n,index:0,horizontal:l})]}):(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(J,{layout:t,node:n,index:0,horizontal:l}),(0,i.jsx)("div",{ref:s,style:d,className:u})]})}var q=(e=>(e[e.Visible=1]="Visible",e[e.Always=2]="Always",e[e.Selected=3]="Selected",e))(q||{});const K=e=>{const{layout:t,node:n,selected:o,border:s,icons:a,path:l}=e,d=r.useRef(null),c=r.useRef(null),u=e=>{(()=>{const e=n.getCloseType();return!!(o||e===q.Always||e===q.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)})()&&(t.doAction(T.deleteTab(n.getId())),e.stopPropagation())},h=e=>{e.stopPropagation()};r.useLayoutEffect((()=>{n.setTabRect(t.getBoundingClientRect(d.current)),t.getEditingTab()===n&&c.current.select()}));const g=t.getClassName;let p=g(f.FLEXLAYOUT__BORDER_BUTTON)+" "+g(f.FLEXLAYOUT__BORDER_BUTTON_+s);p+=o?" "+g(f.FLEXLAYOUT__BORDER_BUTTON__SELECTED):" "+g(f.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),void 0!==n.getClassName()&&(p+=" "+n.getClassName());let v=0;!1===n.getModel().isEnableRotateBorderIcons()&&("left"===s?v=90:"right"===s&&(v=-90));const b=R(t,n,v);let _=b.content?(0,i.jsx)("div",{className:g(f.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:b.content}):null;const E=b.leading?(0,i.jsx)("div",{className:g(f.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:b.leading}):null;if(t.getEditingTab()===n&&(_=(0,i.jsx)("input",{ref:c,className:g(f.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":l+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:e=>{"Escape"===e.code?t.setEditingTab(void 0):"Enter"!==e.code&&"NumpadEnter"!==e.code||(t.setEditingTab(void 0),t.doAction(T.renameTab(n.getId(),e.target.value)))},onPointerDown:e=>{e.stopPropagation()}})),n.isEnableClose()){const e=t.i18nName(m.Close_Tab);b.buttons.push((0,i.jsx)("div",{"data-layout-path":l+"/button/close",title:e,className:g(f.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:h,onClick:u,children:"function"==typeof a.close?a.close(n):a.close},"close"))}return(0,i.jsxs)("div",{ref:d,"data-layout-path":l,className:p,onClick:()=>{t.doAction(T.selectTab(n.getId()))},onAuxClick:e=>{A(e)&&t.auxMouseClick(n,e)},onContextMenu:e=>{t.showContextMenu(n,e)},title:n.getHelpText(),draggable:!0,onDragStart:e=>{n.isEnableDrag()?(e.stopPropagation(),t.setDragNode(e.nativeEvent,n)):e.preventDefault()},onDragEnd:e=>{e.stopPropagation(),t.clearDragMain()},children:[E,_,b.buttons]})},$=e=>{const{layout:t,node:n}=e,r=t.getClassName,o=r(f.FLEXLAYOUT__TAB_BUTTON_STAMP),s=R(t,n),a=s.content?(0,i.jsx)("div",{className:r(f.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:s.content}):n.getNameForOverflowMenu(),l=s.leading?(0,i.jsx)("div",{className:r(f.FLEXLAYOUT__TAB_BUTTON_LEADING),children:s.leading}):null;return(0,i.jsxs)("div",{className:o,title:n.getHelpText(),children:[l,a]})};function Q(e,t,n,r,o){const s=o.getRootDiv(),a=o.getClassName,l=e.ownerDocument,d=e.getBoundingClientRect(),c=(null==s?void 0:s.getBoundingClientRect())??new DOMRect(0,0,100,100),u=l.createElement("div");u.className=a(f.FLEXLAYOUT__POPUP_MENU_CONTAINER),d.left<c.left+c.width/2?u.style.left=d.left-c.left+"px":u.style.right=c.right-d.right+"px",d.top<c.top+c.height/2?u.style.top=d.top-c.top+"px":u.style.bottom=c.bottom-d.bottom+"px",o.showOverlay(!0),s&&s.appendChild(u);const h=()=>{o.hideControlInPortal(),o.showOverlay(!1),s&&s.removeChild(u),u.removeEventListener("pointerdown",g),l.removeEventListener("pointerdown",m)},g=e=>{e.stopPropagation()},m=e=>{h()};u.addEventListener("pointerdown",g),l.addEventListener("pointerdown",m),o.showControlInPortal((0,i.jsx)(ee,{currentDocument:l,parentNode:t,onSelect:r,onHide:h,items:n,classNameMapper:a,layout:o}),u)}const ee=e=>{const{parentNode:t,items:n,onHide:o,onSelect:s,classNameMapper:a,layout:l}=e,d=(0,r.useRef)(null);(0,r.useEffect)((()=>{d.current&&d.current.focus()}),[]);const c=e=>{l.clearDragMain()},u=n.map(((e,n)=>{let r=a(f.FLEXLAYOUT__POPUP_MENU_ITEM);return t.getSelected()===e.index&&(r+=" "+a(f.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),(0,i.jsx)("div",{className:r,"data-layout-path":"/popup-menu/tb"+n,onClick:t=>((e,t)=>{s(e),o(),t.stopPropagation()})(e,t),draggable:!0,onDragStart:t=>{return n=t,i=e.node,n.stopPropagation(),l.setDragNode(n.nativeEvent,i),void setTimeout((()=>{o()}),0);var n,i},onDragEnd:c,title:e.node.getHelpText(),children:(0,i.jsx)($,{node:e.node,layout:l})},e.index)}));return(0,i.jsx)("div",{className:a(f.FLEXLAYOUT__POPUP_MENU),ref:d,tabIndex:0,onKeyDown:e=>{"Escape"===e.key&&o()},"data-layout-path":"/popup-menu",children:u})},te=(e,t,n,i,o,s)=>{const[a,l]=r.useState([]),[d,u]=r.useState(!1),[h,g]=r.useState(!1),m=r.useRef(null),f=r.useRef(!1),p=r.useRef(void 0),v=r.useRef([]),T=r.useRef(0),b=r.useRef(!1);v.current=a,r.useLayoutEffect((()=>{i.current&&C(0)}),[t.getId()]),r.useLayoutEffect((()=>{f.current=!1}),[t.getSelectedNode(),t.getRect().width,t.getRect().height]),r.useLayoutEffect((()=>{O(),!1===f.current&&function(){const n=t.getSelectedNode();if(n&&i.current){const t=e.getBoundingClientRect(i.current),r=n.getTabRect();let o=R(t)-R(r);o>0||D(r)>D(t)?(C(M(i.current)-o),b.current=!0):(o=A(r)-A(t),o>0&&(C(M(i.current)+o),b.current=!0))}}(),_(),E()}));const _=()=>{if(i.current&&o.current){const e=i.current,t=o.current,r=L(e),s=S(e),a=M(e);if(s>r&&s>0){let e=r*r/s,i=0;e<20&&(i=20-e,e=20);const o=a*(r-i)/s;n===c.HORZ?(t.style.width=e+"px",t.style.left=o+"px"):(t.style.height=e+"px",t.style.top=o+"px"),t.style.display="block"}else t.style.display="none";n===c.HORZ?t.style.bottom="0px":t.style.right="0px"}},E=()=>{const e=x().length>0;e!==d&&u(e),void 0===p.current&&(p.current=setTimeout((()=>{const e=x();var t,n;t=e,n=v.current,t.length===n.length&&t.every(((e,t)=>e===n[t]))||l(e),p.current=void 0}),100))},I=(e,t)=>{if(i.current&&o.current){const r=i.current,s=o.current,a=L(r),l=S(r),d=L(s),u=r.getBoundingClientRect();let h=0;h=n===c.HORZ?e-u.x-T.current:t-u.y-T.current,h=Math.max(0,Math.min(l-d,h)),a>0&&C(h*l/a)}},w=()=>{},y=()=>{},O=()=>{if(i.current){const e=i.current.firstElementChild,t=h?10:0,n=L(e)+t>L(i.current);n!==h&&g(n)}},x=()=>{const e=[];if(i.current){const t=i.current,n=t.getBoundingClientRect(),r=R(n)-1,o=A(n)+1,a=t.firstElementChild;let l=0;Array.from(a.children).forEach((t=>{const n=t.getBoundingClientRect();t.classList.contains(s)&&((R(n)<r||A(n)>o)&&e.push(l),l++)}))}return e},R=e=>n===c.HORZ?e.x:e.y,A=e=>n===c.HORZ?e.right:e.bottom,L=e=>n===c.HORZ?e.clientWidth:e.clientHeight,D=e=>n===c.HORZ?e.width:e.height,S=e=>n===c.HORZ?e.scrollWidth:e.scrollHeight,C=e=>{n===c.HORZ?i.current.scrollLeft=e:i.current.scrollTop=e},M=e=>n===c.HORZ?e.scrollLeft:e.scrollTop;return{selfRef:m,userControlledPositionRef:f,onScroll:()=>{b.current||(f.current=!0),b.current=!1,_(),E()},onScrollPointerDown:e=>{var t;e.stopPropagation(),o.current.setPointerCapture(e.pointerId);const i=null==(t=o.current)?void 0:t.getBoundingClientRect();n===c.HORZ?T.current=e.clientX-i.x:T.current=e.clientY-i.y,N(e.currentTarget.ownerDocument,e,I,w,y)},hiddenTabs:a,onMouseWheel:e=>{if(i.current){if(0===t.getChildren().length)return;let n=0;if(Math.abs(e.deltaY)>0){n=-e.deltaY,1===e.deltaMode&&(n*=40);const t=M(i.current)-n,r=S(i.current)-L(i.current),o=Math.max(0,Math.min(r,t));C(o),e.stopPropagation()}}},isDockStickyButtons:h,isShowHiddenTabs:d}},ne=e=>{const{border:t,layout:n,size:o}=e,s=r.useRef(null),a=r.useRef(null),l=r.useRef(null),d=r.useRef(null),u=r.useRef(null),h=n.getIcons();r.useLayoutEffect((()=>{t.setTabHeaderRect(n.getBoundingClientRect(p.current))}));const{selfRef:p,userControlledPositionRef:v,onScroll:b,onScrollPointerDown:_,hiddenTabs:E,onMouseWheel:I,isDockStickyButtons:w,isShowHiddenTabs:y}=te(n,t,c.flip(t.getOrientation()),u,a,n.getClassName(f.FLEXLAYOUT__BORDER_BUTTON)),O=e=>{A(e)&&n.auxMouseClick(t,e)},x=e=>{e.stopPropagation()},R=e=>{const i=n.getShowOverflowMenu(),r=E.map((e=>({index:e,node:t.getChildren()[e]})));void 0!==i?i(t,e,r,L):Q(l.current,t,r,L,n),e.stopPropagation()},L=e=>{n.doAction(T.selectTab(e.node.getId())),v.current=!1},D=e=>{const i=t.getChildren()[t.getSelected()];void 0!==i&&n.doAction(T.popoutTab(i.getId())),e.stopPropagation()},N=n.getClassName,S=[],C=e=>{const r=t.getSelected()===e,o=t.getChildren()[e];S.push((0,i.jsx)(K,{layout:n,border:t.getLocation().getName(),node:o,path:t.getPath()+"/tb"+e,selected:r,icons:h},o.getId())),e<t.getChildren().length-1&&S.push((0,i.jsx)("div",{className:N(f.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+e))};for(let e=0;e<t.getChildren().length;e++)C(e);let M,B=N(f.FLEXLAYOUT__BORDER)+" "+N(f.FLEXLAYOUT__BORDER_+t.getLocation().getName());void 0!==t.getClassName()&&(B+=" "+t.getClassName());let U=[],P=[];const F={leading:M,buttons:U,stickyButtons:P,overflowPosition:void 0};if(n.customizeTabSet(t,F),M=F.leading,P=F.stickyButtons,U=F.buttons,void 0===F.overflowPosition&&(F.overflowPosition=P.length),P.length>0&&(w?U=[...P,...U]:S.push((0,i.jsx)("div",{ref:d,onPointerDown:x,onDragStart:e=>{e.preventDefault()},className:N(f.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:P},"sticky_buttons_container"))),y){const e=n.i18nName(m.Overflow_Menu_Tooltip);let r;if("function"==typeof h.more){const e=E.map((e=>({index:e,node:t.getChildren()[e]})));r=h.more(t,e)}else r=(0,i.jsxs)(i.Fragment,{children:[h.more,(0,i.jsx)("div",{className:N(f.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:E.length>0?E.length:""})]});U.splice(Math.min(F.overflowPosition,U.length),0,(0,i.jsx)("button",{ref:l,className:N(f.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+N(f.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+N(f.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+t.getLocation().getName()),title:e,onClick:R,onPointerDown:x,children:r},"overflowbutton"))}const W=t.getSelected();if(-1!==W){const e=t.getChildren()[W];if(void 0!==e&&n.isSupportsPopout()&&e.isEnablePopout()){const t=n.i18nName(m.Popout_Tab);U.push((0,i.jsx)("button",{title:t,className:N(f.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+N(f.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:D,onPointerDown:x,children:"function"==typeof h.popout?h.popout(e):h.popout},"popout"))}}const Y=(0,i.jsx)("div",{ref:s,className:N(f.FLEXLAYOUT__BORDER_TOOLBAR)+" "+N(f.FLEXLAYOUT__BORDER_TOOLBAR_+t.getLocation().getName()),children:U},"toolbar");let j={},H={};const X=o-1;let k,z;return t.getLocation()===g.LEFT?(j={right:"100%",top:0},H={width:X,overflowY:"auto"}):t.getLocation()===g.RIGHT?(j={left:"100%",top:0},H={width:X,overflowY:"auto"}):(j={left:0},H={height:X,overflowX:"auto"}),t.isEnableTabScrollbar()&&(k=(0,i.jsx)("div",{ref:a,className:N(f.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:_})),M&&(z=(0,i.jsx)("div",{className:N(f.FLEXLAYOUT__BORDER_LEADING),children:M})),(0,i.jsxs)("div",{ref:p,style:{display:"flex",flexDirection:t.getOrientation()===c.VERT?"row":"column"},className:B,"data-layout-path":t.getPath(),onClick:O,onAuxClick:O,onContextMenu:e=>{n.showContextMenu(t,e)},onWheel:I,children:[z,(0,i.jsxs)("div",{className:N(f.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,i.jsx)("div",{ref:u,className:N(f.FLEXLAYOUT__BORDER_INNER)+" "+N(f.FLEXLAYOUT__BORDER_INNER_+t.getLocation().getName()),style:H,onScroll:b,children:(0,i.jsx)("div",{style:j,className:N(f.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+N(f.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+t.getLocation().getName()),children:S})}),k]}),Y]})},ie=e=>{const{layout:t,node:n}=e,o=r.useRef(null);r.useEffect((()=>{n.setTabStamp(o.current)}),[n,o.current]);const s=(0,t.getClassName)(f.FLEXLAYOUT__DRAG_RECT);return(0,i.jsx)("div",{ref:o,className:s,children:(0,i.jsx)($,{layout:t,node:n},n.getId())})},re=e=>{const{title:t,layout:n,layoutWindow:i,url:s,onCloseWindow:a,onSetWindow:l,children:d}=e,c=r.useRef(null),[u,h]=r.useState(void 0),g=new Map;return r.useLayoutEffect((()=>{if(!c.current){const e=i.windowId,n=i.rect;c.current=window.open(s,e,`left=${n.x},top=${n.y},width=${n.width},height=${n.height}`),c.current?(i.window=c.current,l(i,c.current),window.addEventListener("beforeunload",(()=>{if(c.current){const e=c.current;c.current=null,e.close()}})),c.current.addEventListener("load",(()=>{if(c.current){c.current.focus(),c.current.resizeTo(n.width,n.height),c.current.moveTo(n.x,n.y);const e=c.current.document;e.title=t;const r=e.createElement("div");r.className=f.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,e.body.appendChild(r),function(e,t){const n=[],i=document.querySelectorAll('style, link[rel="stylesheet"]');for(const r of i)oe(e,r,t,n);return Promise.all(n)}(e,g).then((()=>{h(r)}));const o=new MutationObserver((t=>function(e,t,n){for(const i of e)if("childList"===i.type){for(const e of i.addedNodes)(e instanceof HTMLLinkElement||e instanceof HTMLStyleElement)&&oe(t,e,n);for(const e of i.removedNodes)if(e instanceof HTMLLinkElement||e instanceof HTMLStyleElement){const i=n.get(e);i&&t.head.removeChild(i)}}}(t,e,g)));o.observe(document.head,{childList:!0}),c.current.addEventListener("beforeunload",(()=>{c.current&&(a(i),c.current=null,o.disconnect())}))}}))):(console.warn(`Unable to open window ${s}`),a(i))}return()=>{var e;n.getModel().getwindowsMap().has(i.windowId)||(null==(e=c.current)||e.close(),c.current=null)}}),[]),void 0!==u?(0,o.createPortal)(d,u):null};function oe(e,t,n,i){if(t instanceof HTMLLinkElement){const r=t.cloneNode(!0);e.head.appendChild(r),n.set(t,r),i&&i.push(new Promise((e=>{r.onload=()=>e(!0)})))}else if(t instanceof HTMLStyleElement)try{const i=t.cloneNode(!0);e.head.appendChild(i),n.set(t,i)}catch(e){}}const se={width:"1em",height:"1em",display:"flex",alignItems:"center"},ae=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:se,viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,i.jsx)("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),le=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:se,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,i.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,i.jsx)("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),de=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:se,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,i.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,i.jsx)("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),ce=()=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:(0,i.jsx)("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),ue=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:se,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[(0,i.jsx)("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),(0,i.jsx)("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),he=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:se,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[(0,i.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,i.jsx)("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),ge=()=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:se,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:(0,i.jsx)("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),me=e=>{const{layout:t,show:n}=e;return(0,i.jsx)("div",{className:t.getClassName(f.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:n?"flex":"none"}})},fe=e=>{const{layout:t,node:n,selected:o,path:s}=e,a=r.useRef(null),l=r.useRef(null),d=t.getIcons();r.useLayoutEffect((()=>{n.setTabRect(t.getBoundingClientRect(a.current)),t.getEditingTab()===n&&l.current.select()}));const c=e=>{e.target!==l.current&&(t.getCurrentDocument().body.removeEventListener("pointerdown",c),t.setEditingTab(void 0))},u=e=>{(()=>{const e=n.getCloseType();return!!(o||e===q.Always||e===q.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)})()&&(t.doAction(T.deleteTab(n.getId())),e.stopPropagation())},h=e=>{e.stopPropagation()},g=t.getClassName,p=n.getParent(),v=p.isEnableSingleTabStretch()&&1===p.getChildren().length,b=v?f.FLEXLAYOUT__TAB_BUTTON_STRETCH:f.FLEXLAYOUT__TAB_BUTTON;let _=g(b);_+=" "+g(b+"_"+p.getTabLocation()),v||(_+=o?" "+g(b+"--selected"):" "+g(b+"--unselected")),void 0!==n.getClassName()&&(_+=" "+n.getClassName());const E=R(t,n);let I=E.content?(0,i.jsx)("div",{className:g(f.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:E.content}):null;const w=E.leading?(0,i.jsx)("div",{className:g(f.FLEXLAYOUT__TAB_BUTTON_LEADING),children:E.leading}):null;if(t.getEditingTab()===n&&(I=(0,i.jsx)("input",{ref:l,className:g(f.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":s+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:e=>{"Escape"===e.code?t.setEditingTab(void 0):"Enter"!==e.code&&"NumpadEnter"!==e.code||(t.setEditingTab(void 0),t.doAction(T.renameTab(n.getId(),e.target.value)))},onPointerDown:e=>{e.stopPropagation()}})),n.isEnableClose()&&!v){const e=t.i18nName(m.Close_Tab);E.buttons.push((0,i.jsx)("div",{"data-layout-path":s+"/button/close",title:e,className:g(f.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:h,onClick:u,children:"function"==typeof d.close?d.close(n):d.close},"close"))}return(0,i.jsxs)("div",{ref:a,"data-layout-path":s,className:_,onClick:()=>{t.doAction(T.selectTab(n.getId()))},onAuxClick:e=>{A(e)&&t.auxMouseClick(n,e)},onContextMenu:e=>{t.showContextMenu(n,e)},title:n.getHelpText(),draggable:!0,onDragStart:e=>{n.isEnableDrag()?(e.stopPropagation(),t.setDragNode(e.nativeEvent,n)):e.preventDefault()},onDragEnd:e=>{t.clearDragMain()},onDoubleClick:e=>{n.isEnableRename()&&(t.setEditingTab(n),t.getCurrentDocument().body.addEventListener("pointerdown",c),e.stopPropagation())},children:[w,I,E.buttons]})},pe=e=>{const{node:t,layout:n}=e,s=r.useRef(null),a=r.useRef(null),l=r.useRef(null),d=r.useRef(null),u=r.useRef(null),h=r.useRef(null),g=r.useRef(null),p=r.useRef(void 0),v=n.getIcons();r.useLayoutEffect((()=>{t.setRect(n.getBoundingClientRect(b.current)),s.current&&t.setTabStripRect(n.getBoundingClientRect(s.current));const e=n.getBoundingClientRect(d.current);t.getContentRect().equals(e)||isNaN(e.x)||(t.setContentRect(e),V?(p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{n.redrawInternal("border content rect "+e),p.current=void 0}),50)):n.redrawInternal("border content rect "+e))}));const{selfRef:b,userControlledPositionRef:_,onScroll:E,onScrollPointerDown:I,hiddenTabs:w,onMouseWheel:y,isDockStickyButtons:O,isShowHiddenTabs:x}=te(n,t,c.HORZ,l,a,n.getClassName(f.FLEXLAYOUT__TAB_BUTTON)),R=e=>{const i=n.getShowOverflowMenu(),r=w.map((e=>({index:e,node:t.getChildren()[e]})));void 0!==i?i(t,e,r,L):Q(h.current,t,r,L,n),e.stopPropagation()},L=e=>{n.doAction(T.selectTab(e.node.getId())),_.current=!1},D=e=>{n.getEditingTab()?e.preventDefault():t.isEnableDrag()?(e.stopPropagation(),n.setDragNode(e.nativeEvent,t)):e.preventDefault()},N=e=>{A(e)||n.doAction(T.setActiveTabset(t.getId(),n.getWindowId()))},S=e=>{A(e)&&n.auxMouseClick(t,e)},C=e=>{n.showContextMenu(t,e)},M=e=>{e.stopPropagation()},B=e=>{t.canMaximize()&&n.maximize(t),e.stopPropagation()},U=e=>{n.doAction(T.deleteTabset(t.getId())),e.stopPropagation()},P=e=>{n.doAction(T.deleteTab(t.getChildren()[0].getId())),e.stopPropagation()},F=e=>{void 0!==j&&n.doAction(T.popoutTab(j.getId())),e.stopPropagation()},W=e=>{t.canMaximize()&&n.maximize(t)},Y=n.getClassName,j=t.getSelectedNode(),H=t.getPath(),X=[];if(t.isEnableTabStrip())for(let e=0;e<t.getChildren().length;e++){const r=t.getChildren()[e],o=t.getSelected()===e;X.push((0,i.jsx)(fe,{layout:n,node:r,path:H+"/tb"+e,selected:o},r.getId())),e<t.getChildren().length-1&&X.push((0,i.jsx)("div",{className:Y(f.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+e))}let k,z=[],G=[];const J={leading:k,stickyButtons:z,buttons:G,overflowPosition:void 0};n.customizeTabSet(t,J),k=J.leading,z=J.stickyButtons,G=J.buttons;const Z=t.isEnableSingleTabStretch()&&1===t.getChildren().length,q=Z&&t.getChildren()[0].isEnableClose()||t.isEnableClose();if(void 0===J.overflowPosition&&(J.overflowPosition=z.length),z.length>0&&(t.isEnableTabWrap()||!O&&!Z?X.push((0,i.jsx)("div",{ref:g,onPointerDown:M,onDragStart:e=>{e.preventDefault()},className:Y(f.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:z},"sticky_buttons_container")):G=[...z,...G]),!t.isEnableTabWrap()&&x){const e=n.i18nName(m.Overflow_Menu_Tooltip);let r;if("function"==typeof v.more){const e=w.map((e=>({index:e,node:t.getChildren()[e]})));r=v.more(t,e)}else r=(0,i.jsxs)(i.Fragment,{children:[v.more,(0,i.jsx)("div",{className:Y(f.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:w.length>0?w.length:""})]});G.splice(Math.min(J.overflowPosition,G.length),0,(0,i.jsx)("button",{"data-layout-path":H+"/button/overflow",ref:h,className:Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(f.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:e,onClick:R,onPointerDown:M,children:r},"overflowbutton"))}if(void 0!==j&&n.isSupportsPopout()&&j.isEnablePopout()&&j.isEnablePopoutIcon()){const e=n.i18nName(m.Popout_Tab);G.push((0,i.jsx)("button",{"data-layout-path":H+"/button/popout",title:e,className:Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:F,onPointerDown:M,children:"function"==typeof v.popout?v.popout(j):v.popout},"popout"))}if(t.canMaximize()){const e=n.i18nName(m.Restore),r=n.i18nName(m.Maximize);G.push((0,i.jsx)("button",{"data-layout-path":H+"/button/max",title:t.isMaximized()?e:r,className:Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(t.isMaximized()?"max":"min")),onClick:B,onPointerDown:M,children:t.isMaximized()?"function"==typeof v.restore?v.restore(t):v.restore:"function"==typeof v.maximize?v.maximize(t):v.maximize},"max"))}if(!t.isMaximized()&&q){const e=Z?n.i18nName(m.Close_Tab):n.i18nName(m.Close_Tabset);G.push((0,i.jsx)("button",{"data-layout-path":H+"/button/close",title:e,className:Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+Y(f.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:Z?P:U,onPointerDown:M,children:"function"==typeof v.closeTabset?v.closeTabset(t):v.closeTabset},"close"))}if(t.isActive()&&t.isEnableActiveIcon()){const e=n.i18nName(m.Active_Tabset);G.push((0,i.jsx)("div",{"data-layout-path":H+"/button/active",title:e,className:Y(f.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:"function"==typeof v.activeTabset?v.activeTabset(t):v.activeTabset},"active"))}const K=(0,i.jsx)("div",{ref:u,className:Y(f.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:M,onDragStart:e=>{e.preventDefault()},children:G},"buttonbar");let $,ee,ne,ie=Y(f.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(void 0!==t.getClassNameTabStrip()&&(ie+=" "+t.getClassNameTabStrip()),ie+=" "+f.FLEXLAYOUT__TABSET_TABBAR_OUTER_+t.getTabLocation(),t.isActive()&&(ie+=" "+Y(f.FLEXLAYOUT__TABSET_SELECTED)),t.isMaximized()&&(ie+=" "+Y(f.FLEXLAYOUT__TABSET_MAXIMIZED)),Z){const e=t.getChildren()[0];void 0!==e.getTabSetClassName()&&(ie+=" "+e.getTabSetClassName())}if(k&&(ee=(0,i.jsx)("div",{className:Y(f.FLEXLAYOUT__TABSET_LEADING),children:k})),t.isEnableTabWrap())t.isEnableTabStrip()&&($=(0,i.jsxs)("div",{className:ie,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:s,"data-layout-path":H+"/tabstrip",onPointerDown:N,onDoubleClick:W,onContextMenu:C,onClick:S,onAuxClick:S,draggable:!0,onDragStart:D,children:[ee,X,(0,i.jsx)("div",{style:{flexGrow:1}}),K]}));else if(t.isEnableTabStrip()){let e;t.isEnableTabScrollbar()&&(e=(0,i.jsx)("div",{ref:a,className:Y(f.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:I})),$=(0,i.jsxs)("div",{className:ie,ref:s,"data-layout-path":H+"/tabstrip",onPointerDown:N,onDoubleClick:W,onContextMenu:C,onClick:S,onAuxClick:S,draggable:!0,onWheel:y,onDragStart:D,children:[ee,(0,i.jsxs)("div",{className:Y(f.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[(0,i.jsx)("div",{ref:l,className:Y(f.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+Y(f.FLEXLAYOUT__TABSET_TABBAR_INNER_+t.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:E,children:(0,i.jsx)("div",{style:{width:Z?"100%":"none"},className:Y(f.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+Y(f.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+t.getTabLocation()),children:X})}),e]}),K]})}if(0===t.getChildren().length){const e=n.getTabSetPlaceHolderCallback();e&&(ne=e(t))}let re=(0,i.jsx)("div",{ref:d,className:Y(f.FLEXLAYOUT__TABSET_CONTENT),children:ne});re="top"===t.getTabLocation()?(0,i.jsxs)(i.Fragment,{children:[$,re]}):(0,i.jsxs)(i.Fragment,{children:[re,$]});const oe={flexGrow:Math.max(1,1e3*t.getWeight()),minWidth:t.getMinWidth(),minHeight:t.getMinHeight(),maxWidth:t.getMaxWidth(),maxHeight:t.getMaxHeight()};void 0===t.getModel().getMaximizedTabset(n.getWindowId())||t.isMaximized()||(oe.display="none");const se=(0,i.jsx)("div",{ref:b,className:Y(f.FLEXLAYOUT__TABSET_CONTAINER),style:oe,children:(0,i.jsx)("div",{className:Y(f.FLEXLAYOUT__TABSET),"data-layout-path":H,children:re})});return t.isMaximized()&&n.getMainElement()?(0,o.createPortal)((0,i.jsx)("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:se}),n.getMainElement()):se},ve=e=>{const{layout:t,node:n}=e,o=r.useRef(null),s=n.getOrientation()===c.HORZ;r.useLayoutEffect((()=>{n.setRect(t.getBoundingClientRect(o.current))}));const a=[];let l=0;for(const e of n.getChildren())l>0&&a.push((0,i.jsx)(J,{layout:t,node:n,index:l,horizontal:s},"splitter"+l)),e instanceof W?a.push((0,i.jsx)(ve,{layout:t,node:e},e.getId())):e instanceof P&&a.push((0,i.jsx)(pe,{layout:t,node:e},e.getId())),l++;const d={flexGrow:Math.max(1,1e3*n.getWeight()),minWidth:n.getMinWidth(),minHeight:n.getMinHeight(),maxWidth:n.getMaxWidth(),maxHeight:n.getMaxHeight()};return d.flexDirection=s?"row":"column",(0,i.jsx)("div",{ref:o,className:t.getClassName(f.FLEXLAYOUT__ROW),style:d,children:a})},Te=e=>{const{layout:t,selected:n,node:o,path:s}=e,a=r.useRef(null),l=r.useRef(!0),d=o.getParent(),c=d.getContentRect();r.useLayoutEffect((()=>{const e=o.getMoveableElement();a.current.appendChild(e),o.setMoveableElement(e);const t=()=>{o.saveScrollPosition()};return e.addEventListener("scroll",t),a.current.addEventListener("pointerdown",u),()=>{e.removeEventListener("scroll",t),a.current&&a.current.removeEventListener("pointerdown",u),o.setVisible(!1)}}),[]),r.useEffect((()=>{o.isSelected()&&l.current&&(o.restoreScrollPosition(),l.current=!1)}));const u=()=>{const e=o.getParent();e instanceof P&&(e.isActive()||t.doAction(T.setActiveTabset(e.getId(),t.getWindowId())))};o.setRect(c);const h=t.getClassName,g={};c.styleWithPosition(g);let m=null;if(n){if(o.setVisible(!0),document.hidden&&o.isEnablePopoutOverlay()){const e={};c.styleWithPosition(e),m=(0,i.jsx)("div",{style:e,className:h(f.FLEXLAYOUT__TAB_OVERLAY)})}}else g.display="none",o.setVisible(!1);d instanceof P&&void 0!==o.getModel().getMaximizedTabset(t.getWindowId())&&(d.isMaximized()?g.zIndex=10:g.display="none"),d instanceof G&&(d.isShowing()||(g.display="none"));let p=h(f.FLEXLAYOUT__TAB);return d instanceof G&&(p+=" "+h(f.FLEXLAYOUT__TAB_BORDER),p+=" "+h(f.FLEXLAYOUT__TAB_BORDER_+d.getLocation().getName())),void 0!==o.getContentClassName()&&(p+=" "+o.getContentClassName()),(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsx)("div",{ref:a,style:g,className:p,"data-layout-path":s})]})};class be extends r.Component{constructor(e){super(e),l(this,"retry",(()=>{this.setState({hasError:!1})})),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.debug(e),console.debug(t)}render(){return this.state.hasError?(0,i.jsx)("div",{className:f.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:(0,i.jsx)("div",{className:f.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,(0,i.jsx)("p",{children:(0,i.jsx)("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}const _e=r.memo((({layout:e,node:t})=>(0,i.jsx)(be,{message:e.i18nName(m.Error_rendering_component),retryText:e.i18nName(m.Error_rendering_component_retry),children:e.props.factory(t)})),(function(e,t){return!(t.visible&&(!e.rect.equalSize(t.rect)||e.forceRevision!==t.forceRevision||e.tabsRevision!==t.tabsRevision))}));class Ee extends r.Component{constructor(e){super(e),l(this,"selfRef"),l(this,"revision"),this.selfRef=r.createRef(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(e,t){return this.selfRef.current.addTabToTabSet(e,t)}addTabWithDragAndDrop(e,t,n){this.selfRef.current.addTabWithDragAndDrop(e,t,n)}moveTabWithDragAndDrop(e,t){this.selfRef.current.moveTabWithDragAndDrop(e,t)}addTabToActiveTabSet(e){return this.selfRef.current.addTabToActiveTabSet(e)}setDragComponent(e,t,n,i){this.selfRef.current.setDragComponent(e,t,n,i)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return(0,i.jsx)(we,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}const Ie=class e extends r.Component{constructor(t){super(t),l(this,"selfRef"),l(this,"moveablesRef"),l(this,"findBorderBarSizeRef"),l(this,"mainRef"),l(this,"previousModel"),l(this,"orderedTabIds"),l(this,"orderedTabMoveableIds"),l(this,"moveableElementMap",new Map),l(this,"dropInfo"),l(this,"outlineDiv"),l(this,"currentDocument"),l(this,"currentWindow"),l(this,"supportsPopout"),l(this,"popoutURL"),l(this,"icons"),l(this,"resizeObserver"),l(this,"dragEnterCount",0),l(this,"dragging",!1),l(this,"windowId"),l(this,"layoutWindow"),l(this,"mainLayout"),l(this,"isMainWindow"),l(this,"isDraggingOverWindow"),l(this,"styleObserver"),l(this,"popoutWindowName"),l(this,"updateLayoutMetrics",(()=>{if(this.findBorderBarSizeRef.current){const e=this.findBorderBarSizeRef.current.getBoundingClientRect().height;e!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:e})}})),l(this,"onModelChange",(e=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,e)})),l(this,"updateRect",(()=>{if(this.selfRef.current){const e=u.fromDomRect(this.selfRef.current.getBoundingClientRect());e.equals(this.state.rect)||0===e.width||0===e.height||(this.setState({rect:e}),this.windowId!==k.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}})),l(this,"getClassName",(e=>void 0===this.props.classNameMapper?e:this.props.classNameMapper(e))),l(this,"onCloseWindow",(e=>{this.doAction(T.closeWindow(e.windowId))})),l(this,"onSetWindow",((e,t)=>{})),l(this,"showControlInPortal",((e,t)=>{const n=(0,o.createPortal)(e,t);this.setState({portal:n})})),l(this,"hideControlInPortal",(()=>{this.setState({portal:void 0})})),l(this,"getIcons",(()=>this.icons)),l(this,"setDragNode",((t,n)=>{if(e.dragState=new Ae(this.mainLayout,"internal",n,void 0,void 0),t.dataTransfer.setData("text/plain","--flexlayout--"),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.dropEffect="move",this.dragEnterCount=0,n instanceof P){let e=!1,i=this.i18nName(m.Move_Tabset);if(n.getChildren().length>0&&(i=this.i18nName(m.Move_Tabs).replace("?",String(n.getChildren().length))),this.props.onRenderDragRect){const r=this.props.onRenderDragRect(i,n,void 0);r&&(this.setDragComponent(t,r,10,10),e=!0)}e||this.setDragComponent(t,i,10,10)}else{const e=t.target.getBoundingClientRect(),r=t.clientX-e.left,o=t.clientY-e.top,s=null==n?void 0:n.getParent(),a=s instanceof G&&s.getOrientation()===c.HORZ,l=a?10:r,d=a?10:o;let u=!1;if(this.props.onRenderDragRect){const e=(0,i.jsx)($,{layout:this,node:n},n.getId()),r=this.props.onRenderDragRect(e,n,void 0);r&&(this.setDragComponent(t,r,l,d),u=!0)}u||(function(){const e=navigator.userAgent;return e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium")}()?this.setDragComponent(t,(0,i.jsx)($,{node:n,layout:this}),l,d):t.dataTransfer.setDragImage(n.getTabStamp(),l,d))}})),l(this,"onDragEnterRaw",(e=>{this.dragEnterCount++,1===this.dragEnterCount&&this.onDragEnter(e)})),l(this,"onDragLeaveRaw",(e=>{this.dragEnterCount--,0===this.dragEnterCount&&this.onDragLeave(e)})),l(this,"onDragEnter",(t=>{if(!e.dragState&&this.props.onExternalDrag){const n=this.props.onExternalDrag(t);if(n){const t=O.fromJson(n.json,this.props.model,!1);e.dragState=new Ae(this.mainLayout,"external",t,n.json,n.onDrop)}}if(e.dragState){if(this.windowId!==k.MAIN_WINDOW_ID&&e.dragState.mainLayout===this.mainLayout&&e.dragState.mainLayout.setDraggingOverWindow(!0),e.dragState.mainLayout!==this.mainLayout)return;t.preventDefault(),this.dropInfo=void 0;const n=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(f.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";const i=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${i}s, left ${i}s, width ${i}s, height ${i}s`,n.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),this.isDraggingOverWindow||void 0!==this.props.model.getMaximizedTabset(this.windowId)||this.setState({showEdges:this.props.model.isEnableEdgeDock()});const r=this.selfRef.current.getBoundingClientRect();new u(t.clientX-r.left,t.clientY-r.top,1,1).positionElement(this.outlineDiv)}})),l(this,"onDragOver",(t=>{var n;if(this.dragging&&!this.isDraggingOverWindow){t.preventDefault();const i=null==(n=this.selfRef.current)?void 0:n.getBoundingClientRect(),r={x:t.clientX-((null==i?void 0:i.left)??0),y:t.clientY-((null==i?void 0:i.top)??0)};this.checkForBorderToShow(r.x,r.y);const o=this.props.model.findDropTargetNode(this.windowId,e.dragState.dragNode,r.x,r.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}})),l(this,"onDragLeave",(t=>{this.dragging&&(this.windowId!==k.MAIN_WINDOW_ID&&e.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())})),l(this,"onDrop",(t=>{if(this.dragging){t.preventDefault();const n=e.dragState;if(this.dropInfo)if(void 0!==n.dragJson){const e=this.doAction(T.addNode(n.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));void 0!==n.fnNewNodeDropped&&n.fnNewNodeDropped(e,t)}else void 0!==n.dragNode&&this.doAction(T.moveNode(n.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0})),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=r.createRef(),this.moveablesRef=r.createRef(),this.mainRef=r.createRef(),this.findBorderBarSizeRef=r.createRef(),this.supportsPopout=void 0!==t.supportsPopout?t.supportsPopout:Oe,this.popoutURL=t.popoutURL?t.popoutURL:"popout.html",this.icons={...ye,...t.icons},this.windowId=t.windowId?t.windowId:k.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:u.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:g.CENTER},this.isMainWindow=this.windowId===k.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.resizeObserver=new ResizeObserver((e=>{requestAnimationFrame((()=>{this.updateRect()}))})),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",(()=>{this.updateRect()}));const e=this.props.mainLayout.getRootDiv(),t=this.selfRef.current;C(e,t),this.styleObserver=new MutationObserver((()=>{C(e,t)&&this.redraw("mutation observer")})),this.styleObserver.observe(e,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",(()=>{for(const[e,t]of this.props.model.getwindowsMap())t.layout&&this.redraw("visibility change")}))}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(void 0!==this.previousModel&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var e,t;this.selfRef.current&&(null==(e=this.resizeObserver)||e.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),null==(t=this.styleObserver)||t.disconnect()}render(){if(!this.selfRef.current)return(0,i.jsxs)("div",{ref:this.selfRef,className:this.getClassName(f.FLEXLAYOUT__LAYOUT),children:[(0,i.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(f.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});const e=this.props.model;e.getRoot(this.windowId).calcMinMaxSize(),e.getRoot(this.windowId).setPaths(""),e.getBorderSet().setPaths();const t=this.renderLayout(),n=this.renderBorders(t),r=this.renderTabs(),o=this.reorderComponents(r,this.orderedTabIds);let s=null,a=null,l=null,d=null;if(this.isMainWindow){s=this.renderWindows(),d=this.renderMetricsElements();const e=this.renderTabMoveables();a=this.reorderComponents(e,this.orderedTabMoveableIds),l=(0,i.jsx)("div",{className:this.getClassName(f.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return(0,i.jsxs)("div",{ref:this.selfRef,className:this.getClassName(f.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[(0,i.jsx)("div",{ref:this.moveablesRef,className:this.getClassName(f.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),d,(0,i.jsx)(me,{layout:this,show:this.state.showOverlay},"__overlay__"),n,o,a,l,this.state.portal,s]})}renderBorders(e){const t=this.getClassName(f.FLEXLAYOUT__LAYOUT_MAIN),n=this.props.model.getBorderSet().getBorderMap();if(this.isMainWindow&&n.size>0){e=(0,i.jsx)("div",{className:t,ref:this.mainRef,children:e});const r=new Map,o=new Map;for(const[e,t]of g.values){const e=n.get(t);e&&e.isShowing()&&(!e.isAutoHide()||e.isAutoHide()&&(e.getChildren().length>0||this.state.showHiddenBorder===t))&&(r.set(t,(0,i.jsx)(ne,{layout:this,border:e,size:this.state.calculatedBorderBarSize})),o.set(t,(0,i.jsx)(Z,{layout:this,border:e,show:-1!==e.getSelected()})))}const s=this.getClassName(f.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),a=this.getClassName(f.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){const t=(0,i.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[o.get(g.TOP),(0,i.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[o.get(g.LEFT),e,o.get(g.RIGHT)]}),o.get(g.BOTTOM)]});return(0,i.jsxs)("div",{className:s,style:{flexDirection:"column"},children:[r.get(g.TOP),(0,i.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[r.get(g.LEFT),t,r.get(g.RIGHT)]}),r.get(g.BOTTOM)]})}{const t=(0,i.jsxs)("div",{className:a,style:{flexDirection:"row"},children:[o.get(g.LEFT),(0,i.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[o.get(g.TOP),e,o.get(g.BOTTOM)]}),o.get(g.RIGHT)]});return(0,i.jsxs)("div",{className:s,style:{flexDirection:"row"},children:[r.get(g.LEFT),(0,i.jsxs)("div",{className:a,style:{flexDirection:"column"},children:[r.get(g.TOP),t,r.get(g.BOTTOM)]}),r.get(g.RIGHT)]})}}return(0,i.jsx)("div",{className:t,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:e})}renderLayout(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ve,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){const e=[],t=this.icons.edgeArrow;if(this.state.showEdges){const n=this.props.model.getRoot(this.windowId).getRect(),r=xe,o=Re,s=xe/2,a=this.getClassName(f.FLEXLAYOUT__EDGE_RECT),l=50;e.push((0,i.jsx)("div",{style:{top:0,left:n.width/2-s,width:r,height:o,borderBottomLeftRadius:l,borderBottomRightRadius:l},className:a+" "+this.getClassName(f.FLEXLAYOUT__EDGE_RECT_TOP),children:(0,i.jsx)("div",{style:{transform:"rotate(180deg)"},children:t})},"North")),e.push((0,i.jsx)("div",{style:{top:n.height/2-s,left:0,width:o,height:r,borderTopRightRadius:l,borderBottomRightRadius:l},className:a+" "+this.getClassName(f.FLEXLAYOUT__EDGE_RECT_LEFT),children:(0,i.jsx)("div",{style:{transform:"rotate(90deg)"},children:t})},"West")),e.push((0,i.jsx)("div",{style:{top:n.height-o,left:n.width/2-s,width:r,height:o,borderTopLeftRadius:l,borderTopRightRadius:l},className:a+" "+this.getClassName(f.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:(0,i.jsx)("div",{children:t})},"South")),e.push((0,i.jsx)("div",{style:{top:n.height/2-s,left:n.width-o,width:o,height:r,borderTopLeftRadius:l,borderBottomLeftRadius:l},className:a+" "+this.getClassName(f.FLEXLAYOUT__EDGE_RECT_RIGHT),children:(0,i.jsx)("div",{style:{transform:"rotate(-90deg)"},children:t})},"East"))}return e}renderWindows(){const t=[];if(this.supportsPopout){const n=this.props.model.getwindowsMap();let r=1;for(const[o,s]of n)o!==k.MAIN_WINDOW_ID&&(t.push((0,i.jsx)(re,{layout:this,title:this.popoutWindowName+" "+r,layoutWindow:s,url:this.popoutURL+"?id="+o,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:(0,i.jsx)("div",{className:this.props.popoutClassName,children:(0,i.jsx)(e,{...this.props,windowId:o,mainLayout:this})})},o)),r++)}return t}renderTabMoveables(){const e=new Map;return this.props.model.visitNodes((t=>{if(t instanceof O){const n=t,r=this.getMoveableElement(n.getId());n.setMoveableElement(r);const s=n.isSelected(),a=n.getParent().getContentRect(),l=s||!n.isEnableRenderOnDemand(),d=n.isRendered()||l&&a.width>0&&a.height>0;if(d){const s=n.getId()+(n.isEnableWindowReMount()?n.getWindowId():"");e.set(t.getId(),(0,o.createPortal)((0,i.jsx)(_e,{layout:this,node:n,rect:a,visible:l,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},s),r,s)),n.setRendered(d)}}})),e}renderTabStamps(){const e=[];return this.props.model.visitNodes((t=>{if(t instanceof O){const n=t;e.push((0,i.jsx)(ie,{layout:this,node:n},n.getId()))}})),e}renderTabs(){const e=new Map;return this.props.model.visitWindowNodes(this.windowId,(t=>{if(t instanceof O){const n=t,r=n.isSelected(),o=n.getPath();(n.isRendered()||r||!n.isEnableRenderOnDemand())&&e.set(n.getId(),(0,i.jsx)(Te,{layout:this,path:o,node:n,selected:r},n.getId()))}})),e}renderMetricsElements(){return(0,i.jsx)("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(f.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(e,t){const n=this.getBoundingClientRect(this.mainRef.current),i=n.getCenter(),r=Re,o=xe/2;let s=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===g.CENTER&&(t>i.y-o&&t<i.y+o||e>i.x-o&&e<i.x+o)&&(s=!0);let a=g.CENTER;s||(e<=n.x+r?a=g.LEFT:e>=n.getRight()-r?a=g.RIGHT:t<=n.y+r?a=g.TOP:t>=n.getBottom()-r&&(a=g.BOTTOM)),a!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:a})}tidyMoveablesMap(){const e=new Map;this.props.model.visitNodes(((t,n)=>{t instanceof O&&e.set(t.getId(),t)}));for(const[t,n]of this.moveableElementMap)e.has(t)||(n.remove(),this.moveableElementMap.delete(t))}reorderComponents(e,t){const n=[],i=new Set;let r=[];for(const r of t)e.get(r)&&(n.push(r),i.add(r));t.splice(0,t.length,...n);for(const[n,r]of e)i.has(n)||t.push(n);return r=t.map((t=>e.get(t))),r}redraw(e){this.mainLayout.setState(((e,t)=>({forceRevision:e.forceRevision+1})))}redrawInternal(e){this.mainLayout.setState(((e,t)=>({layoutRevision:e.layoutRevision+1})))}doAction(e){if(void 0!==this.props.onAction){const t=this.props.onAction(e);return void 0!==t?this.props.model.doAction(t):void 0}return this.props.model.doAction(e)}getBoundingClientRect(e){const t=this.getDomRect();return t?u.getBoundingClientRect(e).relativeTo(t):u.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(e){let t=this.moveableElementMap.get(e);return void 0===t&&(t=document.createElement("div"),this.moveablesRef.current.appendChild(t),t.className=f.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(e,t)),t}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.state.rect}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(e){const t=e.clone(),n=this.getDomRect();return t.x=this.currentWindow.screenX+this.currentWindow.scrollX+1+n.x+t.x,t.y=this.currentWindow.screenY+this.currentWindow.scrollY+59+n.y+t.y,t.height+=60,t.width+=2,t}addTabToTabSet(e,t){if(void 0!==this.props.model.getNodeById(e))return this.doAction(T.addNode(t,e,g.CENTER,-1))}addTabToActiveTabSet(e){const t=this.props.model.getActiveTabset(this.windowId);if(void 0!==t)return this.doAction(T.addNode(e,t.getId(),g.CENTER,-1))}maximize(e){this.doAction(T.maximizeToggle(e.getId(),this.getWindowId()))}customizeTab(e,t){this.props.onRenderTab&&this.props.onRenderTab(e,t)}customizeTabSet(e,t){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,t)}i18nName(e,t){let n;return this.props.i18nMapper&&(n=this.props.i18nMapper(e,t)),void 0===n&&(n=e+(void 0===t?"":t)),n}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,t){this.props.onContextMenu&&this.props.onContextMenu(e,t)}auxMouseClick(e,t){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,t)}showOverlay(e){this.setState({showOverlay:e}),L(!e,this.currentDocument)}addTabWithDragAndDrop(t,n,i){const r=O.fromJson(n,this.props.model,!1);e.dragState=new Ae(this.mainLayout,"add",r,n,i)}moveTabWithDragAndDrop(e,t){this.setDragNode(e,t)}setDragComponent(e,t,n,r){const o=(0,i.jsx)("div",{style:{position:"unset"},className:this.getClassName(f.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(f.FLEXLAYOUT__DRAG_RECT),children:t}),a=this.currentDocument.createElement("div");a.setAttribute("data-layout-path","/drag-rectangle"),a.style.position="absolute",a.style.left="-10000px",a.style.top="-10000px",this.currentDocument.body.appendChild(a),(0,s.createRoot)(a).render(o),e.dataTransfer.setDragImage(a,n,r),setTimeout((()=>{this.currentDocument.body.removeChild(a)}),0)}setDraggingOverWindow(e){this.isDraggingOverWindow!==e&&(this.outlineDiv&&(this.outlineDiv.style.visibility=e?"hidden":"visible"),e?this.setState({showEdges:!1}):void 0===this.props.model.getMaximizedTabset(this.windowId)&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=e)}clearDragMain(){e.dragState=void 0,this.windowId===k.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1);for(const[,e]of this.props.model.getwindowsMap())e.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};l(Ie,"dragState");let we=Ie;const ye={close:(0,i.jsx)(ae,{}),closeTabset:(0,i.jsx)(ae,{}),popout:(0,i.jsx)(ue,{}),maximize:(0,i.jsx)(le,{}),restore:(0,i.jsx)(he,{}),more:(0,i.jsx)(de,{}),edgeArrow:(0,i.jsx)(ce,{}),activeTabset:(0,i.jsx)(ge,{})},Oe=x(),xe=100,Re=10;class Ae{constructor(e,t,n,i,r){l(this,"mainLayout"),l(this,"dragSource"),l(this,"dragNode"),l(this,"dragJson"),l(this,"fnNewNodeDropped"),this.mainLayout=e,this.dragSource=t,this.dragNode=n,this.dragJson=i,this.fnNewNodeDropped=r}}},60397:(e,t,n)=>{n.d(t,{D:()=>r,Y:()=>o});var i=function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=function(e,t){return e.map((function(e){return[e,t(e)]})).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o,n))}),{})},o=function(){return"undefined"!=typeof document?document:void 0}},65153:(e,t,n)=>{var i;n.d(t,{O:()=>i}),function(e){e.DoubleClickItemToExpand="double-click-item-to-expand",e.ClickItemToExpand="click-item-to-expand",e.ClickArrowToExpand="click-arrow-to-expand"}(i||(i={}))},67241:(e,t,n)=>{n.d(t,{y:()=>o});var i=n(65153),r=n(70218),o=function(){function e(e){this.mode=i.O.ClickItemToExpand,this.environment=e}return e.prototype.createInteractiveElementProps=function(e,t,n,i){var o=this;return{onClick:function(t){var s=0===t.detail;n.focusItem(),t.shiftKey&&!s?n.selectUpTo(!(0,r.d)(t)):(0,r.d)(t)&&!s?i.isSelected?n.unselectItem():n.addToSelectedItems():(n.selectItem(),e.isFolder&&!o.environment.canInvokePrimaryActionOnItemContainer||n.primaryAction())},onFocus:function(){n.focusItem()},onDragStart:function(e){e.dataTransfer.dropEffect="move",n.startDragging()},onDragOver:function(e){e.preventDefault()},draggable:i.canDrag&&!i.isRenaming,tabIndex:i.isRenaming?void 0:i.isFocused?0:-1}},e}()},70218:(e,t,n)=>{n.d(t,{d:()=>i});var i=function(e){return e.ctrlKey||navigator.platform.toUpperCase().indexOf("MAC")>=0&&e.metaKey}},74675:(e,t,n)=>{n.d(t,{z:()=>i});var i=function(e,t,n,r){var o,s,a;void 0===r&&(r=0);for(var l=[],d=0,c=null!==(s=null===(o=n[e])||void 0===o?void 0:o.children)&&void 0!==s?s:[];d<c.length;d++){var u=c[d],h=n[u];l.push({item:u,depth:r}),h&&h.isFolder&&h.children&&(null===(a=t.expandedItems)||void 0===a?void 0:a.includes(u))&&l.push.apply(l,i(u,t,n,r+1))}return l}},74848:(e,t,n)=>{e.exports=n(29698)},75203:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(96540),r=function(e){var t=(0,i.useRef)(e);return t.current=e,t}},75655:(e,t,n)=>{n.d(t,{P:()=>J,W:()=>V});var i=n(96540),r=n(15036),o=function(){var e,t=V().treeId;return null!==(e=(0,r.f)().viewState[t])&&void 0!==e?e:{}},s=function(e,t,n){return n.toLowerCase().includes(e.toLowerCase())},a=n(31930),l=n(91808),d=function(e){return(0,r.f)().linearItems[e]},c=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},u=function(e){var t,n,s=o(),a=V().treeId,l=d(a),u=(0,r.f)().onSelectItems,h=(t=s.focusedItem,(n=(0,i.useRef)({target:t,previous:void 0})).current.target!==t&&(n.current.previous=n.current.target,n.current.target=t),n.current.previous);return(0,i.useCallback)((function(t,n){var i,r;void 0===n&&(n=!1);var o=t.index,d=function(e,t){var i=c(c([],n?[]:e,!0),t.filter((function(t){return n||!e.includes(t)})),!0);null==u||u(i,a)};if(s&&s.selectedItems&&s.selectedItems.length>0){var g=s.focusedItem===o?h:s.focusedItem,m="last-focus"===e?l.findIndex((function(e){return g===e.item})):l.findIndex((function(e){var t;return null===(t=s.selectedItems)||void 0===t?void 0:t.includes(e.item)})),f=l.findIndex((function(e){return e.item===o}));if(m<f){var p=l.slice(m,f+1).map((function(e){return e.item}));d(null!==(i=s.selectedItems)&&void 0!==i?i:[],p)}else p=l.slice(f,m+1).map((function(e){return e.item})),d(null!==(r=s.selectedItems)&&void 0!==r?r:[],p)}else null==u||u([o],a)}),[s,u,a,e,l,h])},h=n(96115),g=function(){return g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)},m=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},f=n(86806),p=function(e,t,n){var r=(0,f.J)(n);(0,i.useEffect)((function(){return e?(e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}):function(){}}),[e,r,t])},v={expandSiblings:["control+*"],moveFocusToFirstItem:["home"],moveFocusToLastItem:["end"],primaryAction:["enter"],renameItem:["f2"],abortRenameItem:["escape"],toggleSelectItem:["control+ "],abortSearch:["escape","enter"],startSearch:[],selectAll:["control+a"],startProgrammaticDnd:["control+shift+d"],completeProgrammaticDnd:["enter"],abortProgrammaticDnd:["escape"]},T=function(){return T=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},T.apply(this,arguments)},b=function(){var e=(0,r.f)();return(0,i.useMemo)((function(){return e.keyboardBindings?T(T({},v),e.keyboardBindings):v}),[e.keyboardBindings])},_=n(29432),E=n(60397),I=["input","textarea"],w=function(e,t,n,r){void 0===r&&(r=!1);var o=(0,i.useRef)([]),s=b(),a=(0,_.l)(),l=(0,i.useMemo)((function(){return s[e].map((function(e){return e.split("+")}))}),[e,s]);p((0,E.Y)(),"keydown",(function(e){var t;if(!1!==n&&(!I.includes(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&!e.target.isContentEditable||r)&&!o.current.includes(e.key)){o.current.push(e.key);var i=o.current.map((function(e){return e.toLowerCase()}));l.map((function(e){return i.map((function(t){return e.includes(t.toLowerCase())})).reduce((function(e,t){return e&&t}),!0)})).reduce((function(e,t){return e||t}),!1)&&(o.current.length>1||!/^[a-zA-Z\s]$/.test(e.key))&&e.preventDefault()}})),p((0,E.Y)(),"keyup",(function(e){if(!1!==n){var i=o.current.map((function(e){return e.toLowerCase()}));l.map((function(e){return e.map((function(e){return i.includes(e.toLowerCase())})).reduce((function(e,t){return e&&t}),!0)})).reduce((function(e,t){return e||t}),!1)&&a((function(){return t(e)})),o.current=o.current.filter((function(t){return t!==e.key}))}}))},y=n(85825),O=function(e){var t=V(),n=t.renderers,o=t.treeInformation,s=t.setRenamingItem,a=t.treeId,l=(0,r.f)(),d=(0,i.useRef)(null),c=(0,i.useRef)(null),u=l.items[e.itemIndex],h=(0,i.useState)(l.getItemTitle(u)),g=h[0],m=h[1],f=(0,_.l)(!0),p=function(){var e;null===(e=l.onAbortRenamingItem)||void 0===e||e.call(l,u,o.treeId),s(null),f((function(){l.setActiveTree(a)}))},v=function(){var e;null===(e=l.onRenameItem)||void 0===e||e.call(l,u,g,o.treeId),s(null),f((function(){l.setActiveTree(a)}))};(0,y.C)((function(){var e,t,n,i;l.setActiveTree(a),(null===(e=l.autoFocus)||void 0===e||e)&&(null===(t=d.current)||void 0===t||t.select(),null===(i=null===(n=d.current)||void 0===n?void 0:n.focus)||void 0===i||i.call(n))}),[l,a],[]),w("abortRenameItem",(function(){p()}),!0,!0);var T={value:g,onChange:function(e){m(e.target.value)},onBlur:function(e){e.relatedTarget&&e.relatedTarget===c.current||p()},"aria-label":"New item name",tabIndex:0},b={onClick:function(e){e.stopPropagation(),v()}},E={onSubmit:function(e){e.preventDefault(),v()}};return n.renderRenameInput({item:u,inputRef:d,submitButtonProps:b,submitButtonRef:c,formProps:E,inputProps:T})},x=function(e){var t,n,d,c,f=(0,i.useState)(!1),p=f[0],v=f[1],T=V(),b=T.renderers,_=T.treeInformation,E=T.renamingItem,I=(0,r.f)(),w=o(),y=I.items[e.itemIndex],x=(0,i.useMemo)((function(){var t;return null===(t=w.expandedItems)||void 0===t?void 0:t.includes(e.itemIndex)}),[e.itemIndex,w.expandedItems]),A=function(e){var t,n,o,d,c=V(),f=c.treeId,p=c.search,v=c.renamingItem,T=c.setRenamingItem,b=(0,r.f)(),_=(0,a.X)(),E=(0,l.g)(),I=u("last-focus"),w=e&&b.getItemTitle(e),y=(0,h.Q)(),O=(0,i.useMemo)((function(){var t;return!(null===p||0===p.length||!e||!w)&&(null!==(t=b.doesSearchMatchItem)&&void 0!==t?t:s)(p,e,w)}),[p,e,w,b.doesSearchMatchItem]),x=e&&(null===(n=null===(t=b.viewState[f])||void 0===t?void 0:t.selectedItems)||void 0===n?void 0:n.includes(e.index)),R=e&&(null===(d=null===(o=b.viewState[f])||void 0===o?void 0:o.expandedItems)||void 0===d?void 0:d.includes(e.index)),A=e&&v===e.index;return(0,i.useMemo)((function(){var t,n,i,r,o,s,a,l,d;if(e){var c=b.viewState[f],u=(null!==(n=null===(t=null==c?void 0:c.selectedItems)||void 0===t?void 0:t.map((function(e){return b.items[e]})))&&void 0!==n?n:(null==c?void 0:c.focusedItem)?[b.items[null==c?void 0:c.focusedItem]]:[]).filter((function(e){return!!e})),h=!!u.find((function(t){return t.index===e.index})),p=u&&(null===(r=null===(i=b.canDrag)||void 0===i?void 0:i.call(b,u))||void 0===r||r)&&u.map((function(e){var t;return null===(t=e.canMove)||void 0===t||t})).reduce((function(e,t){return e&&t}),!0),v=(null===(s=null===(o=b.canDrag)||void 0===o?void 0:o.call(b,[e]))||void 0===s||s)&&(null===(a=e.canMove)||void 0===a||a),w=b.canDragAndDrop&&(h&&p||!h&&v),L=b.canDragAndDrop&&!!(null===(d=null===(l=E.viableDragPositions)||void 0===l?void 0:l[f])||void 0===d?void 0:d.find((function(t){return"item"===t.targetType&&t.targetItem===e.index}))),D={primaryAction:function(){var t;null===(t=b.onPrimaryAction)||void 0===t||t.call(b,b.items[e.index],f)},collapseItem:function(){var t;null===(t=b.onCollapseItem)||void 0===t||t.call(b,e,f)},expandItem:function(){var t;null===(t=b.onExpandItem)||void 0===t||t.call(b,e,f)},toggleExpandedState:function(){var t,n;R?null===(t=b.onCollapseItem)||void 0===t||t.call(b,e,f):null===(n=b.onExpandItem)||void 0===n||n.call(b,e,f)},selectItem:function(){var t;null===(t=b.onSelectItems)||void 0===t||t.call(b,[e.index],f)},addToSelectedItems:function(){var t,n;null===(t=b.onSelectItems)||void 0===t||t.call(b,m(m([],null!==(n=null==c?void 0:c.selectedItems)&&void 0!==n?n:[],!0),[e.index],!1),f)},unselectItem:function(){var t,n,i;null===(t=b.onSelectItems)||void 0===t||t.call(b,null!==(i=null===(n=null==c?void 0:c.selectedItems)||void 0===n?void 0:n.filter((function(t){return t!==e.index})))&&void 0!==i?i:[],f)},selectUpTo:function(t){I(e,t)},startRenamingItem:function(){T(e.index)},stopRenamingItem:function(){T(null)},focusItem:function(t){var n;void 0===t&&(t=!0),null===(n=b.onFocusItem)||void 0===n||n.call(b,e,f,t)},startDragging:function(){var t,n,i=null!==(t=null==c?void 0:c.selectedItems)&&void 0!==t?t:[];if(i.includes(e.index)||(i=[e.index],null===(n=b.onSelectItems)||void 0===n||n.call(b,i,f)),w){var r=y(f,i.map((function(e){return b.items[e]})));E.onStartDraggingItems(r,f)}}},N={isSelected:x,isExpanded:R,isFocused:(null==c?void 0:c.focusedItem)===e.index,isRenaming:A,isDraggingOver:E.draggingPosition&&"item"===E.draggingPosition.targetType&&E.draggingPosition.targetItem===e.index&&E.draggingPosition.treeId===f,isDraggingOverParent:!1,isSearchMatching:O,canDrag:w,canDropOn:L},S=g(g({},_.createInteractiveElementProps(e,f,D,N,c)),{"data-rct-item-interactive":!0,"data-rct-item-focus":N.isFocused?"true":"false","data-rct-item-id":e.index}),C=g({},{"data-rct-item-container":"true"}),M={role:"treeitem","aria-selected":N.isSelected,"aria-expanded":e.isFolder?N.isExpanded?"true":"false":void 0},B={onClick:function(){e.isFolder&&D.toggleExpandedState(),D.selectItem()},onFocus:function(){D.focusItem()},onDragOver:function(e){e.preventDefault()},"aria-hidden":!0,tabIndex:-1},U=c?Object.entries(c).reduce((function(t,n){var i=n[0],r=n[1];return t[i]=Array.isArray(r)?r.includes(e.index):r===e.index,t}),{}):{};return g(g(g({},D),N),{interactiveElementProps:S,itemContainerWithChildrenProps:M,itemContainerWithoutChildrenProps:C,arrowProps:B,viewStateFlags:U})}}),[e,b,f,E,x,R,A,O,_,I,T,y])}(y);if(void 0===y||void 0===A)return p||(v(!0),null===(t=I.onMissingItems)||void 0===t||t.call(I,[e.itemIndex])),null;var L=null!==(d=null===(n=I.shouldRenderChildren)||void 0===n?void 0:n.call(I,y,A))&&void 0!==d?d:y.isFolder&&x,D=y.children&&L&&i.createElement(R,{depth:e.depth+1,parentId:e.itemIndex},y.children),N=I.getItemTitle(y),S=E===e.itemIndex?i.createElement(O,{itemIndex:e.itemIndex}):b.renderItemTitle({info:_,context:A,title:N,item:y}),C=b.renderItemArrow({info:_,context:A,item:I.items[e.itemIndex]});return null!==(c=b.renderItem({item:I.items[e.itemIndex],depth:e.depth,title:S,arrow:C,context:A,info:_,children:D}))&&void 0!==c?c:null},R=function(e){for(var t=V(),n=t.renderers,r=t.treeInformation,o=[],s=0,a=e.children;s<a.length;s++){var l=a[s];o.push(i.createElement(x,{key:l,itemIndex:l,depth:e.depth}))}if(0===o.length)return null;var d={role:0!==e.depth?"group":void 0};return n.renderItemsContainer({children:o,info:r,containerProps:d,depth:e.depth,parentId:e.parentId})},A=function(e){var t,n=e.treeId,r=(0,l.g)(),o=r.draggingPosition,s=r.itemHeight,a=V().renderers;return o&&"between-items"===o.targetType&&o.treeId===n?i.createElement("div",{style:{position:"absolute",left:"0",right:"0",top:"".concat((null!==(t=null==o?void 0:o.linearIndex)&&void 0!==t?t:0)*s,"px")}},a.renderDragBetweenLine({draggingPosition:o,lineProps:{onDragOver:function(e){return e.preventDefault()}}})):null},L=function(e,t,n){p((0,E.Y)(),"keydown",(function(i){n&&n&&e.toLowerCase()===i.key.toLowerCase()&&t(i)}))},D=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},N=function(){return N=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},N.apply(this,arguments)},S=function(e){var t,n=e.containerRef,i=V(),a=i.search,l=i.setSearch,c=i.treeId,u=i.renderers,h=i.renamingItem,g=(0,r.f)();o();var m=g.activeTreeId===c,f=(0,_.l)();!function(){var e=(0,r.f)(),t=e.doesSearchMatchItem,n=e.items,i=e.getItemTitle,o=e.onFocusItem,a=V(),l=a.search,c=a.treeId,u=d(c),h=(0,_.l)();(0,y.C)((function(){l&&l.length>0&&h((function(){var e=u.find((function(e){var r=e.item;return(null!=t?t:s)(l,n[r],i(n[r]))}));e&&(null==o||o(n[e.item],c))}))}),[t,i,u,n,o,l,c,h],[l])}();var v=function(){var e,t,n;if(l(null),null===(e=g.autoFocus)||void 0===e||e){var i=null===(t=(0,E.Y)())||void 0===t?void 0:t.querySelector('[data-rct-tree="'.concat(c,'"] [data-rct-item-focus="true"]'));null===(n=null==i?void 0:i.focus)||void 0===n||n.call(i)}};return w("abortSearch",(function(){f((function(){v()}))}),m&&null!==a,!0),p(n,"keydown",(function(e){var t,n,i=e.key.charCodeAt(0);null!==(t=g.canSearch)&&void 0!==t&&!t||null!==(n=g.canSearchByStartingTyping)&&void 0!==n&&!n||!m||null!==a||h||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||!(i>=48&&i<=57||i>=97&&i<=122)||l("")})),null!==(t=g.canSearch)&&void 0!==t&&!t||null===a?null:u.renderSearchInput({inputProps:N({value:a,onChange:function(e){return l(e.target.value)},onBlur:function(){v()},ref:function(e){var t;null===(t=null==e?void 0:e.focus)||void 0===t||t.call(e)},"aria-label":"Search for items"},{"data-rct-search-input":"true"})})},C={introduction:"\n    <p>Accessibility guide for tree {treeLabel}.</p>\n    <p>\n      Navigate the tree with the arrow keys. Common tree hotkeys apply. Further keybindings are available:\n    </p>\n    <ul>\n      <li>{keybinding:primaryAction} to execute primary action on focused item</li>\n      <li>{keybinding:renameItem} to start renaming the focused item</li>\n      <li>{keybinding:abortRenameItem} to abort renaming an item</li>\n      <li>{keybinding:startProgrammaticDnd} to start dragging selected items</li>\n    </ul>\n  ",renamingItem:"\n    <p>Renaming the item {renamingItem}.</p>\n    <p>Use the keybinding {keybinding:abortRenameItem} to abort renaming.</p>\n  ",searching:"\n    <p>Searching</p>\n  ",programmaticallyDragging:"\n    <p>Dragging items {dragItems}.</p>\n    <p>Press the arrow keys to move the drag target.</p>\n    <p>Press {keybinding:completeProgrammaticDnd} to drop or {keybinding:abortProgrammaticDnd} to abort.</p>\n  ",programmaticallyDraggingTarget:"\n    <p>Drop target is {dropTarget}.</p>\n  "},M=function(e,t,n,i,r){var o=function(e){return t.getItemTitle(t.items[e])};return e.replace(/({[^\s}]+)}/g,(function(e){var s,a,l,d=e.slice(1,-1);switch(d){case"treeLabel":return null!==(s=i.treeLabel)&&void 0!==s?s:"";case"renamingItem":return i.renamingItem?o(i.renamingItem):"None";case"dragItems":return null!==(l=null===(a=n.draggingItems)||void 0===a?void 0:a.map((function(e){return t.getItemTitle(e)})).join(", "))&&void 0!==l?l:"None";case"dropTarget":if(!n.draggingPosition)return"None";if("item"===n.draggingPosition.targetType||"root"===n.draggingPosition.targetType)return"within ".concat(o(n.draggingPosition.targetItem));var c=t.items[n.draggingPosition.parentItem],u=t.getItemTitle(c);return 0===n.draggingPosition.childIndex?"within ".concat(u," at the start"):"within ".concat(u," after ").concat(o(c.children[n.draggingPosition.childIndex-1]));default:if(d.startsWith("keybinding:"))return r[d.slice(11)][0];throw Error("Unknown live descriptor variable {".concat(d,"}"))}}))},B=function(e){var t=e.children,n=e.live;return i.createElement("div",{"aria-live":n,dangerouslySetInnerHTML:{__html:t}})},U=function(){var e=(0,r.f)(),t=V(),n=(0,l.g)(),o=b(),s=(0,i.useMemo)((function(){var t;return null!==(t=e.liveDescriptors)&&void 0!==t?t:C}),[e.liveDescriptors]),a=t.renderers.renderLiveDescriptorContainer;return t.treeInformation.isRenaming?i.createElement(a,{tree:t},i.createElement(B,{live:"polite"},M(s.renamingItem,e,n,t,o))):t.treeInformation.isSearching?i.createElement(a,{tree:t},i.createElement(B,{live:"polite"},M(s.searching,e,n,t,o))):t.treeInformation.isProgrammaticallyDragging?i.createElement(a,{tree:t},i.createElement(B,{live:"polite"},M(s.programmaticallyDragging,e,n,t,o)),i.createElement(B,{live:"assertive"},M(s.programmaticallyDraggingTarget,e,n,t,o))):i.createElement(a,{tree:t},i.createElement(B,{live:"off"},M(s.introduction,e,n,t,o)))},P=function(){var e;return null===(e=(0,r.f)().showLiveDescription)||void 0===e||e?i.createElement(U,null):null},F=function(){return F=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},F.apply(this,arguments)},W=function(){var e=V(),t=e.treeId,n=e.rootItem,s=e.renderers,a=e.treeInformation,c=(0,r.f)(),h=(0,i.useRef)(),g=(0,l.g)();(function(){var e,t=(0,r.f)(),n=V(),i=n.treeId,s=n.setRenamingItem,a=n.setSearch,c=n.renamingItem,h=d(i),g=(0,l.g)(),m=o(),p=function(){var e=V().treeId,t=(0,r.f)(),n=t.onFocusItem,i=t.items,s=d(e),a=o();return(0,f.J)((function(t){var r,o=t(null!==(r=s.findIndex((function(e){return e.item===a.focusedItem})))&&void 0!==r?r:0,s),l=Math.max(0,Math.min(s.length-1,o)),d=i[s[l].item];return null==n||n(d,e),d}))}(),v=u("first-selected"),T=t.activeTreeId===i,b=!!c,_=!t.disableArrowKeys&&T&&!b;L("arrowdown",(function(e){if(e.preventDefault(),g.isProgrammaticallyDragging)g.programmaticDragDown();else{var t=p((function(e){return e+1}));e.shiftKey&&v(t)}}),_),L("arrowup",(function(e){if(e.preventDefault(),g.isProgrammaticallyDragging)g.programmaticDragUp();else{var t=p((function(e){return e-1}));e.shiftKey&&v(t)}}),_),w("moveFocusToFirstItem",(function(e){e.preventDefault(),p((function(){return 0}))}),T&&!g.isProgrammaticallyDragging&&!b),w("moveFocusToLastItem",(function(e){e.preventDefault(),p((function(e,t){return t.length-1}))}),T&&!g.isProgrammaticallyDragging&&!b),L("arrowright",(function(e){e.preventDefault(),p((function(e,n){var r,o,s=t.items[n[e].item];if(s.isFolder){if(null===(r=m.expandedItems)||void 0===r?void 0:r.includes(s.index))return e+1;null===(o=t.onExpandItem)||void 0===o||o.call(t,s,i)}return e}))}),_&&!g.isProgrammaticallyDragging),L("arrowleft",(function(e){e.preventDefault(),p((function(e,n){var r,o,s=t.items[n[e].item],a=n[e].depth;if(s.isFolder&&(null===(r=m.expandedItems)||void 0===r?void 0:r.includes(s.index)))null===(o=t.onCollapseItem)||void 0===o||o.call(t,s,i);else if(a>0){for(var l=e;n[l].depth!==a-1;l-=1);return l}return e}))}),_&&!g.isProgrammaticallyDragging),w("primaryAction",(function(e){var n,r;e.preventDefault(),void 0!==m.focusedItem&&(null===(n=t.onSelectItems)||void 0===n||n.call(t,[m.focusedItem],i),null===(r=t.onPrimaryAction)||void 0===r||r.call(t,t.items[m.focusedItem],i))}),T&&!g.isProgrammaticallyDragging&&!b),w("toggleSelectItem",(function(e){var n,r,o;e.preventDefault(),e.stopPropagation(),void 0!==m.focusedItem&&(m.selectedItems&&m.selectedItems.includes(m.focusedItem)?null===(n=t.onSelectItems)||void 0===n||n.call(t,m.selectedItems.filter((function(e){return e!==m.focusedItem})),i):null===(r=t.onSelectItems)||void 0===r||r.call(t,D(D([],null!==(o=m.selectedItems)&&void 0!==o?o:[],!0),[m.focusedItem],!1),i))}),T&&!g.isProgrammaticallyDragging&&!b),w("selectAll",(function(e){var n;e.preventDefault(),null===(n=t.onSelectItems)||void 0===n||n.call(t,h.map((function(e){return e.item})),i)}),T&&!g.isProgrammaticallyDragging&&!b),w("renameItem",(function(e){var n;if(void 0!==m.focusedItem){e.preventDefault();var r=t.items[m.focusedItem];!1!==r.canRename&&(null===(n=t.onStartRenamingItem)||void 0===n||n.call(t,r,i),s(r.index))}}),T&&(null===(e=t.canRename)||void 0===e||e)&&!b),w("startSearch",(function(e){var t,n;e.preventDefault(),a(""),null===(n=null===(t=document.querySelector('[data-rct-search-input="true"]'))||void 0===t?void 0:t.focus)||void 0===n||n.call(t)}),T&&!g.isProgrammaticallyDragging&&!b),w("startProgrammaticDnd",(function(e){e.preventDefault(),g.startProgrammaticDrag()}),T&&!b),w("completeProgrammaticDnd",(function(e){e.preventDefault(),g.completeProgrammaticDrag()}),T&&g.isProgrammaticallyDragging&&!b),w("abortProgrammaticDnd",(function(e){e.preventDefault(),g.abortProgrammaticDrag()}),T&&g.isProgrammaticallyDragging&&!b)})(),function(e,t,n){var r=(0,i.useState)(!1),o=r[0],s=r[1],a=(0,i.useRef)(!1),l=(0,_.l)();p(e,"focusin",(function(){o||(s(!0),null==t||t()),a.current&&(a.current=!1)})),p(e,"focusout",(function(){a.current=!0,l((function(){a.current&&!(null==e?void 0:e.contains(document.activeElement))&&(null==n||n(),a.current=!1,s(!1))}))}))}(h.current,(function(){c.setActiveTree(t)}),(function(){c.setActiveTree((function(e){return e===t?void 0:e}))}));var m=c.items[n].children,v=i.createElement(i.Fragment,null,i.createElement(P,null),i.createElement(R,{depth:0,parentId:n},null!=m?m:[]),i.createElement(A,{treeId:t}),i.createElement(S,{containerRef:h.current})),T=F({onDragOver:function(e){e.preventDefault(),g.onDragOverTreeHandler(e,t,h)},onDragLeave:function(e){g.onDragLeaveContainerHandler(e,h)},onMouseDown:function(){return g.abortProgrammaticDrag()},ref:h,style:{position:"relative"},role:"tree","aria-label":a.treeLabelledBy?void 0:a.treeLabel,"aria-labelledby":a.treeLabelledBy},{"data-rct-tree":t});return s.renderTreeContainer({children:v,info:a,containerProps:T})},Y=n(74675),j=function(){return j=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},j.apply(this,arguments)},H=n(87138),X=i.createContext(null),k=i.forwardRef((function(e,t){(0,r.f)();var n=V();(0,l.g)();var o=(0,H.a)(),s=(0,i.useMemo)((function(){return{abortRenamingItem:function(){n.setRenamingItem(null)},abortSearch:function(){n.setSearch(null)},collapseItem:function(e){o.collapseItem(e,n.treeId)},completeRenamingItem:function(){},expandItem:function(e){o.expandItem(e,n.treeId)},focusItem:function(e,t){void 0===t&&(t=!0),o.focusItem(e,n.treeId,t)},focusTree:function(e){void 0===e&&(e=!0),o.focusTree(n.treeId,e)},invokePrimaryAction:function(e){o.invokePrimaryAction(e,n.treeId)},moveFocusDown:function(){o.moveFocusDown(n.treeId)},moveFocusUp:function(){o.moveFocusUp(n.treeId)},renameItem:function(e,t){o.renameItem(e,t,n.treeId)},selectItems:function(e){o.selectItems(e,n.treeId)},setSearch:function(e){n.setSearch(e)},startRenamingItem:function(e){n.setRenamingItem(e)},stopRenamingItem:function(){n.setRenamingItem(null)},toggleItemExpandedState:function(e){o.toggleItemExpandedState(e,n.treeId)},toggleItemSelectStatus:function(e){o.toggleItemSelectStatus(e,n.treeId)},expandAll:function(){o.expandAll(n.treeId)},collapseAll:function(){o.collapseAll(n.treeId)},expandSubsequently:function(e){return o.expandSubsequently(n.treeId,e)}}}),[o,n]);return function(e,t){var n=(0,r.f)(),o=V(),s=(0,l.g)();(0,i.useImperativeHandle)(e,(function(){return j(j(j({},t),{treeEnvironmentContext:n,dragAndDropContext:s,treeContext:o}),o.treeInformation)}))}(t,s),i.createElement(X.Provider,{value:s},e.children)})),z=function(){return z=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},z.apply(this,arguments)},G=i.createContext(null),V=function(){return(0,i.useContext)(G)},J=i.forwardRef((function(e,t){var n,o=(0,r.f)(),s=(0,i.useMemo)((function(){return z(z({},o),e)}),[e,o]),a=(0,i.useState)(null),d=a[0],c=a[1],u=(0,i.useState)(null),h=u[0],g=u[1],m=o.items[e.rootItem],f=o.viewState[e.treeId];(0,i.useEffect)((function(){return o.registerTree({treeId:e.treeId,rootItem:e.rootItem}),function(){return o.unregisterTree(e.treeId)}}),[e.treeId,e.rootItem]);var p=function(e,t,n){var o,s=(0,r.f)(),a=(0,l.g)(),d=null===(o=s.viewState[e.treeId])||void 0===o?void 0:o.selectedItems;return(0,i.useMemo)((function(){var i,r;return{isFocused:s.activeTreeId===e.treeId,isRenaming:!!t,areItemsSelected:(null!==(i=null==d?void 0:d.length)&&void 0!==i?i:0)>0,isSearching:null!==n,search:n,isProgrammaticallyDragging:null!==(r=a.isProgrammaticallyDragging)&&void 0!==r&&r,treeId:e.treeId,rootItem:e.rootItem,treeLabel:e.treeLabel,treeLabelledBy:e.treeLabelledBy}}),[s.activeTreeId,e.treeId,e.rootItem,e.treeLabel,e.treeLabelledBy,t,null==d?void 0:d.length,n,a.isProgrammaticallyDragging])}(e,h,d),v=(0,i.useMemo)((function(){return{treeId:e.treeId,rootItem:e.rootItem,treeLabel:e.treeLabel,treeLabelledBy:e.treeLabelledBy,getItemsLinearly:function(){return(0,Y.z)(e.rootItem,null!=f?f:{},o.items)},treeInformation:p,search:d,setSearch:c,renamingItem:h,setRenamingItem:g,renderers:s}}),[o.items,e.rootItem,e.treeId,e.treeLabel,e.treeLabelledBy,h,s,d,p,f]);return void 0===m?(null===(n=o.onMissingItems)||void 0===n||n.call(o,[e.rootItem]),null):i.createElement(G.Provider,{value:v},i.createElement(k,{ref:t},i.createElement(W,null)))}))},85825:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(96540),r=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},o=function(e,t,n){var o=(0,i.useRef)();(0,i.useEffect)((function(){o.current?o.current.some((function(e,t){return e!==n[t]}))&&(o.current=r([],n,!0),e()):(o.current=r([],n,!0),e())}),r(r([],t,!0),n,!0))}},86806:(e,t,n)=>{n.d(t,{J:()=>o});var i=n(96540),r=n(75203),o=function(e){var t=(0,r.K)(e);return(0,i.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.current.apply(t,e)}),[t])}},87138:(e,t,n)=>{n.d(t,{i:()=>f,a:()=>g});var i=n(96540),r=n(91808),o=n(15036),s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},a=n(75203),l=function(e,t,n){return void 0===t&&(t=50),void 0===n&&(n=1e4),new Promise((function(i){var r;e()&&i();var o=setInterval((function(){e()&&r()}),t),s=setTimeout((function(){r()}),n);r=function(){clearInterval(o),clearTimeout(s),i()}}))},d=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},c=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},u=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},h=i.createContext(null),g=function(){return i.useContext(h)},m=function(e,t,n){return d(void 0,void 0,void 0,(function(){var i,r,o,s,a,d,u;return c(this,(function(c){for(i=function(e){l((function(){var n;return!!(null===(n=t.current)||void 0===n?void 0:n[e])})).then((function(){var i,r=null===(i=t.current)||void 0===i?void 0:i[e];(null==r?void 0:r.isFolder)&&(n(r),m(e,t,n))}))},r=0,o=null!==(u=null===(d=null===(a=t.current)||void 0===a?void 0:a[e])||void 0===d?void 0:d.children)&&void 0!==u?u:[];r<o.length;r++)s=o[r],i(s);return[2]}))}))},f=i.forwardRef((function(e,t){var n=(0,o.f)(),g=n.onCollapseItem,f=n.items,p=n.trees,v=n.viewState,T=n.onExpandItem,b=n.onFocusItem,_=n.setActiveTree,E=n.onRenameItem,I=n.onSelectItems,w=n.onPrimaryAction,y=n.linearItems,O=(0,r.g)(),x=O.abortProgrammaticDrag,R=O.completeProgrammaticDrag,A=O.programmaticDragDown,L=O.programmaticDragUp,D=O.startProgrammaticDrag,N=(0,a.K)(f),S=(0,i.useCallback)((function(e,t){null==g||g(f[e],t)}),[f,g]),C=(0,i.useCallback)((function(e,t){null==T||T(f[e],t)}),[f,T]),M=(0,i.useCallback)((function(e,t,n){void 0===n&&(n=!0),null==b||b(f[e],t,n)}),[f,b]),B=(0,i.useCallback)((function(e,t){void 0===t&&(t=!0),_(e,t)}),[_]),U=(0,i.useCallback)((function(e){var t=y[e],n=t.findIndex((function(t){var n;return t.item===(null===(n=v[e])||void 0===n?void 0:n.focusedItem)})),i=void 0!==n?Math.min(t.length-1,n+1):0,r=f[t[i].item];null==b||b(r,e)}),[f,y,b,v]),P=(0,i.useCallback)((function(e){var t=y[e],n=t.findIndex((function(t){var n;return t.item===(null===(n=v[e])||void 0===n?void 0:n.focusedItem)})),i=void 0!==n?Math.max(0,n-1):0,r=f[t[i].item];null==b||b(r,e)}),[f,y,b,v]),F=(0,i.useCallback)((function(e,t,n){null==E||E(f[e],t,n)}),[f,E]),W=(0,i.useCallback)((function(e,t){null==I||I(e,t)}),[I]),Y=(0,i.useCallback)((function(e,t){var n,i;(null===(i=null===(n=v[t])||void 0===n?void 0:n.expandedItems)||void 0===i?void 0:i.includes(e))?null==g||g(f[e],t):null==T||T(f[e],t)}),[f,g,T,v]),j=(0,i.useCallback)((function(e,t){var n,i,r,o,s;(null===(i=null===(n=v[t])||void 0===n?void 0:n.selectedItems)||void 0===i?void 0:i.includes(e))?null==I||I(null!==(o=null===(r=v[t].selectedItems)||void 0===r?void 0:r.filter((function(t){return t!==e})))&&void 0!==o?o:[],t):null==I||I(u(u([],null!==(s=v[t].selectedItems)&&void 0!==s?s:[],!0),[e],!1),t)}),[I,v]),H=(0,i.useCallback)((function(e,t){null==w||w(f[e],t)}),[f,w]),X=(0,i.useCallback)((function(e,t){return d(void 0,void 0,void 0,(function(){var n,i;return c(this,(function(r){switch(r.label){case 0:return n=t[0],i=t.slice(1),[4,l((function(){var e;return!!(null===(e=N.current)||void 0===e?void 0:e[n])})).then((function(){var t=N.current[n];return t?(null==T||T(t,e),i.length>0?X(e,i):Promise.resolve()):Promise.resolve()}))];case 1:return r.sent(),[2]}}))}))}),[N,T]),k=(0,i.useCallback)((function(e){return d(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,m(p[e].rootItem,N,(function(t){return null==T?void 0:T(t,e)}))];case 1:return t.sent(),[2]}}))}))}),[N,T,p]),z=(0,i.useCallback)((function(e){for(var t,n,i=0,r=null!==(n=null===(t=v[e])||void 0===t?void 0:t.expandedItems)&&void 0!==n?n:[];i<r.length;i++){var o=r[i];null==g||g(f[o],e)}}),[f,g,v]),G=(0,i.useMemo)((function(){return{collapseItem:S,expandItem:C,focusItem:M,focusTree:B,moveFocusDown:U,moveFocusUp:P,renameItem:F,selectItems:W,toggleItemExpandedState:Y,toggleItemSelectStatus:j,invokePrimaryAction:H,expandAll:k,expandSubsequently:X,collapseAll:z,abortProgrammaticDrag:x,completeProgrammaticDrag:R,moveProgrammaticDragPositionDown:A,moveProgrammaticDragPositionUp:L,startProgrammaticDrag:D}}),[S,C,M,B,U,P,F,W,Y,j,H,k,X,z,x,R,A,L,D]);return function(e,t){var n=(0,o.f)(),a=(0,r.g)();(0,i.useImperativeHandle)(e,(function(){return s(s(s({},t),n),{treeEnvironmentContext:n,dragAndDropContext:a})}))}(t,G),i.createElement(h.Provider,{value:G},e.children)}))},91808:(e,t,n)=>{n.d(t,{G:()=>p,g:()=>f});var i=n(96540),r=n(15036),o=function(){var e=(0,r.f)();return(0,i.useCallback)((function(t,n){if("between-items"===t.targetType){if(!e.canReorderItems)return!1}else if("root"===t.targetType){if(!e.canDropOnFolder)return!1}else{var i=e.items[t.targetItem];if(!i||!e.canDropOnFolder&&i.isFolder||!e.canDropOnNonFolder&&!i.isFolder||n.some((function(e){return e.index===t.targetItem})))return!1}return!!(!e.canDropAt||n&&e.canDropAt(n,t))}),[e])},s=function(){var e=(0,r.f)();return(0,i.useCallback)((function(t,n){for(var i=e.linearItems[n],r=i[t].depth,o=t;i[o]&&i[o].depth!==r-1;o-=1);var s=i[o];return s||(s={item:e.trees[n].rootItem,depth:0},o=0),{parent:s,parentLinearIndex:o}}),[e.linearItems,e.trees])},a=n(85825),l=n(60397),d=n(29432),c=n(86806),u=n(96115),h=function(e,t){return e.clientX<=t.left||e.clientX>=t.right||e.clientY<=t.top||e.clientY>=t.bottom},g=function(){function e(e,t,n,i,r,o){this.env=e,this.e=t,this.treeId=n,this.linearIndex=i.linearIndex,this.offset=i.offset,this.indentation=i.indentation,this.targetItem=this.env.linearItems[this.treeId][this.linearIndex],this.getParentOfLinearItem=o,this.draggingItems=r}return e.prototype.getEmptyTreeDragPosition=function(){return{targetType:"root",treeId:this.treeId,depth:0,linearIndex:0,targetItem:this.env.trees[this.treeId].rootItem}},e.prototype.maybeRedirectToParent=function(){if(!this.env.canReorderItems&&!this.env.canDropOnNonFolder&&!this.env.items[this.targetItem.item].isFolder){var e=this.getParentOfLinearItem(this.linearIndex,this.treeId),t=e.parentLinearIndex,n=e.parent;this.targetItem=n,this.linearIndex=t}},e.prototype.maybeReparentUpwards=function(){var e,t;if(void 0!==this.indentation){var n=this.env.linearItems[this.treeId],i=n[this.linearIndex].depth,r=i-(null!==(t=null===(e=n[this.linearIndex+1])||void 0===e?void 0:e.depth)&&void 0!==t?t:0);if("bottom"===this.offset&&r>0){for(var o,s=Math.max(i-r,this.indentation),a={parentLinearIndex:this.linearIndex,parent:this.targetItem},l=i;l>=s;l-=1)o=a,a=this.getParentOfLinearItem(a.parentLinearIndex,this.treeId);if(this.indentation!==n[this.linearIndex].depth&&o){var d=this.env.items[a.parent.item].children.indexOf(o.parent.item)+1;if(!this.draggingItems||!this.isDescendant(this.treeId,a.parentLinearIndex+1,this.draggingItems))return{targetType:"between-items",treeId:this.treeId,parentItem:a.parent.item,depth:s,linearIndex:this.linearIndex+1,childIndex:d,linePosition:"bottom"}}}}},e.prototype.maybeRedirectInsideOpenFolder=function(){var e=this.env.linearItems[this.treeId][this.linearIndex+1];!this.env.canDropBelowOpenFolders&&e&&this.targetItem.depth===e.depth-1&&"bottom"===this.offset&&(this.targetItem=e,this.linearIndex+=1,this.offset="top")},e.prototype.maybeMapToBottomOffset=function(){var e=this.env.linearItems[this.treeId][this.linearIndex-1];if(e&&void 0!==(null==e?void 0:e.depth)){var t=e.depth-this.targetItem.depth;"top"===this.offset&&(0===t||t>0&&void 0!==this.indentation)&&(this.offset="bottom",this.linearIndex-=1,this.targetItem=this.env.linearItems[this.treeId][this.linearIndex])}},e.prototype.canDropAtCurrentTarget=function(){var e,t=this,n=this.env.items[this.targetItem.item];return!(!(this.offset||this.env.canDropOnNonFolder||n.isFolder)||!this.offset&&!this.env.canDropOnFolder&&n.isFolder||this.offset&&!this.env.canReorderItems||(null===(e=this.draggingItems)||void 0===e?void 0:e.some((function(e){return e.index===t.targetItem.item}))))},e.prototype.getDraggingPosition=function(){if(0===this.env.linearItems[this.treeId].length)return this.getEmptyTreeDragPosition();if(!(!this.draggingItems||this.linearIndex<0||this.linearIndex>=this.env.linearItems[this.treeId].length)){this.maybeRedirectToParent(),this.maybeRedirectInsideOpenFolder(),this.maybeMapToBottomOffset();var e=this.maybeReparentUpwards();if(e)return e;if(this.areDraggingItemsDescendantOfTarget())return"invalid";if(!this.canDropAtCurrentTarget())return"invalid";var t=this.getParentOfLinearItem(this.linearIndex,this.treeId).parent,n=this.env.items[t.item].children.indexOf(this.targetItem.item)+("top"===this.offset?0:1);return this.offset?{targetType:"between-items",treeId:this.treeId,parentItem:t.item,depth:this.targetItem.depth,linearIndex:this.linearIndex+("top"===this.offset?0:1),childIndex:n,linePosition:this.offset}:{targetType:"item",treeId:this.treeId,parentItem:t.item,targetItem:this.targetItem.item,depth:this.targetItem.depth,linearIndex:this.linearIndex}}},e.prototype.isDescendant=function(e,t,n){var i=this.getParentOfLinearItem(t,e),r=i.parentLinearIndex,o=i.parent;return!!n.some((function(e){return e.index===o.item}))||0!==o.depth&&this.isDescendant(e,r,n)},e.prototype.areDraggingItemsDescendantOfTarget=function(){return this.draggingItems&&this.isDescendant(this.treeId,this.linearIndex,this.draggingItems)},e}(),m=i.createContext(null),f=function(){return i.useContext(m)},p=function(e){var t=e.children,n=(0,r.f)(),f=(0,i.useState)(!1),p=f[0],v=f[1],T=(0,i.useState)({}),b=T[0],_=T[1],E=(0,i.useState)(0),I=E[0],w=E[1],y=(0,i.useState)(),O=y[0],x=y[1],R=function(){var e=(0,r.f)(),t=s(),n=o(),a=(0,i.useCallback)((function(e,n,i){var r=t(n,e),o=r.parent,s=r.parentLinearIndex;return!!i.some((function(e){return e.index===o.item}))||0!==o.depth&&a(e,s,i)}),[t]);return(0,i.useCallback)((function(i,r){for(var o,s,l,d,c=e.linearItems[i],u=[],h=-1,g=0;g<c.length;g++){var m=c[g],f=m.item,p=m.depth;if(!(-1!==h&&p>h)){h=-1;var v=t(g,i).parent,T=e.items[v.item].children.indexOf(f);if(a(i,g,r))h=p+1;else{var b={targetType:"item",parentItem:v.item,targetItem:f,linearIndex:g,depth:p,treeId:i},_={targetType:"between-items",parentItem:v.item,linePosition:"top",childIndex:T,depth:p,treeId:i,linearIndex:g},E={targetType:"between-items",parentItem:v.item,linePosition:"bottom",linearIndex:g+1,childIndex:T+1,depth:p,treeId:i},I=null!==(s=null===(o=c[g-1])||void 0===o?void 0:o.depth)&&void 0!==s?s:-1,w=p===(null!==(d=null===(l=c[g+1])||void 0===l?void 0:l.depth)&&void 0!==d?d:-1)-1;!(p===I)&&n(_,r)&&u.push(_),n(b,r)&&u.push(b),!w&&n(E,r)&&u.push(E)}}}return u}),[n,e.items,e.linearItems,t,a])}(),A=(0,d.l)(),L=(0,u.Q)(),D=function(){var e=(0,i.useRef)("initial"),t=(0,i.useState)(void 0),n=t[0],o=t[1],a=(0,i.useRef)(0),d=(0,r.f)(),u=s(),m=(0,c.J)((function(t,n,i){if(!i)return!1;var r=i.offset,o=i.linearIndex,s="".concat(n,"__").concat(o,"__").concat(null!=r?r:"","__").concat(i.indentation);return s!==e.current&&(e.current=s,!0)})),f=(0,c.J)((function(e,t,n){if(n.current){var i=n.current.getBoundingClientRect();if(!h(e,i)){var r=(e.clientY-i.top)/a.current,o=d.linearItems[t],s=Math.min(Math.max(0,Math.floor(r)),o.length-1);if(0===o.length)return{linearIndex:0,offset:"bottom",indentation:0};var l,c=o[s],u=d.items[c.item],g=d.renderDepthOffset?Math.max(Math.floor((e.clientX-i.left)/d.renderDepthOffset),0):void 0,m=d.canReorderItems?(null==u?void 0:u.isFolder)&&d.canDropOnFolder||d.canDropOnNonFolder?.2:.5:0;return r-.5>=o.length-1?l="bottom":r%1<m?l="top":r%1>1-m&&(l="bottom"),{linearIndex:s,offset:l,indentation:g}}}})),p=(0,c.J)((function(e,t,i){var r=f(e,t,i);if(m(e,t,r))return!n||!d.canDragAndDrop||!r||e.clientX<0||e.clientY<0?"invalid":new g(d,e,t,r,n,u).getDraggingPosition()})),v=(0,c.J)((function(t,n){o(n),e.current="initial",a.current=function(e){var t,n=null===(t=(0,l.Y)())||void 0===t?void 0:t.querySelector('[data-rct-tree="'.concat(e,'"] [data-rct-item-container="true"]'));if(n){var i=getComputedStyle(n);return n.offsetHeight+Math.max(parseFloat(i.marginTop),parseFloat(i.marginBottom))}return 5}(t)}));return{initiateDraggingPosition:v,resetDraggingPosition:(0,c.J)((function(){o(void 0),e.current="initial",a.current=0})),draggingItems:n,getDraggingPosition:p,itemHeight:a}}(),N=D.initiateDraggingPosition,S=D.resetDraggingPosition,C=D.draggingItems,M=D.getDraggingPosition,B=D.itemHeight,U=(0,i.useCallback)((function(e,t){var i;if(n.activeTreeId&&(null===(i=n.viewState[n.activeTreeId])||void 0===i?void 0:i.focusedItem)&&n.linearItems&&t){var r=n.viewState[n.activeTreeId].focusedItem,o=R(n.activeTreeId,t),s=o.findIndex((function(e){return"item"===e.targetType?e.targetItem===r:"between-items"===e.targetType&&n.items[e.parentItem].children[e.childIndex]===r}));w(s?Math.min(s+1,o.length-1):0)}else w(0)}),[n.activeTreeId,n.items,n.linearItems,n.viewState,R]),P=(0,c.J)((function(){v(!1),_({}),w(0),x(void 0),S()}));(0,a.C)((function(){n.activeTreeId&&n.linearItems[n.activeTreeId]&&b[n.activeTreeId]&&U(b[n.activeTreeId],C)}),[C,n.activeTreeId,n.linearItems,U,b],[n.activeTreeId]),(0,a.C)((function(){p&&n.activeTreeId&&x(b[n.activeTreeId][I])}),[I,n.activeTreeId,p,b],[I,n.activeTreeId]);var F=o(),W=(0,c.J)((function(e,t,i){if(C){var r=M(e,t,i);r&&("invalid"!==r?function(e){var t;C&&!F(e,C)||(x(e),n.setActiveTree(e.treeId),C&&n.activeTreeId!==e.treeId&&(null===(t=n.onSelectItems)||void 0===t||t.call(n,C.map((function(e){return e.index})),e.treeId)))}(r):x(void 0))}})),Y=(0,c.J)((function(e,t){t.current&&h(e,t.current.getBoundingClientRect())&&x(void 0)})),j=(0,c.J)((function(){C&&O&&n.onDrop&&(n.onDrop(C,O),A((function(){var e;null===(e=n.onFocusItem)||void 0===e||e.call(n,C[0],O.treeId),P()})))})),H=(0,i.useCallback)((function(e,t){var i=(0,l.D)(n.treeIds,(function(t){return R(t,e)}));N(t,e),_(i),n.activeTreeId&&U(i[n.activeTreeId],e)}),[n.activeTreeId,n.treeIds,R,N,U]),X=(0,i.useCallback)((function(){var e,t,i;if(n.canDragAndDrop&&n.activeTreeId){var r=null!==(t=null===(e=n.viewState[n.activeTreeId])||void 0===e?void 0:e.selectedItems)&&void 0!==t?t:[null===(i=n.viewState[n.activeTreeId])||void 0===i?void 0:i.focusedItem];if(0===r.length||void 0===r[0])return;var o=L(n.activeTreeId,r.map((function(e){return n.items[e]})));if(n.canDrag&&!n.canDrag(o))return;H(o,n.activeTreeId),setTimeout((function(){v(!0)}))}}),[n,L,H]),k=(0,i.useCallback)((function(){P()}),[P]),z=(0,i.useCallback)((function(){j(),P()}),[j,P]),G=(0,i.useCallback)((function(){w((function(e){return Math.max(0,e-1)}))}),[]),V=(0,i.useCallback)((function(){n.activeTreeId&&w((function(e){return Math.min(b[n.activeTreeId].length-1,e+1)}))}),[n.activeTreeId,b]),J=(0,i.useMemo)((function(){return{onStartDraggingItems:H,startProgrammaticDrag:X,abortProgrammaticDrag:k,completeProgrammaticDrag:z,programmaticDragUp:G,programmaticDragDown:V,draggingItems:C,draggingPosition:O,itemHeight:B.current,isProgrammaticallyDragging:p,onDragOverTreeHandler:W,onDragLeaveContainerHandler:Y,viableDragPositions:b}}),[k,z,C,O,p,B,W,Y,H,V,G,X,b]);return(0,i.useEffect)((function(){return window.addEventListener("dragend",P),window.addEventListener("drop",j),function(){window.removeEventListener("dragend",P),window.removeEventListener("drop",j)}}),[j,P]),i.createElement(m.Provider,{value:J},t)}},96115:(e,t,n)=>{n.d(t,{Q:()=>o});var i=n(15036),r=n(86806),o=function(){var e=(0,i.f)();return(0,r.J)((function(t,n){return n.map((function(n){return[n,e.linearItems[t].findIndex((function(e){return e.item===n.index}))]})).sort((function(e,t){e[0];var n=e[1];return t[0],n-t[1]})).map((function(e){return e[0]}))}))}}}]);